{"url": "https://api.github.com/repos/datalad/datalad/issues/334", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/334/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/334/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/334/events", "html_url": "https://github.com/datalad/datalad/pull/334", "id": 126288055, "node_id": "MDExOlB1bGxSZXF1ZXN0NTU4MjQxMTI=", "number": 334, "title": "ENH: various enhancements, primarily starting to use --batch mode for some annex commands", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-01-12T22:03:34Z", "updated_at": "2016-01-27T14:20:44Z", "closed_at": "2016-01-27T14:20:44Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/334", "html_url": "https://github.com/datalad/datalad/pull/334", "diff_url": "https://github.com/datalad/datalad/pull/334.diff", "patch_url": "https://github.com/datalad/datalad/pull/334.patch"}, "body": "Should speed up some operations considerably since should avoid starting a new git-annex which in turn might be starting our custom backend every time\n1. There are some peculiarities with annex behavior in this mode, e.g. files are not added to index right when addurl line is \"treated\" by it and waits for the pipe to get closed.  I manually adding them to (gitpython) index to mitigate it for now.  Related issues on git-annex site:\n   http://git-annex.branchable.com/bugs/addurl_--batch__--with-files_doesn__39__t_add_file_into_git_until_pipe_is_closed/\n   http://git-annex.branchable.com/bugs/inconsistent_output_upon_addurl_--batch_complicates_if_not_forbids_reliable_parsing_of_output/\n2. Implementation of the communication to git-annex is quite fragile.  It might get stuck if annex doesn't spit out expected ok or failed.  We might need to implement some timeout manually or use pexpect to redo it\n\nAlso includes some caching for contentlocation within archive special remote.\n\nRequires very recent (>= Jan 18) annex due to a variety of fixes. \n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/334/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/334/timeline", "performed_via_github_app": null}