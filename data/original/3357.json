{"url": "https://api.github.com/repos/datalad/datalad/issues/3357", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3357/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3357/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3357/events", "html_url": "https://github.com/datalad/datalad/issues/3357", "id": 437691498, "node_id": "MDU6SXNzdWU0Mzc2OTE0OTg=", "number": 3357, "title": "Provide annex backend for \"salted\" checksums", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-04-26T14:09:22Z", "updated_at": "2020-08-04T05:35:41Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "When handling sensitive data even the mere presence of a file key can leak information. Example: two datasets contain the same patient records (one file per patient). Getting access to one study dataset, allows one to cross-reference a patient (given an identical record) across other datasets/studies -- even if I never got access to the content of those datasets.\r\n\r\nA solution would be to encode a dataset's ID into the file keys determined by the annex backend (essentially salting the hashes with the dataset ID). This would give a dataset-specific hash that is different from any other dataset, even if the file content is exactly identical. Of course this is not really a salt (the dataset ID is not necessarily secret, so maybe the secret needs to be in an annexed with in each dataset, such that one needs permission to access it in order to make use of it for checksum generation).\r\n\r\nNaturally many interesting use cases become impossible with such a backend (by design), so this should not be the default, but we need this as an option for handling sensitive data.\r\n\r\n@jbpoline might be interested in this issue. @joeyh might already have a solution for this problem.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3357/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3357/timeline", "performed_via_github_app": null}