{"url": "https://api.github.com/repos/datalad/datalad/issues/737", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/737/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/737/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/737/events", "html_url": "https://github.com/datalad/datalad/issues/737", "id": 173826019, "node_id": "MDU6SXNzdWUxNzM4MjYwMTk=", "number": 737, "title": "How to deal with configuration?", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778594, "node_id": "MDU6TGFiZWw2Mzc3ODU5NA==", "url": "https://api.github.com/repos/datalad/datalad/labels/question", "name": "question", "color": "fbca04", "default": true, "description": "Issue asks a question rather than reporting a problem"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2016-08-29T17:24:17Z", "updated_at": "2016-09-01T13:52:02Z", "closed_at": "2016-09-01T13:52:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Assuming the following is true:\n- we need a configuration storage/retrieval system\n- we want to stay syntax compatible with Git's own, to...\n- ...be able to stack configuration from system, to user, to dataset\n\nwe have a problem.\n\nGitPython's config parser is incapable of producing the same behavior as git-config. The issue is multi-value options:\n\n```\n[some]\n    mess = one\n    mess = two\n```\n\nwill always yield `mess = two`, i.e. the first values is ignored. `git-config` on the other hand provides `--get-all` which returns both settings. There does not seem to be an equivalent for that in GitPython's implementation.\n\nMoreover, it seems there cannot be one, as GitPython bases its parser on Python's RawConfigParser, which seems to plainly overwrite the first value with the latter.\n\nTwo options:\n- extend GitPython's parser (which is a monster)\n- wrap `git-config`\n- write a parser from scratch\n\nAll three options look like a waste of time. But I am leaning towards wrapping `git-config`. Reading the full config is a single call (`git config -l`), plus some line parsing. Writing config is either a git-config call per setting (need to check, if multiple at the same time are possible), or we simply write a syntax compatible file ourselves.\n\n@yarikoptic @bpoldrack Your input is appreciated!\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/737/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/737/timeline", "performed_via_github_app": null}