{"url": "https://api.github.com/repos/datalad/datalad/issues/1301", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1301/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1301/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1301/events", "html_url": "https://github.com/datalad/datalad/pull/1301", "id": 207798300, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA2MzA2MDYz", "number": 1301, "title": "TST: Helper to generate a mockup DS tree resembling studyforrest.org", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-02-15T13:04:11Z", "updated_at": "2018-07-14T18:32:27Z", "closed_at": "2017-02-15T18:15:46Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/1301", "html_url": "https://github.com/datalad/datalad/pull/1301", "diff_url": "https://github.com/datalad/datalad/pull/1301.diff", "patch_url": "https://github.com/datalad/datalad/pull/1301.patch"}, "body": "This should help playing with this monster in the context of #923\r\n\r\nThe first comment there requests a URL for `datalad install -r ...`. This is to better evaluate what that would mean without any significant file load.\r\n\r\nBelow is a demo of the result (public facing datasets only). Note that 3 layers of datasets are sufficient, but no more than 2 layers are actually installed in each case. Going full recursive install should yield 4 layers for the present setup (actual studyforrest.org should be no more then 5 layers ATM). The vast majority of all subdatasets would be copies.\r\n\r\nComplete publication would be solved by publishing datasets in the first layer only, and all versions of all files in all revisions of these.\r\n\r\nThe function produces a cartoon representation of the project evolution too -- simulating that different versions of some derived datasets were input into different analyses.\r\n\r\n````\r\npublic (git)-[master] % datalad ls -r\r\n.                                   [annex]  master  - 2017-02-15/13:40:37  X\r\naggregate                           [annex]  master  - 2017-02-15/13:40:38  OK\r\naggregate/src/aligned               [annex]  master  - 2017-02-15/13:40:35  OK\r\naggregate/src/aligned/src/phase1    not installed\r\naggregate/src/aligned/src/phase2    not installed\r\naggregate/src/aligned/src/tnt       not installed\r\naligned                             [annex]  master  - 2017-02-15/13:40:35  OK\r\naligned/src/phase1                  [annex]  master  - 2017-02-15/13:39:55  OK\r\naligned/src/phase2                  [annex]  master  - 2017-02-15/13:40:06  OK\r\naligned/src/phase2/src/dicoms       not installed\r\naligned/src/phase2/src/labet        not installed\r\naligned/src/tnt                     [annex]  master  - 2017-02-15/13:39:59  OK\r\naligned/src/tnt/src/phase1          not installed\r\naligned/src/tnt/src/structural      not installed\r\nanalysis1                           [annex]  master  - 2017-02-15/13:40:18  OK\r\nanalysis1/src/aligned               [annex]  master  - 2017-02-15/13:40:09  OK\r\nanalysis1/src/aligned/src/phase1    not installed\r\nanalysis1/src/aligned/src/phase2    not installed\r\nanalysis1/src/aligned/src/tnt       not installed\r\nanalysis1/src/annot                 [annex]  master  - 2017-02-15/13:40:12  OK\r\nanalysis1/src/annot/src/media       not installed\r\nanalysis1/src/tnt                   [annex]  master  - 2017-02-15/13:40:07  OK\r\nanalysis1/src/tnt/src/phase1        not installed\r\nanalysis1/src/tnt/src/phase2        not installed\r\nanalysis1/src/tnt/src/structural    not installed\r\nanalysis2                           [annex]  master  - 2017-02-15/13:40:25  OK\r\nanalysis2/src/aligned               [annex]  master  - 2017-02-15/13:40:20  OK\r\nanalysis2/src/aligned/src/phase1    not installed\r\nanalysis2/src/aligned/src/phase2    not installed\r\nanalysis2/src/aligned/src/tnt       not installed\r\nanalysis2/src/annot                 [annex]  master  - 2017-02-15/13:40:12  OK\r\nanalysis2/src/annot/src/media       not installed\r\nanalysis2/src/tnt                   [annex]  master  - 2017-02-15/13:40:07  OK\r\nanalysis2/src/tnt/src/phase1        not installed\r\nanalysis2/src/tnt/src/phase2        not installed\r\nanalysis2/src/tnt/src/structural    not installed\r\nanalysis3                           [annex]  master  - 2017-02-15/13:40:33  OK\r\nanalysis3/src/aligned               [annex]  master  - 2017-02-15/13:40:27  OK\r\nanalysis3/src/aligned/src/phase1    not installed\r\nanalysis3/src/aligned/src/phase2    not installed\r\nanalysis3/src/aligned/src/tnt       not installed\r\nanalysis3/src/annot                 [annex]  master  - 2017-02-15/13:40:12  OK\r\nanalysis3/src/annot/src/media       not installed\r\nanalysis3/src/tnt                   [annex]  master  - 2017-02-15/13:40:07  OK\r\nanalysis3/src/tnt/src/phase1        not installed\r\nanalysis3/src/tnt/src/phase2        not installed\r\nanalysis3/src/tnt/src/structural    not installed\r\nannotations                         [annex]  master  - 2017-02-15/13:40:12  OK\r\nannotations/src/media               [annex]  master  - 2017-02-15/13:40:09  OK\r\nmetaanalysis                        [annex]  master  - 2017-02-15/13:40:34  OK\r\nmetaanalysis/src/ana1               [annex]  master  - 2017-02-15/13:40:18  OK\r\nmetaanalysis/src/ana1/src/aligned   not installed\r\nmetaanalysis/src/ana1/src/annot     not installed\r\nmetaanalysis/src/ana1/src/tnt       not installed\r\nmetaanalysis/src/ana2               [annex]  master  - 2017-02-15/13:40:25  OK\r\nmetaanalysis/src/ana2/src/aligned   not installed\r\nmetaanalysis/src/ana2/src/annot     not installed\r\nmetaanalysis/src/ana2/src/tnt       not installed\r\nmetaanalysis/src/ana3               [annex]  master  - 2017-02-15/13:40:33  OK\r\nmetaanalysis/src/ana3/src/aligned   not installed\r\nmetaanalysis/src/ana3/src/annot     not installed\r\nmetaanalysis/src/ana3/src/tnt       not installed\r\nphase1                              [annex]  master  - 2017-02-15/13:39:55  OK\r\nphase2                              [annex]  master  - 2017-02-15/13:40:06  OK\r\nphase2/src/dicoms                   [annex]  master  - 2017-02-15/13:40:03  OK\r\nphase2/src/labet                    [annex]  master  - 2017-02-15/13:40:02  OK\r\nstructural                          [annex]  master  - 2017-02-15/13:39:56  OK\r\ntnt                                 [annex]  master  - 2017-02-15/13:40:07  OK\r\ntnt/src/phase1                      [annex]  master  - 2017-02-15/13:39:55  OK\r\ntnt/src/phase2                      [annex]  master  - 2017-02-15/13:40:06  OK\r\ntnt/src/phase2/src/dicoms           not installed\r\ntnt/src/phase2/src/labet            not installed\r\ntnt/src/structural                  [annex]  master  - 2017-02-15/13:39:56  OK\r\n````", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1301/timeline", "performed_via_github_app": null}