{"url": "https://api.github.com/repos/datalad/datalad/issues/3674", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3674/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3674/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3674/events", "html_url": "https://github.com/datalad/datalad/issues/3674", "id": 493515988, "node_id": "MDU6SXNzdWU0OTM1MTU5ODg=", "number": 3674, "title": "NDA token generator uses depreciated interface", "user": {"login": "dnkennedy", "id": 1349212, "node_id": "MDQ6VXNlcjEzNDkyMTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1349212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dnkennedy", "html_url": "https://github.com/dnkennedy", "followers_url": "https://api.github.com/users/dnkennedy/followers", "following_url": "https://api.github.com/users/dnkennedy/following{/other_user}", "gists_url": "https://api.github.com/users/dnkennedy/gists{/gist_id}", "starred_url": "https://api.github.com/users/dnkennedy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dnkennedy/subscriptions", "organizations_url": "https://api.github.com/users/dnkennedy/orgs", "repos_url": "https://api.github.com/users/dnkennedy/repos", "events_url": "https://api.github.com/users/dnkennedy/events{/privacy}", "received_events_url": "https://api.github.com/users/dnkennedy/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-13T21:03:23Z", "updated_at": "2020-12-09T15:52:50Z", "closed_at": "2020-12-09T15:52:50Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### What is the problem?\r\nNDA-tools have a new version of a script to obtain token from NDA. Here is some traceback from datalad showing it using old URL.\r\n\r\n```\r\n(Pdb) p response\r\nb'<html>\\n<head><title>\\nWeb Services\\n</title></head>\\n<body>\\n<h1>Web Services</h1>\\n<table width=\\'100%\\' border=\\'1\\'>\\n<tr>\\n<td>\\nEndpoint\\n</td>\\n<td>\\nInformation\\n</td>\\n</tr>\\n<tr>\\n<td>\\n<table border=\"0\"><tr><td>Service Name:</td><td>{http://dataManagerService}dataManagerServicePorts</td></tr><tr><td>Port Name:</td><td>{http://dataManagerService}dataManagerService</td></tr></table>\\n</td>\\n<td>\\n<table border=\"0\"><tr><td>Address:</td><td>https://nda.nih.gov:443/DataManager/dataManager</td></tr><tr><td>WSDL:</td><td><a href=\"https://nda.nih.gov:443/DataManager/dataManager?wsdl\">https://nda.nih.gov:443/DataManager/dataManager?wsdl</a></td></tr><tr><td>Implementation class:</td><td>gov.nih.ndar.ws.datamanager.DataManagerServer</td></tr></table>\\n</td>\\n</tr>\\n</table>\\n</body>\\n</html>\\n'\r\n(Pdb) up\r\n> /Users/davidkennedy/miniconda3/lib/python3.7/site-packages/datalad/support/third/nda_aws_token_generator.py(82)__make_request()\r\n-> return self.__parse_response(response.read())\r\n(Pdb) l\r\n 77  \t        }\r\n 78  \t\r\n 79  \t        request = urllib_request.Request(self.url, data=request_message, headers=headers)\r\n 80  \t        logging.debug(request)\r\n 81  \t        response = urllib_request.urlopen(request)\r\n 82  ->\t        return self.__parse_response(response.read())\r\n 83  \t\r\n 84  \t    def __parse_response(self, response):\r\n 85  \t        logging.debug('parsing response')\r\n 86  \t        tree = etree.fromstring(response)\r\n 87  \t\r\n(Pdb) p self.url\r\n'https://ndar.nih.gov/DataManager/dataManager'\r\n(Pdb) up\r\n> /Users/davidkennedy/miniconda3/lib/python3.7/site-packages/datalad/support/third/nda_aws_token_generator.py(34)generate_token()\r\n-> return self.__make_request(request_xml)\r\n```\r\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3674/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3674/timeline", "performed_via_github_app": null}