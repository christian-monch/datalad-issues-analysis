{"url": "https://api.github.com/repos/datalad/datalad/issues/1349", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1349/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1349/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1349/events", "html_url": "https://github.com/datalad/datalad/pull/1349", "id": 210837813, "node_id": "MDExOlB1bGxSZXF1ZXN0MTA4MzY2NzY5", "number": 1349, "title": "BF+RF: publish - warrant \"wanted\", annex_copy_opts is not annex_copy_options", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2017-02-28T16:27:50Z", "updated_at": "2018-07-14T19:41:26Z", "closed_at": "2017-03-10T08:58:25Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/1349", "html_url": "https://github.com/datalad/datalad/pull/1349", "diff_url": "https://github.com/datalad/datalad/pull/1349.diff", "patch_url": "https://github.com/datalad/datalad/pull/1349.patch"}, "body": "+ copy invocation independent on either anything to push\r\n\r\nCloses #1329 ATM partially, TODO\r\n- [x] see to that inability to detect dataset (last item)\r\n\r\nCloses #1293 -- should copy if I provide the path although everything was pushed already\r\n- [x] I thought that upon anything copied we should redo the push of the git-annex branch since now remote wouldn't be aware of the new copy IIRC.  BUT as test showed, at least on new versions of the remotes (init'ed with recent annex) that is not needed -- they get their git-annex branch also updated. I guess related to https://github.com/datalad/datalad/issues/1319 \r\n\r\nCloses #1274 -- should not copy data by default now, unless paths are provided or remote has 'wanted' setting.\r\n\r\nedit 1+3:\r\nFormalized/changed/new behavior: to publish a dataset under `dspath` with all of its content (i.e. invoke `annex copy` on the entire dataset), there are two ways:\r\n1. `datalad publish --to=remote .` as to instruct explicitly to publish the \"root\" directory of the dataset.\r\n2. Define `wanted` for the remote (via add-sibling or create-sibing) and then can use `datalad publish --to=remote dspath` should consult `wanted` setting of the dataset and perform `copy --auto`\r\n\r\nedit 2:\r\nI think it might be a changed behavior now although not clear since to me two tests contradicted each other before:\r\n- `copy_to` will return only paths to the content actually copied (datasets, or paths to files).  I.e. second invocation of exactly the same `copy_to` should return no filenames.  This also would make it more consistent with invocation when `annex copy` is called with `--fast` \r\n\r\nTODO:\r\n- [x] test precisely that of 1.  ATM I believe there is no explicit test like that to do 'out of CWD' invocation pointing to the path\r\n- [x] edit 4:  verify/make sure that `publish -r subdir` publishes submodules under `subdir` with the data.", "closed_by": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1349/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1349/timeline", "performed_via_github_app": null}