{"url": "https://api.github.com/repos/datalad/datalad/issues/1426", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1426/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1426/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1426/events", "html_url": "https://github.com/datalad/datalad/issues/1426", "id": 216430316, "node_id": "MDU6SXNzdWUyMTY0MzAzMTY=", "number": 1426, "title": "publish still \"doesn't publish\" (without -r)", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-23T13:38:32Z", "updated_at": "2017-08-23T19:10:44Z", "closed_at": "2017-08-23T19:10:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "e.g. I am in the top of our crawled mega-dataset, and trying to publish it after I have added workshops/ subdataset:\r\n\r\n```shell\r\n(git)smaug:/mnt/btrfs/datasets/datalad/crawl[master]git\r\n$> datalad publish --to=datalad-public\r\n[INFO   ] Publishing <Dataset path=/mnt/btrfs/datasets/datalad/crawl> to datalad-public\r\nyoh@datasets.datalad.org's password:\r\nPermission denied, please try again.\r\nyoh@datasets.datalad.org's password:\r\nNo handlers could be found for logger \"git.remote\"\r\n1 item was published:\r\nDataset: /mnt/btrfs/datasets/datalad/crawl\r\n\r\n\r\n$> git lg\r\n* 4ea5f63 - (HEAD -> master) [DATALAD] aggregated meta data (22 minutes ago) [Yaroslav Halchenko]\r\n* c544eac - aggregated meta-data for the workshops which now includes nipype 2017 (23 minutes ago) [Yaroslav Halchenko]\r\n* 2699b2f - [DATALAD] added content (31 minutes ago) [Yaroslav Halchenko]\r\n* 9a87f45 - (datalad-public/master) [DATALAD] aggregated meta data (4 days ago) [Yaroslav Halchenko]\r\n* d581162 - [DATALAD] auto-saved changes (4 days ago) [Yaroslav Halchenko]\r\n```\r\n\r\nso as you can see datalad-public/master is still  at older point\r\n\r\nNB1 adding -r makes action to take long time, so I guess it does its \"lets get entire hierarchy just in case\" although there were no changes to other datasets but 'workshops' since the last push.\r\nBut it seems to do the right thing\r\n```shell\r\n$> datalad publish --to=datalad-public -r\r\n[INFO   ] Publishing <Dataset path=/mnt/btrfs/datasets/datalad/crawl/workshops> to datalad-public\r\nyoh@datasets.datalad.org's password:\r\nPermission denied, please try again.\r\nyoh@datasets.datalad.org's password:\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/workshops/nipype-2017/ds000114> ...\r\n[INFO   ] Publishing <Dataset path=/mnt/btrfs/datasets/datalad/crawl> to datalad-public\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/Philips-20131217> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-8> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test3> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/PHANTOM-20160909> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/labs/haxby/raiders> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-9> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-4> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-5> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-6> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-7> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-1> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-2> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-3> ...\r\n[INFO   ] Publishing data of dataset <Dataset path=/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/PHANTOM1_3> ...\r\n2 items were published:\r\nDataset: /mnt/btrfs/datasets/datalad/crawl/workshops\r\nDataset: /mnt/btrfs/datasets/datalad/crawl\r\n\r\ndatalad publish --to=datalad-public -r  96.94s user 40.45s system 33% cpu 6:47.09 total\r\n```\r\n\r\nand then just keeps saying that it is publishing it although it was already fully up-to-date\r\n```shell\r\n$> datalad publish --to=datalad-public -r\r\n[INFO   ] Publishing <Dataset path=/mnt/btrfs/datasets/datalad/crawl> to datalad-public \r\n[INFO   ] [up to date]\r\n|  \r\n1 item was published:\r\nDataset: /mnt/btrfs/datasets/datalad/crawl\r\n```\r\n\r\nNB2 it would have been nice if it announced first how many datasets it is going to publish or any other additional detail relevant if it knows ;)", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1426/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1426/timeline", "performed_via_github_app": null}