{"url": "https://api.github.com/repos/datalad/datalad/issues/3342", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3342/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3342/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3342/events", "html_url": "https://github.com/datalad/datalad/issues/3342", "id": 434049015, "node_id": "MDU6SXNzdWU0MzQwNDkwMTU=", "number": 3342, "title": "`status` impairs usability in sizeable repos", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2019-04-17T01:16:12Z", "updated_at": "2020-01-10T19:46:23Z", "closed_at": "2020-01-10T19:46:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "e.g. git status (0.3sec) vs datalad status (45.8sec):\r\n\r\n```shell\r\nfmriprep001$ time git status                                                                                 \r\nOn branch master\r\nChanges to be committed:\r\n  (use \"git reset HEAD <file>...\" to unstage)\r\n\r\n        new file:   fmriprep/dataset_description.json\r\n        new file:   fmriprep/logs/CITATION.md\r\n\r\nUntracked files:\r\n  (use \"git add <file>...\" to include in what will be committed)\r\n\r\n        freesurfer/fsaverage5/surf/.xdebug_tksurfer\r\n\r\n\r\nreal    0m0.253s\r\nuser    0m0.184s\r\nsys     0m0.360s\r\n```\r\nNB - those \"new file\"s are somehow uncommitted after `datalad add` call on all of the files -- yet to possibly figure out reproducible demo\r\n```shell\r\nfmriprep001$ time datalad status                                                                             |\r\nuntracked: freesurfer/fsaverage5/surf/.xdebug_tksurfer (file)\r\n    added: fmriprep/dataset_description.json (file)\r\n    added: fmriprep/logs/CITATION.md (file)\r\n\r\nreal    0m45.858s\r\nuser    0m37.752s\r\nsys     0m11.092s\r\n```\r\nso what additional functionality/advantages of `datalad status` demand x100 run time and either it is avoidable?\r\n\r\nthis dataset is fmriprep output on a dataset with 253 subjects, so there is ~95k files in it (git counted ~200k objects), majority is annexed, no submodules, \r\n\r\nAfter `git gc --prune=now`, `datalad status` took less -- 34 sec, `git ls-files` takes 0.108 sec, `git ls-tree master -r` also takes whooping 0.1 sec. `datalad save -m '...'` saved those staged files also within just a second or so,  `datalad rev-save` took 45 sec (and did save that `.xdebug_tksurfer` file). \r\nedit 1: Even when specifying explicitly paths for just a few files to be saved to `rev-save` in a repo with 66k files, requires then a handful of seconds to do a simple commit.\r\n\r\ndatalad 0.12.0rc2.dev268 (0.12.0rc2-268-ge79d4ea8)  python3", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3342/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3342/timeline", "performed_via_github_app": null}