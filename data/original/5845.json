{"url": "https://api.github.com/repos/datalad/datalad/issues/5845", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5845/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5845/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5845/events", "html_url": "https://github.com/datalad/datalad/issues/5845", "id": 955972051, "node_id": "MDU6SXNzdWU5NTU5NzIwNTE=", "number": 5845, "title": "export-archive-ora filter files based on git-annex matching options.", "user": {"login": "bpinsard", "id": 1155388, "node_id": "MDQ6VXNlcjExNTUzODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1155388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpinsard", "html_url": "https://github.com/bpinsard", "followers_url": "https://api.github.com/users/bpinsard/followers", "following_url": "https://api.github.com/users/bpinsard/following{/other_user}", "gists_url": "https://api.github.com/users/bpinsard/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpinsard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpinsard/subscriptions", "organizations_url": "https://api.github.com/users/bpinsard/orgs", "repos_url": "https://api.github.com/users/bpinsard/repos", "events_url": "https://api.github.com/users/bpinsard/events{/privacy}", "received_events_url": "https://api.github.com/users/bpinsard/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-07-29T15:41:48Z", "updated_at": "2021-07-30T12:58:37Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "#### What is the problem?\r\n\r\nMore a feature request / feasibility question: \r\nCurrently, when exporting an archive for ORA, it will add all keys present in the current repo to the archive, while one might want to filter the archive content (eg. based on distribution-restriction metadata) similar to the `wanted` option for special-remotes.\r\n\r\nDo you think it would be possible to replace the following glob:\r\nhttps://github.com/datalad/datalad/blob/master/datalad/distributed/export_archive_ora.py#L139\r\nwith a call to `git-annex find --format='.git/annex/objects/${hashdirmixed}${key}/${key} '` with optional [git-annex-matching-options](https://git-annex.branchable.com/git-annex-matching-options/) passed as an option to the `export-archive-ora` command line?\r\nIf you think this is of interest, I could work on a PR.\r\n\r\nThanks!\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5845/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5845/timeline", "performed_via_github_app": null}