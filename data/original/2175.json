{"url": "https://api.github.com/repos/datalad/datalad/issues/2175", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2175/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2175/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2175/events", "html_url": "https://github.com/datalad/datalad/issues/2175", "id": 297302661, "node_id": "MDU6SXNzdWUyOTczMDI2NjE=", "number": 2175, "title": "datalad's submodules/subdatasets does not include \"non initialized\" but present submodules", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-02-15T01:22:36Z", "updated_at": "2018-02-15T01:26:23Z", "closed_at": "2018-02-15T01:26:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### What is the problem?\r\noriginally ran within context of `diff` command (#2171), looking inside I saw that despite `git submodule --recrusive` considering all of them:\r\n```shell\r\n$> git submodule foreach --recursive pwd\r\nEntering 'PHANTOM-20160909'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/PHANTOM-20160909\r\nEntering 'PHANTOM1_3'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/PHANTOM1_3\r\nEntering 'Philips-20131217'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/Philips-20131217\r\nEntering 'bids_test3'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test3\r\nEntering 'bids_test4-20161014'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014\r\nEntering 'bids_test4-20161014/phantom-1'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-1\r\nEntering 'bids_test4-20161014/phantom-2'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-2\r\nEntering 'bids_test4-20161014/phantom-3'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-3\r\nEntering 'bids_test4-20161014/phantom-4'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-4\r\nEntering 'bids_test4-20161014/phantom-5'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-5\r\nEntering 'bids_test4-20161014/phantom-6'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-6\r\nEntering 'bids_test4-20161014/phantom-7'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-7\r\nEntering 'bids_test4-20161014/phantom-8'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-8\r\nEntering 'bids_test4-20161014/phantom-9'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test4-20161014/phantom-9\r\nEntering 'bids_test5-20170120'\r\n/mnt/btrfs/datasets/datalad/crawl/dicoms/dartmouth-phantoms/bids_test5-20170120\r\n```\r\nour commands do not recurse into `bids_test4-20161014/`:\r\n```shell\r\n$> datalad subdatasets -r\r\nsubdataset(ok): PHANTOM-20160909 (dataset)\r\nsubdataset(ok): PHANTOM1_3 (dataset)\r\nsubdataset(ok): Philips-20131217 (dataset)\r\nsubdataset(ok): bids_test3 (dataset)\r\nsubdataset(ok): bids_test4-20161014 (dataset)\r\nsubdataset(ok): bids_test5-20170120 (dataset)\r\naction summary:\r\n  subdataset (ok: 6)\r\n```\r\n```shell\r\n$> datalad ls -r .\r\n.                     [git]  master  ? 2018-02-12/09:57:29  ?\r\nPHANTOM-20160909      [annex]  master  ? 2018-02-12/09:42:17  ?\r\nPHANTOM1_3            [annex]  master  ? 2018-02-12/09:42:17  ?\r\nPhilips-20131217      [annex]  master  ? 2018-02-12/09:42:17  ?\r\nbids_test3            [annex]  master  ? 2018-02-12/09:42:17  ?\r\nbids_test4-20161014   [annex]  master  ? 2018-02-12/09:42:16  ?\r\nbids_test5-20170120   [annex]  master  ? 2018-02-12/09:42:16  ?\r\n```\r\nand that is because (I think) because those submodules are not listed within `.git/config` of that subdataset:\r\n```shell\r\n$> cat bids_test4-20161014/.git/config \r\n[core]\r\n\trepositoryformatversion = 0\r\n\tfilemode = true\r\n\tbare = false\r\n\tlogallrefupdates = true\r\n[annex]\r\n\tuuid = e3111c2a-52da-4769-9792-a950ced5ece0\r\n\tversion = 5\r\n[receive]\r\n\tdenyCurrentBranch = updateInstead\r\n[remote \"datalad-public\"]\r\n\turl = ssh://datasets.datalad.org/srv/datasets.datalad.org/www/dicoms/dartmouth-phantoms/bids_test4-20161014\r\n\tfetch = +refs/heads/*:refs/remotes/datalad-public/*\r\n\tpush = refs/heads/*\r\n\tannex-uuid = 9d11140f-e1a0-472a-9481-168b1ae5637c\r\n\tannex-ssh-options = -o ControlMaster=auto -S /home/yoh/.cache/datalad/sockets/datasets.datalad.org\r\n\tpush = refs/tags/*\r\n\tannex-ignore = false\r\n[branch \"master\"]\r\n\tremote = datalad-public\r\n\tmerge = refs/heads/master\r\n```\r\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2175/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2175/timeline", "performed_via_github_app": null}