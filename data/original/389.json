{"url": "https://api.github.com/repos/datalad/datalad/issues/389", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/389/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/389/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/389/events", "html_url": "https://github.com/datalad/datalad/issues/389", "id": 144784277, "node_id": "MDU6SXNzdWUxNDQ3ODQyNzc=", "number": 389, "title": "absolute paths for sub modules are evil!", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2016-03-31T04:14:06Z", "updated_at": "2016-04-06T19:46:11Z", "closed_at": "2016-04-06T19:46:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "for now just whining without concrete demo/reproducibility... not sure yet abs path at which place to blame\nmoved aside openfmri super dataset (into openfmri-1 at the same level), then ran datalad ls on its submodules, they decided to adjust .git pointing to new location, which now existed at previous paths... all kinds of bad things started to happen:\n\n```\nds000113b  [annex]  master  ?  ?  54.1 GB/27.1 GB\nds000114  [annex]  master  ?  ?  9.9 GB/5.0 GB\nds000115  'git diff --cached --abbrev=40 --full-index --raw' returned with exit code 128\nstderr: 'error: bad index file sha1 signature\nfatal: index file corrupt' [cmd.py:execute:641]\n2016-03-31 00:01:30,937 [ERROR  ] stderr| warning: unable to convert submodule to form that will work with git-annex (cmd.py:351)\nds000116  [annex]  master  ?  ?  0 Bytes/0 Bytes\n2016-03-31 00:01:31,118 [ERROR  ] stderr| warning: unable to convert submodu\n```\n\nnot sure yet what to blame (git, annex or us) but whatever adjusts those urls must make sure to not escape the boundary of the super module... I have managed to get now \n\n```\nlrwxrwxrwx 1 yoh datalad  24 Mar 29 10:41 ds000115/.git -> ../.git/modules/ds000115/\nlrwxrwxrwx 1 yoh datalad  36 Mar 31 00:01 ds000116/.git -> ../../openfmri/.git/modules/ds000116/\nlrwxrwxrwx 1 yoh datalad  36 Mar 31 00:01 ds000117/.git -> ../../openfmri/.git/modules/ds000117/\n```\n\nsome of them might have been added with prev revision though, while using abs paths \n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/389/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/389/timeline", "performed_via_github_app": null}