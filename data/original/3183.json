{"url": "https://api.github.com/repos/datalad/datalad/issues/3183", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3183/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3183/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3183/events", "html_url": "https://github.com/datalad/datalad/pull/3183", "id": 415864791, "node_id": "MDExOlB1bGxSZXF1ZXN0MjU3MjYxNTUy", "number": 3183, "title": "RF: Absorb revolution's gitrepo, annexrepo, and dataset", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/56", "html_url": "https://github.com/datalad/datalad/milestone/56", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/56/labels", "id": 3796173, "node_id": "MDk6TWlsZXN0b25lMzc5NjE3Mw==", "number": 56, "title": "Release 0.12.0", "description": "- drop support of direct mode\r\n- potentially bring revolution home fully or in parts", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 61, "state": "closed", "created_at": "2018-11-05T14:12:45Z", "updated_at": "2020-03-12T15:47:48Z", "due_on": "2020-01-11T08:00:00Z", "closed_at": "2020-01-11T16:10:25Z"}, "comments": 5, "created_at": "2019-02-28T23:06:05Z", "updated_at": "2019-03-14T22:30:49Z", "closed_at": "2019-03-02T20:30:22Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/3183", "html_url": "https://github.com/datalad/datalad/pull/3183", "diff_url": "https://github.com/datalad/datalad/pull/3183.diff", "patch_url": "https://github.com/datalad/datalad/pull/3183.patch"}, "body": "I'm proposing this as the initial phase of bringing in changes from datalad-revolution.  While it's still not clear how (or even if) each -revolution interface module will be integrated or adopted in core, we're at a point where we can drop in -revolution's GitRepo, AnnexRepo, and Dataset without an issue.  And on -revolution's side, these classes should be in a stable state, so moving them to core shouldn't be problematic or slow development.\r\n\r\nNote that this PR doesn't prevent or make it harder for us to follow the vision from #2926 and #3076 of incorporating all or at least nearly all of -revolution in the core codebase.\r\n\r\nTo bring in the changes, I took the approach of simply copying over the -revolution methods into the parent classes.  Doing it this way---rather than copying over the -revolution modules and wiring them up to use and live beside \"hidden\" core modules---avoids a lot of the hassle of file renaming, of needing to adjust at least some imports, and of dealing with leakage from the \"hidden\" modules.  But it does assume that these classes will be frozen in -revolution.  It also makes verifying that no unintended changes were dropped from -revolution less straightforward.  Here's the method suggested in 5f156911f:\r\n\r\n```\r\nThis cross-repository movement isn't easy to review, but with\r\ndatalad-revolution checked out to af7f4f05f and located at\r\n$DL_REV_DIR, you can use the following commands to convince yourself\r\nthat nothing important from the revolution is being dropped or\r\nmodified by examining the \"-\" lines in:\r\n\r\n  % git diff --color-moved --no-index -- \\\r\n    $DL_REV_DIR/datalad_revolution/gitrepo.py datalad/support/gitrepo.py\r\n\r\n  % git diff --color-moved --no-index -- \\\r\n    $DL_REV_DIR/datalad_revolution/annexrepo.py datalad/support/annexrepo.py\r\n\r\n  % git diff --color-moved --no-index -- \\\r\n    $DL_REV_DIR/datalad_revolution/dataset.py datalad/distribution/dataset.py\r\n```\r\n\r\nThis PR will be paired with one in datalad-revolution that removes the -revolution classes in favor of the ones added here.\r\n", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3183/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3183/timeline", "performed_via_github_app": null}