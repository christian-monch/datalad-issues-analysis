{"url": "https://api.github.com/repos/datalad/datalad/issues/3946", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3946/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3946/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3946/events", "html_url": "https://github.com/datalad/datalad/issues/3946", "id": 539915436, "node_id": "MDU6SXNzdWU1Mzk5MTU0MzY=", "number": 3946, "title": "create-sibling-github fails when organization is specified", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778590, "node_id": "MDU6TGFiZWw2Mzc3ODU5MA==", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-normal", "name": "severity-normal", "color": "ff8888", "default": false, "description": "standard severity"}], "state": "closed", "locked": false, "assignee": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/73", "html_url": "https://github.com/datalad/datalad/milestone/73", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/73/labels", "id": 5272227, "node_id": "MDk6TWlsZXN0b25lNTI3MjIyNw==", "number": 73, "title": "0.12.6", "description": "", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 15, "state": "closed", "created_at": "2020-04-03T18:47:30Z", "updated_at": "2020-05-13T19:30:07Z", "due_on": null, "closed_at": "2020-05-13T19:30:07Z"}, "comments": 1, "created_at": "2019-12-18T20:47:19Z", "updated_at": "2020-04-23T15:37:23Z", "closed_at": "2020-04-23T15:37:23Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```shell\r\n$> datalad create-sibling-github -s gh-neurodebian --github-organization neurodebian afni-data\r\n[ERROR  ] 401 {'message': 'Bad credentials', 'documentation_url': 'https://developer.github.com/v3'} [Requester.py:__check:286] (BadCredentialsException) \r\n$> datalad --version\r\ndatalad 0.12.0rc6.dev198\r\n\r\n```\r\nworked fine for myself although complained about failed auth using token\r\n```\r\n$> datalad create-sibling-github -s gh-neurodebian afni-data            \r\n[WARNING] Authentication failed using a token. \r\n.: gh-neurodebian(-) [https://github.com/yarikoptic/afni-data.git (git)]\r\n'https://github.com/yarikoptic/afni-data.git' configured as sibling 'gh-neurodebian' for <Dataset path=/home/yoh/deb/gits/pkg-exppsy/afni-data>\r\n```\r\n<details><summary>DataLad 0.12.0rc6.dev198 WTF (configuration, datalad, dataset, dependencies, environment, extensions, git-annex, location, metadata_extractors, python, system)</summary>\r\n\r\n# WTF\r\n## configuration <SENSITIVE, report disabled by configuration>\r\n## datalad \r\n  - full_version: 0.12.0rc6.dev198-g78c29\r\n  - version: 0.12.0rc6.dev198\r\n## dataset \r\n  - id: None\r\n  - metadata: <SENSITIVE, report disabled by configuration>\r\n  - path: /home/yoh/deb/gits/pkg-exppsy/afni-data\r\n  - repo: GitRepo\r\n## dependencies \r\n  - appdirs: 1.4.3\r\n  - boto: 2.49.0\r\n  - cmd:annex: 7.20190819+git2-g908476a9b-1~ndall+1\r\n  - cmd:bundled-git: 2.20.1\r\n  - cmd:git: 2.20.1\r\n  - cmd:system-git: 2.24.0\r\n  - cmd:system-ssh: 8.1p1\r\n  - exifread: 2.1.2\r\n  - git: 3.0.5\r\n  - gitdb: 2.0.6\r\n  - humanize: 0.5.1\r\n  - iso8601: 0.1.11\r\n  - keyring: 18.0.1\r\n  - keyrings.alt: 3.1.1\r\n  - msgpack: 0.5.6\r\n  - mutagen: 1.40.0\r\n  - requests: 2.21.0\r\n  - tqdm: 4.30.0\r\n  - wrapt: 1.11.2\r\n## environment \r\n  - GIT_PAGER: less --no-init --quit-if-one-screen\r\n  - GIT_PYTHON_GIT_EXECUTABLE: /usr/lib/git-annex.linux/git\r\n  - LANG: en_US.UTF-8\r\n  - PATH: /home/yoh/proj/datalad/datalad-master/venvs/dev3/bin:/home/yoh/gocode/bin:/home/yoh/gocode/bin:/home/yoh/bin:/home/yoh/.local/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/sbin:/usr/sbin:/usr/local/sbin\r\n## extensions \r\n## git-annex \r\n  - build flags: \r\n    - Assistant\r\n    - Webapp\r\n    - Pairing\r\n    - S3\r\n    - WebDAV\r\n    - Inotify\r\n    - DBus\r\n    - DesktopNotify\r\n    - TorrentParser\r\n    - MagicMime\r\n    - Feeds\r\n    - Testsuite\r\n  - dependency versions: \r\n    - aws-0.20\r\n    - bloomfilter-2.0.1.0\r\n    - cryptonite-0.25\r\n    - DAV-1.3.3\r\n    - feed-1.0.0.0\r\n    - ghc-8.4.4\r\n    - http-client-0.5.13.1\r\n    - persistent-sqlite-2.8.2\r\n    - torrent-10000.1.1\r\n    - uuid-1.3.13\r\n    - yesod-1.6.0\r\n  - key/value backends: \r\n    - SHA256E\r\n    - SHA256\r\n    - SHA512E\r\n    - SHA512\r\n    - SHA224E\r\n    - SHA224\r\n    - SHA384E\r\n    - SHA384\r\n    - SHA3_256E\r\n    - SHA3_256\r\n    - SHA3_512E\r\n    - SHA3_512\r\n    - SHA3_224E\r\n    - SHA3_224\r\n    - SHA3_384E\r\n    - SHA3_384\r\n    - SKEIN256E\r\n    - SKEIN256\r\n    - SKEIN512E\r\n    - SKEIN512\r\n    - BLAKE2B256E\r\n    - BLAKE2B256\r\n    - BLAKE2B512E\r\n    - BLAKE2B512\r\n    - BLAKE2B160E\r\n    - BLAKE2B160\r\n    - BLAKE2B224E\r\n    - BLAKE2B224\r\n    - BLAKE2B384E\r\n    - BLAKE2B384\r\n    - BLAKE2BP512E\r\n    - BLAKE2BP512\r\n    - BLAKE2S256E\r\n    - BLAKE2S256\r\n    - BLAKE2S160E\r\n    - BLAKE2S160\r\n    - BLAKE2S224E\r\n    - BLAKE2S224\r\n    - BLAKE2SP256E\r\n    - BLAKE2SP256\r\n    - BLAKE2SP224E\r\n    - BLAKE2SP224\r\n    - SHA1E\r\n    - SHA1\r\n    - MD5E\r\n    - MD5\r\n    - WORM\r\n    - URL\r\n  - operating system: linux x86_64\r\n  - remote types: \r\n    - git\r\n    - gcrypt\r\n    - p2p\r\n    - S3\r\n    - bup\r\n    - directory\r\n    - rsync\r\n    - web\r\n    - bittorrent\r\n    - webdav\r\n    - adb\r\n    - tahoe\r\n    - glacier\r\n    - ddar\r\n    - git-lfs\r\n    - hook\r\n    - external\r\n  - supported repository versions: \r\n    - 5\r\n    - 7\r\n  - upgrade supported from repository versions: \r\n    - 0\r\n    - 1\r\n    - 2\r\n    - 3\r\n    - 4\r\n    - 5\r\n    - 6\r\n  - version: 7.20190819+git2-g908476a9b-1~ndall+1\r\n## location \r\n  - path: /home/yoh/deb/gits/pkg-exppsy/afni-data\r\n  - type: dataset\r\n## metadata_extractors \r\n  - annex: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.annex\r\n    - version: None\r\n  - audio: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.audio\r\n    - version: None\r\n  - datacite: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datacite\r\n    - version: None\r\n  - datalad_core: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_core\r\n    - version: None\r\n  - datalad_rfc822: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_rfc822\r\n    - version: None\r\n  - exif: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.exif\r\n    - version: None\r\n  - frictionless_datapackage: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.frictionless_datapackage\r\n    - version: None\r\n  - image: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.image\r\n    - version: None\r\n  - xmp: \r\n    - load_error: No module named 'libxmp' [xmp.py:<module>:20]\r\n    - module: datalad.metadata.extractors.xmp\r\n## python \r\n  - implementation: CPython\r\n  - version: 3.7.5\r\n## system \r\n  - distribution: debian/bullseye/sid\r\n  - encoding: \r\n    - default: utf-8\r\n    - filesystem: utf-8\r\n    - locale.prefered: UTF-8\r\n  - max_path_length: 295\r\n  - name: Linux\r\n  - release: 5.4.0-trunk-amd64\r\n  - type: posix\r\n  - version: #1 SMP Debian 5.4-1~exp1 (2019-11-26)\r\n</details>\r\n\r\nfull traceback\r\n```\r\n$> datalad --dbg create-sibling-github -s gh-neurodebian --github-organization neurodebian afni-data\r\nTraceback (most recent call last):\r\n  File \"/home/yoh/proj/datalad/datalad-master/venvs/dev3/bin/datalad\", line 8, in <module>\r\n    main()\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/cmdline/main.py\", line 525, in main\r\n    ret = cmdlineargs.func(cmdlineargs)\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/interface/base.py\", line 718, in call_from_parser\r\n    ret = cls.__call__(**kwargs)\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/distribution/create_sibling_github.py\", line 200, in __call__\r\n    existing, access_protocol, dryrun)\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/support/github_.py\", line 298, in _make_github_repos\r\n    github_organization):\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/support/github_.py\", line 275, in _gen_github_entity\r\n    yield ses.get_organization(github_organization), cred\r\n  File \"/usr/lib/python3/dist-packages/github/MainClass.py\", line 263, in get_organization\r\n    \"/orgs/\" + login\r\n  File \"/usr/lib/python3/dist-packages/github/Requester.py\", line 275, in requestJsonAndCheck\r\n    return self.__check(*self.requestJson(verb, url, parameters, headers, input, self.__customConnection(url)))\r\n  File \"/usr/lib/python3/dist-packages/github/Requester.py\", line 286, in __check\r\n    raise self.__createException(status, responseHeaders, output)\r\ngithub.GithubException.BadCredentialsException: 401 {'message': 'Bad credentials', 'documentation_url': 'https://developer.github.com/v3'}\r\n\r\n> /usr/lib/python3/dist-packages/github/Requester.py(286)__check()\r\n-> raise self.__createException(status, responseHeaders, output)\r\n```", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3946/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3946/timeline", "performed_via_github_app": null}