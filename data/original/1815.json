{"url": "https://api.github.com/repos/datalad/datalad/issues/1815", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1815/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1815/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1815/events", "html_url": "https://github.com/datalad/datalad/pull/1815", "id": 256360147, "node_id": "MDExOlB1bGxSZXF1ZXN0MTQwMTE3MDU0", "number": 1815, "title": "Make publish -r --since= great again", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/45", "html_url": "https://github.com/datalad/datalad/milestone/45", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/45/labels", "id": 2752976, "node_id": "MDk6TWlsZXN0b25lMjc1Mjk3Ng==", "number": 45, "title": "Release 0.9.0", "description": "", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2017-09-08T13:31:08Z", "updated_at": "2017-09-25T18:54:29Z", "due_on": null, "closed_at": "2017-09-25T18:54:29Z"}, "comments": 7, "created_at": "2017-09-08T20:16:30Z", "updated_at": "2018-07-15T02:24:35Z", "closed_at": "2017-09-19T02:29:57Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/1815", "html_url": "https://github.com/datalad/datalad/pull/1815", "diff_url": "https://github.com/datalad/datalad/pull/1815.diff", "patch_url": "https://github.com/datalad/datalad/pull/1815.patch"}, "body": "Yet another semi-blind fix on top of the previous tiny #1814 (since otherwise couldn't check) making it possible to just `publish -r --since=`.  The last commit is the trickiest since I think I violated some logic of tripple-annotating-and-diffing files whenever I do not care about files, but rather care about publishing changes to entire datasets.  I have changed to report that there is a diff if commits differ, which was the logic if no files were provided.  But the thing is that files were provided, since they were result of the first stage of annotating paths (why would we care about individual files when publishing full datasets?) and were passed below in the logic.\r\n\r\nAnother commit extended API of helpers and the interface to allow to not care about unstaged and not tracked files while annotating paths.  Made use of it in publish, since we can publish only what is committed (so why bother traversing into changes/untracked which aren't?).  Closes #1812  \r\n\r\nUnfortunately only @mih could tell me where I violated anything, and now I am interested to see if tests pass.   I only know that `publish -r --since=` seems to work again.  I will give it a shot again after updating few datasets.\r\n\r\nrelated closed whining: #1495", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1815/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1815/timeline", "performed_via_github_app": null}