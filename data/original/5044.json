{"url": "https://api.github.com/repos/datalad/datalad/issues/5044", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5044/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5044/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5044/events", "html_url": "https://github.com/datalad/datalad/issues/5044", "id": 722334746, "node_id": "MDU6SXNzdWU3MjIzMzQ3NDY=", "number": 5044, "title": "misleading suggestion in the error message - datalad.runtime.use-patool is in fact ignored on windows", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "closed", "locked": false, "assignee": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-10-15T13:25:29Z", "updated_at": "2021-10-05T15:27:36Z", "closed_at": "2021-10-05T15:27:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```python\r\nexternal_versions.check(\r\n    \"cmd:7z\",\r\n    msg='The 7z binary (7-Zip) is required for archive handling, but is missing. '\r\n        \"Setting the config flag 'datalad.runtime.use-patool' enables an \"\r\n        \"alternative implementation that may not need 7z.\")\r\n```\r\nbut that code is reached via\r\n```python\r\n# fall back on patool, if a functional implementation is available\r\n# (i.e. not on windows), it is requested, or 7z is not found\r\nif not on_windows and (\r\n        cfg.obtain(\r\n            'datalad.runtime.use-patool', default=False,\r\n            valtype=anything2bool) or not external_versions['cmd:7z']):\r\n    from datalad.support.archive_utils_patool import (\r\n        decompress_file as _decompress_file,\r\n        # other code expects this to be here\r\n        compress_files\r\n    )\r\nelse:\r\n    from datalad.support.archive_utils_7z import (\r\n        decompress_file as _decompress_file,\r\n        # other code expects this to be here\r\n        compress_files\r\n    )\r\n```\r\nso `on_windows` you can break your knuckles trying to set that config variable and it would have no effect.  IMHO if that variable is explicitly set, it should be warranted.  If not set -- then on_windows or not should be the decision maker", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5044/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5044/timeline", "performed_via_github_app": null}