{"url": "https://api.github.com/repos/datalad/datalad/issues/5993", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5993/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5993/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5993/events", "html_url": "https://github.com/datalad/datalad/issues/5993", "id": 999858301, "node_id": "I_kwDOANZqws47mKB9", "number": 5993, "title": "annex.pidlock could lead to stalling of something", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 132485920, "node_id": "MDU6TGFiZWwxMzI0ODU5MjA=", "url": "https://api.github.com/repos/datalad/datalad/labels/annex", "name": "annex", "color": "0052cc", "default": false, "description": "Git-annex related issue"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-09-18T03:03:16Z", "updated_at": "2021-09-18T03:03:16Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "ran into in the course of https://github.com/datalad/datalad-fuse/pull/3 . Tests were stalling for me and it was due to having `annex.pidlock` set to `true` in my `~/.gitconfig` (I guess I left it while testing something, not really needed). git annex 8.20210903 (debian sid build).  So there is something finicky about pidlock implementation.  \r\n\r\nHere is the process tree while \"stalled\":\r\n```\r\nyoh      1902845  0.0  0.0  16844  8632 pts/14   Ss   Sep08   0:30       zsh\r\nyoh      3008551  3.9  0.1 210560 53444 pts/14   Sl+  23:01   0:01         python -m pytest -v .\r\nyoh      3008564  0.1  0.1 210896 49336 pts/14   Sl+  23:01   0:00           python -m pytest -v .\r\nyoh      3008863  0.0  0.0   7060  3604 pts/14   S+   23:01   0:00           git -c diff.ignoreSubmodules=none annex addurl --relaxed --file=binary.png http://127.0.0.1:37645/binary.png --json --json-error-message\r\nyoh      3008866  0.1  0.1 1074046184 45272 pts/14 Sl+ 23:01   0:00             /usr/bin/git-annex addurl --relaxed --file=binary.png http://127.0.0.1:37645/binary.png --json --json-error-messages --json-progress \r\nyoh      3008875  0.0  0.0   7168  4156 pts/14   S+   23:01   0:00               git --git-dir=.git --work-tree=. --literal-pathspecs -c annex.dotfiles=true cat-file --batch\r\nyoh      3008876  0.0  0.0   7060  3648 pts/14   S+   23:01   0:00               git --git-dir=.git --work-tree=. --literal-pathspecs -c annex.dotfiles=true cat-file --batch-check=%(objectname) %(objecttype) %(obj\r\nyoh      3008879  0.0  0.0   7060  4076 pts/14   S+   23:01   0:00               git --git-dir=.git --work-tree=. -c annex.dotfiles=true check-ignore -z --stdin --verbose --non-matching\r\nyoh      3008880  0.0  0.0   5560   552 pts/14   S+   23:01   0:00               xargs -0 git --git-dir=.git --work-tree=. --literal-pathspecs -c annex.dotfiles=true add -f --\r\nyoh      3008881  0.0  0.0  81968  4316 pts/14   Sl+  23:01   0:00                 git --git-dir=.git --work-tree=. --literal-pathspecs -c annex.dotfiles=true add -f -- binary.png\r\nyoh      3008883  0.0  0.0   2424   576 pts/14   S+   23:01   0:00                   /bin/sh -c git-annex smudge --clean -- '.datalad/.gitattributes' git-annex smudge --clean -- '.datalad/.gitattributes'\r\nyoh      3008884  0.9  0.0 1074046112 25484 pts/14 Sl+ 23:01   0:00                     git-annex smudge --clean -- .datalad/.gitattributes\r\nyoh      3008890  0.0  0.0   7200  4236 pts/14   S+   23:01   0:00                       git --git-dir=.git --work-tree=. --literal-pathspecs cat-file --batch\r\nyoh      3008891  0.0  0.0   7200  4144 pts/14   S+   23:01   0:00                       git --git-dir=.git --work-tree=. --literal-pathspecs cat-file --batch-check=%(objectname) %(objecttype) %(objectsize)\r\n```\r\n\r\nDidn't dig yet deeper", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5993/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5993/timeline", "performed_via_github_app": null}