{"url": "https://api.github.com/repos/datalad/datalad/issues/3987", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3987/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3987/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3987/events", "html_url": "https://github.com/datalad/datalad/pull/3987", "id": 545214892, "node_id": "MDExOlB1bGxSZXF1ZXN0MzU5MTYzMDQx", "number": 3987, "title": "RF: bring common (?) functionality under PathBasedFlyweight", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-01-04T00:20:44Z", "updated_at": "2020-01-08T14:43:33Z", "closed_at": "2020-01-08T14:43:32Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/3987", "html_url": "https://github.com/datalad/datalad/pull/3987", "diff_url": "https://github.com/datalad/datalad/pull/3987.diff", "patch_url": "https://github.com/datalad/datalad/pull/3987.patch"}, "body": "We had to almost identical copies of the code for `_flyweight_id_from_args`.\r\nThat can breed bugs having fixes in one copy but not another.  I have decided\r\nto go superclass subclassing path so we could also \"modularize\" the logic for\r\nhandling aliases (ATM only for the datasets).\r\n    \r\nI have taken implementation from  Dataset, which did not explicitly\r\n\"realpath\" the path.  Not sure yet if such difference in behavior (Dataset vs *Repo)\r\nwas intended/desired, tests might show\r\n\r\n- [x] make sure no notable hit on benchmarks\r\n- [x] decide on that `realpath` handling\r\n- Sits on top of #3986 \r\n- TODO: For the merge in master, conflict resolution should add handling of yet another piece of seems duplicate path handling/conversion:\r\n```diff\r\n+        # mirror what is happening in __init__\r\n+        if isinstance(path, ut.PurePath):\r\n+            path = str(path)\r\n```", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3987/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3987/timeline", "performed_via_github_app": null}