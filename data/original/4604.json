{"url": "https://api.github.com/repos/datalad/datalad/issues/4604", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4604/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4604/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4604/events", "html_url": "https://github.com/datalad/datalad/issues/4604", "id": 630131935, "node_id": "MDU6SXNzdWU2MzAxMzE5MzU=", "number": 4604, "title": "push: yet another round on the interface, but with a new twist", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2020-06-03T16:11:10Z", "updated_at": "2020-06-23T19:54:32Z", "closed_at": "2020-06-23T19:54:32Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Decided to not pollute #4581 or any other prior discussion thus filed separately\r\n\r\nCurrent `--force` options are already non orthogonal (impossible to use `no-datatransfer` and `datatransfer` together).  I think it would be great to reserve `--force` for tune ups to specific git or annex actions (like `gitpush` already and possibly `no-annexfast`  #4603)  while making a dedicated option to define the data transfer mode, and just change the default to follow @mih's desire for the new \"right thing\" behavior (#4551) to copy annexed data by default.  Moreover, while going through such RFing - we gain a chance to align it with git-annex a bit more.\r\n\r\nWhat if we add the same option as `publish` has -- `--transfer-data` with following possible values:\r\n\r\n- (default) \"anything\" -- transfer any file not available on remote\r\n- (previous `publish` behavior) \"nothing\" -- transfer nothing\r\n- \"auto\" -- pass `--auto` to `annex copy` to satisfy \"wanted\" expression for the remote if any, and otherwise transfer nothing (note: it would also respect a possible `numcopies` setting).\r\n\r\n\"anything\" and \"nothing\" from above - are wanted expressions of annex.  Further documentation could point to `--annex-wanted` of `create-siblings` (and may be `siblings` if exposed there) to hint on how it could be tuned to automate.\r\n\r\n`--fast` will be used, and could be removed via `--force` option.\r\n\r\nI do  like an idea of configurable default `push` data transfer behavior discussed in #4581 .\r\n\r\nLater we could expand the list if any additional specific desire, but specific for data transfer, not fusing it into the list of `forces`.\r\n\r\n**Alternative** to `--transfer-data MODE` is to align with current `get` and its `-n|--no-data`, and also introduce `-a|--auto-data`.\r\n\r\nedit1: \"annex-auto\" -> \"auto\", and added `get` inspired alternative", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4604/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4604/timeline", "performed_via_github_app": null}