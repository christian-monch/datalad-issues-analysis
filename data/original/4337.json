{"url": "https://api.github.com/repos/datalad/datalad/issues/4337", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4337/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4337/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4337/events", "html_url": "https://github.com/datalad/datalad/pull/4337", "id": 586854727, "node_id": "MDExOlB1bGxSZXF1ZXN0MzkyOTA1MTQ2", "number": 4337, "title": "RF: Suppress similar repeated messages in the default result renderer", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-03-24T10:29:53Z", "updated_at": "2020-03-26T02:41:18Z", "closed_at": "2020-03-25T08:01:56Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4337", "html_url": "https://github.com/datalad/datalad/pull/4337", "diff_url": "https://github.com/datalad/datalad/pull/4337.diff", "patch_url": "https://github.com/datalad/datalad/pull/4337.patch"}, "body": "Saving a dataset with a 1000 files will now look like this:\r\n\r\n```\r\n% datalad save\r\nadd(ok): 1 (file)\r\n  [999 similar messages have been suppressed]\r\nsave(ok): . (dataset)\r\naction summary:\r\n  add (ok: 1000)\r\n  save (ok: 1)\r\n```\r\n\r\nFailing to get a 1000 files looks like this (with `datalad.log.result-level=debug`)\r\n\r\n```\r\n% datalad get .\r\nTotal (0 ok, 1000 failed out of 1000):   0%|                     | 0.00/3.89k [00:01<?, ?B/s][WARNING] Running get resulted in stderr output: git-annex: get: 1000 failed\r\n\r\n                                                                                             get(error): 1 (file) [Unable to access these remotes: origin; Try making some of these repositories available:;      2cc06516-5731-43a5-88e9-39499f2114e9 -- mih@meiner:/tmp/massive [origin]]\r\n  [999 similar messages have been suppressed]\r\naction summary:\r\n  get (error: 1000)\r\n```\r\n\r\nWithout the config switch, the second example would still produce a\r\nthousand additional log messages, because we still report every error\r\ntwice. I decided to not address this in the logger, because while I can\r\nrelatively safely suppress result rendering based on a handful of result\r\nkeys, it is unclear to me what threshold we would use for the logger.\r\nIn any case, this can be done later by someone who is still suffering\r\nfrom those messages ;-)\r\n\r\nFixes gh-2620 in spirit.", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4337/reactions", "total_count": 1, "+1": 1, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4337/timeline", "performed_via_github_app": null}