{"url": "https://api.github.com/repos/datalad/datalad/issues/4471", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4471/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4471/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4471/events", "html_url": "https://github.com/datalad/datalad/pull/4471", "id": 610149192, "node_id": "MDExOlB1bGxSZXF1ZXN0NDExNjM3OTU1", "number": 4471, "title": "RF: get: Delete custom_result_summary_renderer", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-04-30T15:31:19Z", "updated_at": "2020-05-19T16:57:49Z", "closed_at": "2020-05-02T06:40:12Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4471", "html_url": "https://github.com/datalad/datalad/pull/4471", "diff_url": "https://github.com/datalad/datalad/pull/4471.diff", "patch_url": "https://github.com/datalad/datalad/pull/4471.patch"}, "body": "The custom_result_summary_renderer for get() was added back in\r\nf558ada4dd (NF: Result summary renderer (more or less useful demo in\r\n`get`), 2017-03-21).  At that time, a caller had to specify \"tailored\"\r\nas the output format to see the custom summary output.  As of\r\nb8b282d842 (ENH: enable custom summary result rendering also for\r\ndefault rendering, 2020-03-24), the custom summary is now triggered\r\nfor the default renderer as well.\r\n\r\nHere's an example of the custom summary when get() is called with two\r\nfiles that are already present:\r\n\r\n    Tried to get 2 files that had no content yet. 2 (failed).\r\n    /tmp/dl-SckMiLB/two [file] ... notneeded\r\n    /tmp/dl-SckMiLB/one [file] ... notneeded\r\n\r\nAs pointed out in gh-4455, there are a few problems with this\r\noutput: 1) the files do have content, 2) a \"notneeded\" result should not be\r\ncounted as a failure, and 3) the path reporting goes against the\r\ncurrent convention of reporting relative paths.  In addition, when\r\noperating on a dataset (gh-4429), there's a confusing message about 0\r\nfiles having content.\r\n\r\nTo address these issues, we could either fix the handling in get's\r\ncustom_result_summary_renderer or delete the handler.  (Reverting\r\nb8b282d842 to not call the custom summary renderer by default would\r\nonly hide away the problems again.)  Go with the second option because\r\nit's unlikely that many users were regularly passing '-f tailored' to\r\nsee the custom summary renderer output.  If they were, we probably\r\nwould have seen a report about confusing output.  And even if the\r\nproblems above weren't enough to prompt a report, the duplicated\r\nsummary that has been happening since 0.11.2 (gh-4463) seems unlikely\r\nto have gone unnoticed and unreported, were anyone looking at this\r\noutput.\r\n\r\nCloses #4455.\r\nCc: @adswa\r\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4471/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4471/timeline", "performed_via_github_app": null}