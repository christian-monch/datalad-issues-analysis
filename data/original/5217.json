{"url": "https://api.github.com/repos/datalad/datalad/issues/5217", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5217/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5217/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5217/events", "html_url": "https://github.com/datalad/datalad/issues/5217", "id": 759806005, "node_id": "MDU6SXNzdWU3NTk4MDYwMDU=", "number": 5217, "title": "inheriting config for cloned siblings", "user": {"login": "leej3", "id": 5418152, "node_id": "MDQ6VXNlcjU0MTgxNTI=", "avatar_url": "https://avatars.githubusercontent.com/u/5418152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leej3", "html_url": "https://github.com/leej3", "followers_url": "https://api.github.com/users/leej3/followers", "following_url": "https://api.github.com/users/leej3/following{/other_user}", "gists_url": "https://api.github.com/users/leej3/gists{/gist_id}", "starred_url": "https://api.github.com/users/leej3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leej3/subscriptions", "organizations_url": "https://api.github.com/users/leej3/orgs", "repos_url": "https://api.github.com/users/leej3/repos", "events_url": "https://api.github.com/users/leej3/events{/privacy}", "received_events_url": "https://api.github.com/users/leej3/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2020-12-08T21:46:09Z", "updated_at": "2020-12-11T19:12:16Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "#### What is the problem?\r\nI am attempting to robustly set the configuration for all cloned siblings of a dataset. Specifically I would like something along the lines of the following so that a number of siblings are setup, publish dependencies are specified, pushurl's are configured.\r\n\r\n\r\n<details close>\r\n<summary>Example config</summary>\r\n<br>\r\n\r\n```\r\n[core]\r\n\trepositoryformatversion = 0\r\n\tfilemode = true\r\n\tbare = false\r\n\tlogallrefupdates = true\r\n[remote \"origin\"]\r\n\turl = https://gin.g-node.org/leej3/afni_ci_test_data.git\r\n\tpushurl = git@gin.g-node.org:/leej3/afni_ci_test_data.git\r\n\tfetch = +refs/heads/*:refs/remotes/origin/*\r\n\tannex-uuid = 153f1371-92a4-4738-b770-9acb5221973f\r\n[remote \"github\"]\r\n\turl = https://github.com/afni/afni_ci_test_data.git\r\n\tpushurl = git@github.com:afni/afni_ci_test_data.git\r\n\tfetch = +refs/heads/*:refs/remotes/origin/*\r\n\tannex-ignore = true\r\n[branch \"master\"]\r\n\tremote = origin\r\n\tmerge = refs/heads/master\r\n[filter \"annex\"]\r\n\tsmudge = git-annex smudge -- %f\r\n\tclean = git-annex smudge --clean -- %f\r\n[remote \"afni_ci_test_data\"]\r\n\turl = https://afni.nimh.nih.gov/pub/dist/data/afni_ci_test_data/.git\r\n\tpushurl = afni.nimh.nih.gov:/fraid/pub/dist/data/afni_ci_test_data/.git\r\n\tfetch = +refs/heads/*:refs/remotes/afni_ci_test_data/*\r\n\tannex-bare = false\r\n\tannex-uuid = c1ce38d5-c2ef-48c6-a1f2-e207215d0717\r\n```\r\n</details>\r\n\r\n#### What steps will reproduce the problem?\r\n\r\nI have made an attempt at setting the above configuration by creating entries in [.datalad/config](https://gin.g-node.org/leej3/afni_ci_test_data/src/master/.datalad/config). I was under the impression that this would complement any default configuration in the non-shareable .git/config as described. This is my interpretation of the [handbook](http://handbook.datalad.org/en/latest/basics/101-125-summary.html). I install the dataset using:\r\n\r\n```\r\ndatalad install https://gin.g-node.org/leej3/afni_ci_test_data/\r\n```\r\n\r\nThe result of the above command is a dataset that has a more minimal config:\r\n\r\n<details close>\r\n<summary>.git/config</summary>\r\n<br>\r\n\r\n```\r\n[core]\r\n\trepositoryformatversion = 0\r\n\tfilemode = true\r\n\tbare = false\r\n\tlogallrefupdates = true\r\n[remote \"origin\"]\r\n\turl = https://gin.g-node.org/leej3/afni_ci_test_data/\r\n\tfetch = +refs/heads/*:refs/remotes/origin/*\r\n\tannex-uuid = 153f1371-92a4-4738-b770-9acb5221973f\r\n[branch \"master\"]\r\n\tremote = origin\r\n\tmerge = refs/heads/master\r\n[annex]\r\n\tuuid = 4abd0680-ee69-4f53-9d36-6c5ef030dde3\r\n\tversion = 8\r\n[filter \"annex\"]\r\n\tsmudge = git-annex smudge -- %f\r\n\tclean = git-annex smudge --clean -- %f\r\n[remote \"afni_ci_test_data\"]\r\n\turl = https://afni.nimh.nih.gov/pub/dist/data/afni_ci_test_data/.git\r\n\tfetch = +refs/heads/*:refs/remotes/afni_ci_test_data/*\r\n```\r\n</details>\r\n\r\nBased on subsequent commands (and deleting entries from .git/config) I infer that my .datalad/config entries are ignored.\r\n\r\nAm I missing something? Should this be working? Should I instead write a procedure and post clone hook?\r\n#### What version of DataLad are you using (run `datalad --version`)? On what operating system (consider running `datalad wtf`)?\r\n\r\n\r\n<details close>\r\n<summary>wtf output</summary>\r\n<br>\r\n\r\n```\r\n## configuration <SENSITIVE, report disabled by configuration>\r\n## datalad \r\n  - full_version: 0.13.5\r\n  - version: 0.13.5\r\n## dataset \r\n  - id: 6110ed8c-854e-11e9-99b2-acde48001122\r\n  - metadata: <SENSITIVE, report disabled by configuration>\r\n  - path: /tmp/another/afni_ci_test_data\r\n  - repo: AnnexRepo\r\n## dependencies \r\n  - annexremote: 1.4.3\r\n  - appdirs: 1.4.3\r\n  - boto: 2.49.0\r\n  - cmd:7z: 16.02\r\n  - cmd:annex: 8.20200309-g07fcace\r\n  - cmd:bundled-git: UNKNOWN\r\n  - cmd:git: 2.23.0\r\n  - cmd:system-git: 2.23.0\r\n  - cmd:system-ssh: 7.9p1\r\n  - exifread: 2.1.2\r\n  - git: 3.1.1\r\n  - gitdb: 4.0.4\r\n  - humanize: 2.4.0\r\n  - iso8601: 0.1.12\r\n  - keyring: 21.1.1\r\n  - keyrings.alt: 3.1\r\n  - msgpack: 0.6.1\r\n  - mutagen: 1.41.1\r\n  - requests: 2.22.0\r\n  - tqdm: 4.42.1\r\n  - wrapt: 1.12.1\r\n## environment \r\n  - LANG: en_US.UTF-8\r\n  - LANGUAGE: en_US.UTF-8\r\n  - LC_ADDRESS: en_US.UTF-8\r\n  - LC_ALL: en_US.UTF-8\r\n  - LC_IDENTIFICATION: en_US.UTF-8\r\n  - LC_MEASUREMENT: en_US.UTF-8\r\n  - LC_MONETARY: en_US.UTF-8\r\n  - LC_NAME: en_US.UTF-8\r\n  - LC_NUMERIC: en_US.UTF-8\r\n  - LC_PAPER: en_US.UTF-8\r\n  - LC_TELEPHONE: en_US.UTF-8\r\n  - LC_TIME: en_US.UTF-8\r\n  - PATH: /home/lee/miniconda3/bin:/home/lee/opt/neovim/bin:/home/lee/opt/bin:/usr/local/sbin:/usr/sbin:/sbin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/snap/bin:/home/lee/.fzf/bin\r\n## extensions \r\n## git-annex \r\n  - build flags: \r\n    - Assistant\r\n    - Webapp\r\n    - Pairing\r\n    - S3\r\n    - WebDAV\r\n    - Inotify\r\n    - DBus\r\n    - DesktopNotify\r\n    - TorrentParser\r\n    - MagicMime\r\n    - Feeds\r\n    - Testsuite\r\n  - dependency versions: \r\n    - aws-0.21.1\r\n    - bloomfilter-2.0.1.0\r\n    - cryptonite-0.25\r\n    - DAV-1.3.4\r\n    - feed-1.2.0.1\r\n    - ghc-8.6.5\r\n    - http-client-0.6.4\r\n    - persistent-sqlite-2.9.3\r\n    - torrent-10000.1.1\r\n    - uuid-1.3.13\r\n    - yesod-1.6.0.1\r\n  - key/value backends: \r\n    - SHA256E\r\n    - SHA256\r\n    - SHA512E\r\n    - SHA512\r\n    - SHA224E\r\n    - SHA224\r\n    - SHA384E\r\n    - SHA384\r\n    - SHA3_256E\r\n    - SHA3_256\r\n    - SHA3_512E\r\n    - SHA3_512\r\n    - SHA3_224E\r\n    - SHA3_224\r\n    - SHA3_384E\r\n    - SHA3_384\r\n    - SKEIN256E\r\n    - SKEIN256\r\n    - SKEIN512E\r\n    - SKEIN512\r\n    - BLAKE2B256E\r\n    - BLAKE2B256\r\n    - BLAKE2B512E\r\n    - BLAKE2B512\r\n    - BLAKE2B160E\r\n    - BLAKE2B160\r\n    - BLAKE2B224E\r\n    - BLAKE2B224\r\n    - BLAKE2B384E\r\n    - BLAKE2B384\r\n    - BLAKE2BP512E\r\n    - BLAKE2BP512\r\n    - BLAKE2S256E\r\n    - BLAKE2S256\r\n    - BLAKE2S160E\r\n    - BLAKE2S160\r\n    - BLAKE2S224E\r\n    - BLAKE2S224\r\n    - BLAKE2SP256E\r\n    - BLAKE2SP256\r\n    - BLAKE2SP224E\r\n    - BLAKE2SP224\r\n    - SHA1E\r\n    - SHA1\r\n    - MD5E\r\n    - MD5\r\n    - WORM\r\n    - URL\r\n  - local repository version: 8\r\n  - operating system: linux x86_64\r\n  - remote types: \r\n    - git\r\n    - gcrypt\r\n    - p2p\r\n    - S3\r\n    - bup\r\n    - directory\r\n    - rsync\r\n    - web\r\n    - bittorrent\r\n    - webdav\r\n    - adb\r\n    - tahoe\r\n    - glacier\r\n    - ddar\r\n    - git-lfs\r\n    - hook\r\n    - external\r\n  - supported repository versions: \r\n    - 8\r\n  - upgrade supported from repository versions: \r\n    - 0\r\n    - 1\r\n    - 2\r\n    - 3\r\n    - 4\r\n    - 5\r\n    - 6\r\n    - 7\r\n  - version: 8.20200309-g07fcace\r\n## location \r\n  - path: /tmp/another/afni_ci_test_data\r\n  - type: dataset\r\n## metadata_extractors \r\n  - annex: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.annex\r\n    - version: None\r\n  - audio: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.audio\r\n    - version: None\r\n  - datacite: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datacite\r\n    - version: None\r\n  - datalad_core: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_core\r\n    - version: None\r\n  - datalad_rfc822: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_rfc822\r\n    - version: None\r\n  - exif: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.exif\r\n    - version: None\r\n  - frictionless_datapackage: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.frictionless_datapackage\r\n    - version: None\r\n  - image: \r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.image\r\n    - version: None\r\n  - xmp: \r\n    - load_error: No module named 'libxmp' [xmp.py:<module>:20]\r\n    - module: datalad.metadata.extractors.xmp\r\n## python \r\n  - implementation: CPython\r\n  - version: 3.7.6\r\n## system \r\n  - distribution: debian/buster/sid\r\n  - encoding: \r\n    - default: utf-8\r\n    - filesystem: utf-8\r\n    - locale.prefered: UTF-8\r\n  - max_path_length: 286\r\n  - name: Linux\r\n  - release: 4.19.0-12-amd64\r\n  - type: posix\r\n  - version: #1 SMP Debian 4.19.152-1 (2020-10-18\r\n```\r\n</details>\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5217/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5217/timeline", "performed_via_github_app": null}