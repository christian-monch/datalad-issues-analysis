{"url": "https://api.github.com/repos/datalad/datalad/issues/5936", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5936/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5936/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5936/events", "html_url": "https://github.com/datalad/datalad/pull/5936", "id": 980602863, "node_id": "MDExOlB1bGxSZXF1ZXN0NzIwODA5ODI4", "number": 5936, "title": "BF(UX): do not keep logging ERROR possibly present in progress records", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1746781627, "node_id": "MDU6TGFiZWwxNzQ2NzgxNjI3", "url": "https://api.github.com/repos/datalad/datalad/labels/merge-if-ok", "name": "merge-if-ok", "color": "fbca04", "default": false, "description": "OP considers this work done, and requests review/merge"}, {"id": 3049454433, "node_id": "MDU6TGFiZWwzMDQ5NDU0NDMz", "url": "https://api.github.com/repos/datalad/datalad/labels/patch", "name": "patch", "color": "870048", "default": false, "description": "Increment the patch version when merged"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/88", "html_url": "https://github.com/datalad/datalad/milestone/88", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/88/labels", "id": 7035554, "node_id": "MI_kwDOANZqws4Aa1qi", "number": 88, "title": "0.14.8", "description": null, "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2021-08-05T15:26:32Z", "updated_at": "2021-09-10T14:21:07Z", "due_on": null, "closed_at": "2021-09-10T14:21:07Z"}, "comments": 3, "created_at": "2021-08-26T20:09:25Z", "updated_at": "2021-10-08T14:12:52Z", "closed_at": "2021-09-10T14:18:57Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5936", "html_url": "https://github.com/datalad/datalad/pull/5936", "diff_url": "https://github.com/datalad/datalad/pull/5936.diff", "patch_url": "https://github.com/datalad/datalad/pull/5936.patch"}, "body": "Initially observed while giving a live demo (kheh kheh -- always the best time\r\nto find bugs) on DANDI datasets such as\r\nhttp://github.com/dandisets/000029, e.g.:\r\n\r\n\t(git-annex)lena:/tmp/000029[tags/0.210806.2112^0]git\r\n\t$> datalad get sub-anm36996*\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\t[ERROR  ]   download failed: Not Found\r\n\tTotal:   0%|                                                             | 0.00/20.7M [00:12<?, ? Bytes/s]\r\n\tGet sub-anm369964/sub-anm .. 9964_behavior+ecephys.nwb:  41%|\u2588\u258b  | 3.11M/7.66M [00:10<00:15, 295k Bytes/s]\r\n\r\nwhich is due to the fact that the first URL in git-annex for the files is\r\nno longer available, so annex falls to the second available URL, but it keeps\r\nrepeating the same list error-messages in its --json-error-messages:\r\n\r\n\t$> 'git' 'annex' 'get' '--json' '--json-error-messages' '--json-progress' '-c' 'annex.dotfiles=true' '--' 'sub-anm369962/sub-anm369962_behavior+ecephys.nwb'\r\n\t{\"byte-progress\":4989429,\"action\":{\"command\":\"get\",\"note\":\"from web...\",\"input\":[\"sub-anm369962/sub-anm369962_behavior+ecephys.nwb\"],\"key\":\"SHA256E-s6644036--d01c43576e3aeceed53a052defa8bbbf15b885146f518acf63d228cee44576ac.nwb\",\"error-messages\":[\"  download failed: Not Found\"],\"file\":\"sub-anm369962/sub-anm369962_behavior+ecephys.nwb\"},\"total-size\":6644036,\"percent-progress\":\"75.1%\"}\r\n\t{\"byte-progress\":5546485,\"action\":{\"command\":\"get\",\"note\":\"from web...\",\"input\":[\"sub-anm369962/sub-anm369962_behavior+ecephys.nwb\"],\"key\":\"SHA256E-s6644036--d01c43576e3aeceed53a052defa8bbbf15b885146f518acf63d228cee44576ac.nwb\",\"error-messages\":[\"  download failed: Not Found\"],\"file\":\"sub-anm369962/sub-anm369962_behavior+ecephys.nwb\"},\"total-size\":6644036,\"percent-progress\":\"83.48%\"}\r\n    ...\r\n\t{\"byte-progress\":6451701,\"action\":{\"command\":\"get\",\"note\":\"from web...\",\"input\":[\"sub-anm369962/sub-anm369962_behavior+ecephys.nwb\"],\"key\":\"SHA256E-s6644036--d01c43576e3aeceed53a052defa8bbbf15b885146f518acf63d228cee44576ac.nwb\",\"error-messages\":[\"  download failed: Not Found\"],\"file\":\"sub-anm369962/sub-anm369962_behavior+ecephys.nwb\"},\"total-size\":6644036,\"percent-progress\":\"97.11%\"}\r\n\t{\"command\":\"get\",\"note\":\"from web...\\nchecksum...\",\"success\":true,\"input\":[\"sub-anm369962/sub-anm369962_behavior+ecephys.nwb\"],\"key\":\"SHA256E-s6644036--d01c43576e3aeceed53a052defa8bbbf15b885146f518acf63d228cee44576ac.nwb\",\"error-messages\":[\"  download failed: Not Found\"],\"file\":\"sub-anm369962/sub-anm369962_behavior+ecephys.nwb\"}\r\n\r\nNot sure yet if there could be a json record from annex which would have\r\n\"action\" but without byte-progress reporting, so decided to just condition on\r\nit being not a progress report for logging an error (work @mih is doing might\r\neventually remove all those ERROR logs anyways).  With this patch we would just\r\nget the cleaner\r\n\r\n\t$> datalad get sub-anm369962/sub-anm369962_behavior+ecephys.nwb\r\n\tget(ok): sub-anm369962/sub-anm369962_behavior+ecephys.nwb (file) [download failed: Not Found]\r\n\r\nwhere this non-consequential/non-informative and possibly confusing to the user\r\nerror is reported, but how could we address that (e.g. not report any errors if\r\ncommand eventually succedeed?) is a separate question.\r\n\r\nPS. relevant issues in dandisets, which whenever addressed would eliminate this\r\nproblem, and thus would cause this issue to not reproduce using aforementioned\r\ncommands:\r\n\r\n- https://github.com/dandi/dandisets/issues/78\r\n- https://github.com/dandi/dandisets/issues/79\r\n\r\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5936/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5936/timeline", "performed_via_github_app": null}