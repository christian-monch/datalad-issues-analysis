{"url": "https://api.github.com/repos/datalad/datalad/issues/488", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/488/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/488/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/488/events", "html_url": "https://github.com/datalad/datalad/issues/488", "id": 157688758, "node_id": "MDU6SXNzdWUxNTc2ODg3NTg=", "number": 488, "title": "datalad install (without /.git suffix) is still scary due to seems to be different behavior of two calls", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778590, "node_id": "MDU6TGFiZWw2Mzc3ODU5MA==", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-normal", "name": "severity-normal", "color": "ff8888", "default": false, "description": "standard severity"}], "state": "closed", "locked": false, "assignee": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/24", "html_url": "https://github.com/datalad/datalad/milestone/24", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/24/labels", "id": 1779827, "node_id": "MDk6TWlsZXN0b25lMTc3OTgyNw==", "number": 24, "title": "Release 0.2.1", "description": "Provide necessary fixes to make 0.2 usable for `datalad install`", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 18, "state": "closed", "created_at": "2016-05-20T22:41:15Z", "updated_at": "2016-06-11T03:57:03Z", "due_on": "2016-06-10T07:00:00Z", "closed_at": "2016-06-11T03:55:13Z"}, "comments": 3, "created_at": "2016-05-31T14:41:21Z", "updated_at": "2016-06-09T17:36:38Z", "closed_at": "2016-06-09T17:36:38Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#452 addressed the initial scary messages being printed out while sensing for `.git`.  But now I run into this interesting behavior that specifying url without `.git/` seems to do MORE to the actual clone than if with explicit `.git/` and spitting out more of scary messages:\n\nso  with explicit .git -- it is all nice and dandy:\n\n``` shell\n$> datalad install -l debug http://datasets.datalad.org/openfmri/.git\n2016-05-31 10:34:00,603 [DEBUG  ] Installation attempt started (install.py:290)\n2016-05-31 10:34:00,604 [DEBUG  ] Single argument given to install and no dataset found. Assuming the argument identifies a source location. (install.py:350)\n2016-05-31 10:34:00,604 [DEBUG  ] Resolved installation target: None (install.py:355)\n2016-05-31 10:34:00,604 [DEBUG  ] Neither dataset not target installation path provided. Assuming installation of a remote dataset. Deriving destination path from given source http://datasets.datalad.org/openfmri/.git (install.py:364)\n2016-05-31 10:34:00,604 [INFO   ] Installing <Dataset path=/tmp/openfmri> (install.py:375)\n1 installed item is available at\n<Dataset path=/tmp/openfmri>\n```\n\nRemoving it and now doing install without explicit `.git/` and without `--debug` just to show the scary msg:\n\n``` shell\n$> rm -rf openfmri\n\n$> datalad install  http://datasets.datalad.org/openfmri/      \n2016-05-31 10:37:13,716 [INFO   ] Installing <Dataset path=/tmp/openfmri> (install.py:375)\n2016-05-31 10:37:13,780 [INFO   ] Creating a new git repo at /tmp/openfmri (install.py:654)\n2016-05-31 10:37:13,807 [INFO   ] Initializing annex repo at /tmp/openfmri (install.py:658)\n2016-05-31 10:37:14,004 [ERROR  ] stderr| Failed to get annex.uuid configuration of repository origin\n| Instead, got: \"core.repositoryformatversion\\n0\\NULcore.filemode\\ntrue\\NULcore.bare\\nfalse\\NULcore.logallrefupdates\\ntrue\\NULcore.sharedrepository\\n2\\NULreceive.denynonfastforwards\\ntrue\\NULreceive.denycurrentbranch\\nupdateInstead\\NULsubmodule.ds000001.url\\n/srv/datasets.datalad.org/www/openfmri/ds000001\\NULsubmodule.ds000002.url\\n/srv/datasets.datalad.org/www/openfmri/ds000002\\NULsubmodule.ds000003.url\\n/srv/datasets.datalad.org/www/openfmri/ds000003\\NULsubmodule.ds000005.url\\n/srv/datasets.datalad.org/www/openfmri/ds000005\\NULsubmodule.ds000006.url\\n/srv/datasets.datalad.org/www/openfmri/ds000006\\NULsubmodule.ds000007.url\\n/srv/datasets.datalad.org/www/openfmri/ds000007\\NULsubmodule.ds000008.url\\n/srv/datasets.datalad.org/www/openfmri/ds000008\\NULsubmodule.ds000009.url\\n/srv/datasets.datalad.org/www/openfmri/ds000009\\NULsubmodule.ds000011.url\\n/srv/datasets.datalad.org/www/openfmri/ds000011\\NULsubmodule.ds000017.url\\n/srv/datasets.datalad.org/www/openfmri/ds000017\\NULsubmodule.ds000030.url\\n/srv/datasets.datalad.org/www/openfmri/ds000030\\NULsubmodule.ds000031.url\\n/srv/datasets.datalad.org/www/openfmri/ds000031\\NULsubmodule.ds000051.url\\n/srv/datasets.datalad.org/www/openfmri/ds000051\\NULsubmodule.ds000052.url\\n/srv/datasets.datalad.org/www/openfmri/ds000052\\NULsubmodule.ds000053.url\\n/srv/datasets.datalad.org/www/openfmri/ds000053\\NULsubmodule.ds000101.url\\n/srv/datasets.datalad.org/www/openfmri/ds000101\\NULsubmodule.ds000102.url\\n/srv/datasets.datalad.org/www/openfmri/ds000102\\NULsubmodule.ds000105.url\\n/srv/datasets.datalad.org/www/openfmri/ds000105\\NULsubmodule.ds000107.url\\n/srv/datasets.datalad.org/www/openfmri/ds000107\\NULsubmodule.ds000108.url\\n/srv/datasets.datalad.org/www/openfmri/ds000108\\NULsubmodule.ds000109.url\\n/srv/datasets.datalad.org/www/openfmri/ds000109\\NULsubmodule.ds000110.url\\n/srv/datasets.datalad.org/www/openfmri/ds000110\\NULsubmodule.ds000113.url\\n/srv/datasets.datalad.org/www/openfmri/ds000113\\NULsubmodule.ds000113b.url\\n/srv/datasets.datalad.org/www/openfmri/ds000113b\\NULsubmodule.ds000113d.url\\n/srv/datasets.datalad.org/www/openfmri/ds000113d\\NULsubmodule.ds000114.url\\n/srv/datasets.datalad.org/www/openfmri/ds000114\\NULsubmodule.ds000115.url\\n/srv/datasets.datalad.org/www/openfmri/ds000115\\NULsubmodule.ds000116.url\\n/srv/datasets.datalad.org/www/openfmri/ds000116\\NULsubmodule.ds000117.url\\n/srv/datasets.datalad.org/www/openfmri/ds000117\\NULsubmodule.ds000119.url\\n/srv/datasets.datalad.org/www/openfmri/ds000119\\NULsubmodule.ds000120.url\\n/srv/datasets.datalad.org/www/openfmri/ds000120\\NULsubmodule.ds000121.url\\n/srv/datasets.datalad.org/www/openfmri/ds000121\\NULsubmodule.ds000140.url\\n/srv/datasets.datalad.org/www/openfmri/ds000140\\NULsubmodule.ds000148.url\\n/srv/datasets.datalad.org/www/openfmri/ds000148\\NULsubmodule.ds000149.url\\n/srv/datasets.datalad.org/www/openfmri/ds000149\\NULsubmodule.ds000158.url\\n/srv/datasets.datalad.org/www/openfmri/ds000158\\NULsubmodule.ds000170.url\\n/srv/datasets.datalad.org/www/openfmri/ds000170\\NULsubmodule.ds000172.url\\n/srv/datasets.datalad.org/www/openfmri/ds000172\\NULsubmodule.ds000200.url\\n/srv/datasets.datalad.org/www/openfmri/ds000200\\NULsubmodule.ds000202.url\\n/srv/datasets.datalad.org/www/openfmri/ds000202\\NUL\"\n| This is unexpected; please check the network transport! (cmd.py:351)\n1 installed item is available at\n<Dataset path=/tmp/openfmri>\n```\n\nSo here is the one with `--debug` so you could see all kinds of interesting stuff happening (e.g. \"Creating a new git repo at /tmp/openfmri\"):\n\n``` shell\n$> rm -rf openfmri\n\n$> datalad install -l debug http://datasets.datalad.org/openfmri/    \n2016-05-31 10:36:35,229 [DEBUG  ] Installation attempt started (install.py:290)\n2016-05-31 10:36:35,229 [DEBUG  ] Single argument given to install and no dataset found. Assuming the argument identifies a source location. (install.py:350)\n2016-05-31 10:36:35,229 [DEBUG  ] Resolved installation target: None (install.py:355)\n2016-05-31 10:36:35,229 [DEBUG  ] Neither dataset not target installation path provided. Assuming installation of a remote dataset. Deriving destination path from given source http://datasets.datalad.org/openfmri/ (install.py:364)\n2016-05-31 10:36:35,229 [INFO   ] Installing <Dataset path=/tmp/openfmri> (install.py:375)\n2016-05-31 10:36:35,289 [DEBUG  ] Cannot retrieve from URL: http://datasets.datalad.org/openfmri/ (install.py:385)\n2016-05-31 10:36:35,289 [DEBUG  ] Attempt to retrieve from URL: http://datasets.datalad.org/openfmri/.git (install.py:389)\n2016-05-31 10:36:35,289 [INFO   ] Creating a new git repo at /tmp/openfmri (install.py:654)\n2016-05-31 10:36:35,289 [DEBUG  ] Git clone from http://datasets.datalad.org/openfmri/.git to /tmp/openfmri (gitrepo.py:315)\n2016-05-31 10:36:35,318 [DEBUG  ] Git clone completed (gitrepo.py:317)\n2016-05-31 10:36:35,318 [DEBUG  ] Using existing Git repository at /tmp/openfmri (gitrepo.py:342)\n2016-05-31 10:36:35,319 [DEBUG  ] Using existing Git repository at /tmp/openfmri (gitrepo.py:342)\n2016-05-31 10:36:35,319 [INFO   ] Initializing annex repo at /tmp/openfmri (install.py:658)\n2016-05-31 10:36:35,319 [DEBUG  ] Using existing Git repository at /tmp/openfmri (gitrepo.py:342)\n2016-05-31 10:36:35,320 [DEBUG  ] Annex repository was not yet initialized at /tmp/openfmri. Initializing ... (annexrepo.py:160)\n2016-05-31 10:36:35,320 [DEBUG  ] Running: ['git', '-c', 'receive.autogc=0', '-c', 'gc.auto=0', 'annex', 'init', '--debug'] (cmd.py:351)\n2016-05-31 10:36:35,520 [DEBUG  ] stdout| init  (merging origin/git-annex into git-annex...)\n| (recording state in git...)\n| \n| \n| \n| ok\n| (recording state in git...) (cmd.py:351)\n2016-05-31 10:36:35,520 [ERROR  ] stderr| [2016-05-31 10:36:35.362788] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"show-ref\",\"--hash\",\"refs/heads/git-annex\"]\n```\n\nConfirmed both with current master (0.2-48-g4718946) and PR #477 (which did implement \"correct\" `.git/` directory structure -- yeay)\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/488/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/488/timeline", "performed_via_github_app": null}