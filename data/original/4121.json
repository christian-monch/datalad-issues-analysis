{"url": "https://api.github.com/repos/datalad/datalad/issues/4121", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4121/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4121/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4121/events", "html_url": "https://github.com/datalad/datalad/pull/4121", "id": 561499187, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyMjk4MTgz", "number": 4121, "title": "ENH: Enable interactive commit message entry", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778592, "node_id": "MDU6TGFiZWw2Mzc3ODU5Mg==", "url": "https://api.github.com/repos/datalad/datalad/labels/enhancement", "name": "enhancement", "color": "0052cc", "default": true, "description": ""}, {"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 1453907298, "node_id": "MDU6TGFiZWwxNDUzOTA3Mjk4", "url": "https://api.github.com/repos/datalad/datalad/labels/stale-PR-closed-without-merge", "name": "stale-PR-closed-without-merge", "color": "ffffff", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/65", "html_url": "https://github.com/datalad/datalad/milestone/65", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/65/labels", "id": 4992705, "node_id": "MDk6TWlsZXN0b25lNDk5MjcwNQ==", "number": 65, "title": "0.12.x", "description": null, "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2020-01-09T22:01:43Z", "updated_at": "2021-01-06T14:55:51Z", "due_on": null, "closed_at": "2021-01-06T14:55:51Z"}, "comments": 7, "created_at": "2020-02-07T08:47:47Z", "updated_at": "2020-02-16T13:57:14Z", "closed_at": "2020-02-16T13:36:34Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4121", "html_url": "https://github.com/datalad/datalad/pull/4121", "diff_url": "https://github.com/datalad/datalad/pull/4121.diff", "patch_url": "https://github.com/datalad/datalad/pull/4121.patch"}, "body": "The lack of the ability to specify commit messages interactively\r\n(like Git does by default) is a major usability issue when detailed\r\ncommit messages are desired (also see gh-3236).\r\n\r\nThis resurrects gh-3101 using a different and more comprehensive\r\napproach, based on the new WitlessRunner.\r\n\r\nUltimately, this would be a basis for a move towards a more\r\ncomprehensive message handling\r\n(see https://github.com/datalad/datalad-revolution/pull/71).\r\n\r\nChange summary:\r\n- a config switch `datalad.save.no-message` is introduced to decides\r\n  how to behave, when a commit is attempted, but no message is provided\r\n  - 'generic': maintain previous behavior and use a generic message\r\n  - 'allow': make a commit without a message\r\n  - 'interactive' : Let Git figure it out, using its default behavior\r\n- the tests are set up to use 'generic' to maintain non-interactive\r\n  behavior.\r\n- `GitRepo.commit()` is rewritten to use `WitlessRunner` while\r\n  maintaining API and behavior for all previously supported modes of\r\n  operations.\r\n- An additional `commit --dry-run` is used to preempt errors, but only\r\n  in interactive mode, when no message was given -- when performance\r\n  is a non-issue anyway.\r\n\r\nfixes gh-3103\r\n\r\nTODO\r\n\r\n- [ ] splitting of long file lists\r\n- [ ] splitting of long file lists might yield multiple commits, where messages would need to be typed\r\n       interactively. Consider switching to the model:\r\n    - make any number of commits with an empty message\r\n    - squash commit series into a single commit\r\n    - amend with message", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4121/reactions", "total_count": 1, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 1, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4121/timeline", "performed_via_github_app": null}