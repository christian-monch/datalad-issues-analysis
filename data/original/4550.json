{"url": "https://api.github.com/repos/datalad/datalad/issues/4550", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4550/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4550/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4550/events", "html_url": "https://github.com/datalad/datalad/issues/4550", "id": 619738499, "node_id": "MDU6SXNzdWU2MTk3Mzg0OTk=", "number": 4550, "title": "When should `push` (NOT) add `--auto` to `git-annex copy`?", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778594, "node_id": "MDU6TGFiZWw2Mzc3ODU5NA==", "url": "https://api.github.com/repos/datalad/datalad/labels/question", "name": "question", "color": "fbca04", "default": true, "description": "Issue asks a question rather than reporting a problem"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2020-05-17T15:55:14Z", "updated_at": "2020-06-06T07:33:04Z", "closed_at": "2020-06-06T07:33:04Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "In https://github.com/datalad/datalad/pull/4541#issuecomment-629589141 I proposed that `--auto` should always be used, unless there is counter-evidence. This is a departure from what `publish` does (add `--auto` if `wanted` is set; https://github.com/datalad/datalad/pull/4541#issuecomment-629479069), and what `push` currently does (`not to_transfer and force not in ('all', 'datatransfer')`, which is problematic #4483, and doesn't make much sense in general).\r\n\r\n@kyleam pointed out that `numcopies=1` has the potential to shoot us in the foot, if we do say `--auto` by default (https://github.com/datalad/datalad/pull/4541#issuecomment-629689667). `numcopies=1` is actually the default, and worse, it could be set on a per-file level. For this reason, it is not advisable to adopt the behavior of `publish`.\r\n\r\nIt felt attractive to me to say that a precondition for adding `--auto` internally is the absence of a `path` argument (a way of saying \"you go figure it out\"), but that would imply that any subselection of subdatasets to publish would not be possible. For my workflows this has negligible impact (if any), because hierarchies are typically shallow and homogeneous (subdatasets are either technical means of splitting a bigger monorepo, or all subdatasets are \"data dependencies\"/input). However, @yarikoptic's workflows might be completely different and may involve deep heterogeneous dataset hierarchies.\r\n\r\nThe more I think about it, the more attractive https://github.com/datalad/datalad/pull/4541 becomes, which made adding `--auto` explicit (ignoring the implementation details for now).\r\n\r\nI am also still pondering the idea set add `--auto` unconditionally, and combine it with `numcopies=2` for the runtime of `push`. If one calls `push` they clearly want to transfer information. However, that may cause undesired interactions with tailored wanted expressions where file content might be copied without a desire to have that done. But this part is still too fuzzy to me.\r\n\r\nIn any case the test included in #4541 should be salvaged (thx @kyleam )", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4550/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4550/timeline", "performed_via_github_app": null}