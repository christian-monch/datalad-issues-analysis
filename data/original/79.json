{"url": "https://api.github.com/repos/datalad/datalad/issues/79", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/79/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/79/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/79/events", "html_url": "https://github.com/datalad/datalad/issues/79", "id": 64054609, "node_id": "MDU6SXNzdWU2NDA1NDYwOQ==", "number": 79, "title": "OSX & git-annex:  fails to addurl empty files: getFileStatus: does not exist (No such file or directory)", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 132485920, "node_id": "MDU6TGFiZWwxMzI0ODU5MjA=", "url": "https://api.github.com/repos/datalad/datalad/labels/annex", "name": "annex", "color": "0052cc", "default": false, "description": "Git-annex related issue"}, {"id": 191508346, "node_id": "MDU6TGFiZWwxOTE1MDgzNDY=", "url": "https://api.github.com/repos/datalad/datalad/labels/platform-osx", "name": "platform-osx", "color": "0052cc", "default": false, "description": "Issue concerned with MacOSX"}, {"id": 192403870, "node_id": "MDU6TGFiZWwxOTI0MDM4NzA=", "url": "https://api.github.com/repos/datalad/datalad/labels/external-tools", "name": "external-tools", "color": "0052cc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": {"login": "joeyh", "id": 16392, "node_id": "MDQ6VXNlcjE2Mzky", "avatar_url": "https://avatars.githubusercontent.com/u/16392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joeyh", "html_url": "https://github.com/joeyh", "followers_url": "https://api.github.com/users/joeyh/followers", "following_url": "https://api.github.com/users/joeyh/following{/other_user}", "gists_url": "https://api.github.com/users/joeyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/joeyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joeyh/subscriptions", "organizations_url": "https://api.github.com/users/joeyh/orgs", "repos_url": "https://api.github.com/users/joeyh/repos", "events_url": "https://api.github.com/users/joeyh/events{/privacy}", "received_events_url": "https://api.github.com/users/joeyh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "joeyh", "id": 16392, "node_id": "MDQ6VXNlcjE2Mzky", "avatar_url": "https://avatars.githubusercontent.com/u/16392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joeyh", "html_url": "https://github.com/joeyh", "followers_url": "https://api.github.com/users/joeyh/followers", "following_url": "https://api.github.com/users/joeyh/following{/other_user}", "gists_url": "https://api.github.com/users/joeyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/joeyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joeyh/subscriptions", "organizations_url": "https://api.github.com/users/joeyh/orgs", "repos_url": "https://api.github.com/users/joeyh/repos", "events_url": "https://api.github.com/users/joeyh/events{/privacy}", "received_events_url": "https://api.github.com/users/joeyh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2015-03-24T17:32:22Z", "updated_at": "2015-03-27T15:55:00Z", "closed_at": "2015-03-27T15:55:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "uff... first we thought it is just a matter of obscure filename which we have used in that test:  `\\\"';a&b&cd `|`  but it fails similarly in simpler cases as well.  Here is a full trace which lead to failing\n\n`['git', 'annex', 'addurl', '-c', 'annex.alwayscommit=false', '--debug', '--file', '2/d/1d', 'http://localhost:8302/.tmp-page2annex-SIDRg3/2/d/1d']`\n\nwhich seems to be all \"kosher\":\n\n```\n2015-03-24 13:26:06,905 [INFO   ] Annexing (mode=download) /var/folders/90/vkz4dwlx0ss72djd8hywgppc0000gp/T/tmpmlUvNC//2/d/1d originating from url=http://localhost:8302/.tmp-page2annex-SIDRg3/2/d/1d present locally under /var/folders/90/vkz4dwlx0ss72djd8hywgppc0000gp/T/tmptLhRMA//2/d/1d (repos.py:199)\n2015-03-24 13:26:06,915 [DEBUG  ] Hardlinking /var/folders/90/vkz4dwlx0ss72djd8hywgppc0000gp/T/tmptLhRMA/2/d/1d under /var/folders/90/vkz4dwlx0ss72djd8hywgppc0000gp/T/tmpmlUvNC/2/d/1d (cmd.py:256)\n2015-03-24 13:26:07,048 [DEBUG  ] Running: ['git', 'annex', 'addurl', '-c', 'annex.alwayscommit=false', '--debug', '--file', '2/d/1d', 'http://localhost:8302/.tmp-page2annex-SIDRg3/2/d/1d'] (cmd.py:237)\n2015-03-24 13:26:07,239 [DEBUG  ] HTTP: \"HEAD /.tmp-page2annex-SIDRg3/2/d/1d HTTP/1.1\" 200 - (utils.py:165)\n2015-03-24 13:26:07,278 [DEBUG  ] HTTP: \"GET /.tmp-page2annex-SIDRg3/2/d/1d HTTP/1.1\" 200 - (utils.py:165)\n2015-03-24 13:26:07,290 [DEBUG  ] stdout| addurl 2/d/1d (downloading http://localhost:8302/.tmp-page2annex-SIDRg3/2/d/1d ...) \n| \n| failed (cmd.py:237)\n2015-03-24 13:26:07,290 [ERROR  ] stderr| [2015-03-24 13:26:07 EDT] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"-c\",\"annex.alwayscommit=false\",\"show-ref\",\"git-annex\"]\n| [2015-03-24 13:26:07 EDT] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"-c\",\"annex.alwayscommit=false\",\"show-ref\",\"--hash\",\"refs/heads/git-annex\"]\n| [2015-03-24 13:26:07 EDT] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"-c\",\"annex.alwayscommit=false\",\"log\",\"refs/heads/git-annex..71d65c58fceef000fb39693413ecb35aef63c87c\",\"-n1\",\"--pretty=%H\"]\n| [2015-03-24 13:26:07 EDT] chat: git [\"--git-dir=.git\",\"--work-tree=.\",\"-c\",\"annex.alwayscommit=false\",\"cat-file\",\"--batch\"]\n| [2015-03-24 13:26:07 EDT] read: quvi [\"--version\"]\n| [2015-03-24 13:26:07 EDT] call: curl [\"-f\",\"-L\",\"-C\",\"-\",\"-#\",\"-o\",\".git/annex/tmp/URL-s0--http&c%%localhost&c8302%.tmp-page2annex-SIDRg3%2%d%1d\",\"http://localhost:8302/.tmp-page2annex-SIDRg3/2/d/1d\",\"--user-agent\",\"git-annex/5.20150322-gb17566d\"]\n| \n| [2015-03-24 13:26:07 EDT] chat: git [\"--git-dir=.git\",\"--work-tree=.\",\"-c\",\"annex.alwayscommit=false\",\"check-attr\",\"-z\",\"--stdin\",\"annex.backend\",\"annex.numcopies\",\"--\"]\n| [2015-03-24 13:26:07 EDT] read: git [\"--version\"]\n| git-annex: .git/annex/tmp/URL-s0--http&c%%localhost&c8302%.tmp-page2annex-SIDRg3%2%d%1d: getFileStatus: does not exist (No such file or directory)\n| git-annex: addurl: 1 failed (cmd.py:237)\n2015-03-24 13:26:07,291 [ERROR  ] Failed to run ['git', 'annex', 'addurl', '-c', 'annex.alwayscommit=false', '--debug', '--file', '2/d/1d', 'http://localhost:8302/.tmp-page2annex-SIDRg3/2/d/1d'] under '/var/folders/90/vkz4dwlx0ss72djd8hywgppc0000gp/T/tmpmlUvNC'. Exit code=1 (cmd.py:200)\n```\n\n@joeyh -- any ideas on WTF with this OSX?  git annex is fresh:   5.20150322-gb17566d\n\nto repl\n", "closed_by": {"login": "joeyh", "id": 16392, "node_id": "MDQ6VXNlcjE2Mzky", "avatar_url": "https://avatars.githubusercontent.com/u/16392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joeyh", "html_url": "https://github.com/joeyh", "followers_url": "https://api.github.com/users/joeyh/followers", "following_url": "https://api.github.com/users/joeyh/following{/other_user}", "gists_url": "https://api.github.com/users/joeyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/joeyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joeyh/subscriptions", "organizations_url": "https://api.github.com/users/joeyh/orgs", "repos_url": "https://api.github.com/users/joeyh/repos", "events_url": "https://api.github.com/users/joeyh/events{/privacy}", "received_events_url": "https://api.github.com/users/joeyh/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/79/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/79/timeline", "performed_via_github_app": null}