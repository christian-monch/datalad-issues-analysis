{"url": "https://api.github.com/repos/datalad/datalad/issues/3767", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3767/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3767/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3767/events", "html_url": "https://github.com/datalad/datalad/issues/3767", "id": 505592697, "node_id": "MDU6SXNzdWU1MDU1OTI2OTc=", "number": 3767, "title": "rerun: cherrypicking of (re)moving annexed files might need special care", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-10-11T01:47:51Z", "updated_at": "2019-10-19T20:22:09Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "While rerunning https://github.com/dnkennedy/ReproNim-reprokwyk by @dnkennedy with \r\n```shell\r\n$ datalad rerun --since= --onto= --branch=reproducefully\r\n```\r\nit failed with\r\n```\r\n[INFO   ] == Command exit (modification check follows) =====\r\nadd(ok): output_entropy.nii (file)\r\nadd(ok): output_entropy_orig.nii (file)\r\nadd(ok): output_means.nii (file)\r\nadd(ok): output_means_orig.nii (file)\r\nsave(ok): . (dataset)\r\nCommandError: command '['git', 'cherry-pick', 'cfc74ef0355bf10107f40e14277c6068ba0fbf8b']' failed with exitcode 1\r\nFailed to run ['git', 'cherry-pick', 'cfc74ef0355bf10107f40e14277c6068ba0fbf8b'] under '/mnt/scrap/tmp/ReproNim-reprokwyk'. Exit code=1. out= err=error: could not apply cfc74ef... [DATALAD] removed content\r\nhint: after resolving the conflicts, mark the corrected paths\r\nhint: with 'git add <paths>' or 'git rm <paths>'\r\nhint: and commit the result with 'git commit'\r\n\r\nerror: could not apply cfc74ef... [DATALAD] removed content\r\nhint: after resolving the conflicts, mark the corrected paths\r\nhint: with 'git add <paths>' or 'git rm <paths>'\r\nhint: and commit the result with 'git commit'\r\ndatalad rerun --since= --onto= --branch=reproducefully  93.86s user 28.09s system 8% cpu 24:07.00 total\r\n```\r\nwhere that ```cfc74ef0355bf10107f40e14277c6068ba0fbf8b``` commit is\r\n```\r\n$> git show --stat 'cfc74ef0355bf10107f40e14277c6068ba0fbf8b'\r\ncommit cfc74ef0355bf10107f40e14277c6068ba0fbf8b\r\nAuthor: David Kennedy <David.Kennedy@umassmed.edu>\r\nDate:   Fri Sep 13 11:56:12 2019 -0400\r\n\r\n    [DATALAD] removed content\r\n \r\n kwyk-output.nii.gz_means.nii      | 1 -\r\n kwyk-output.nii.gz_means_orig.nii | 1 -\r\n```\r\nto get ready for the next attempt to concur the `datalad run` etc.\r\nSince algorithm is non deterministic, those files upon `rerun` are not bit identical.  So cherry-picking fails, also semantically the action is clear -- remove the files, and ideally `rerun` should do that on our behalf.  What do you think @kyleam ?\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3767/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3767/timeline", "performed_via_github_app": null}