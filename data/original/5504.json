{"url": "https://api.github.com/repos/datalad/datalad/issues/5504", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5504/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5504/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5504/events", "html_url": "https://github.com/datalad/datalad/issues/5504", "id": 832958072, "node_id": "MDU6SXNzdWU4MzI5NTgwNzI=", "number": 5504, "title": "ORA remote doesn't handle URL- keys", "user": {"login": "loj", "id": 15157717, "node_id": "MDQ6VXNlcjE1MTU3NzE3", "avatar_url": "https://avatars.githubusercontent.com/u/15157717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/loj", "html_url": "https://github.com/loj", "followers_url": "https://api.github.com/users/loj/followers", "following_url": "https://api.github.com/users/loj/following{/other_user}", "gists_url": "https://api.github.com/users/loj/gists{/gist_id}", "starred_url": "https://api.github.com/users/loj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/loj/subscriptions", "organizations_url": "https://api.github.com/users/loj/orgs", "repos_url": "https://api.github.com/users/loj/repos", "events_url": "https://api.github.com/users/loj/events{/privacy}", "received_events_url": "https://api.github.com/users/loj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2971010147, "node_id": "MDU6TGFiZWwyOTcxMDEwMTQ3", "url": "https://api.github.com/repos/datalad/datalad/labels/RIA/ORA", "name": "RIA/ORA", "color": "E8F2DF", "default": false, "description": "Issues related to RIA-based workflows and related components"}], "state": "closed", "locked": false, "assignee": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2021-03-16T16:05:27Z", "updated_at": "2021-07-27T04:14:08Z", "closed_at": "2021-07-27T04:14:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "`datalad push`  to a ria store fails with \r\n\r\n```\r\n\u2771 datalad push --to inm7\r\nPush to 'inm7':  25%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588                                 | 1.00/4.00 [00:00<00:00, 8.92k Steps/sCommandError: 'git annex copy --batch -z --to inm7-storage --fast --json --json-error-messages --json-progress -c annex.dotfiles=true -c 'remote.inm7.annex-ssh-options=-o ControlMaster=auto -S /home/loj/.cache/datalad/sockets/fc1f538d'' failed with exitcode 1 under /data/project/rehab_hcp_lifespan/hcp-a/HCA9992517_V1_MR\r\ngit-annex: copy: 95 failed\r\ndatalad push --to inm7  24.54s user 6.54s system 9% cpu 5:18.29 total\r\n```\r\n\r\nThis seems to be due to the hash being a url. See the following:\r\n\r\n```\r\n[2021-03-16 16:53:10.029311] /home/loj/miniconda3/bin/git-annex-remote-ora[2] --> PREPARE-SUCCESS\r\n[2021-03-16 16:53:10.029413] /home/loj/miniconda3/bin/git-annex-remote-ora[2] <-- TRANSFER STORE URL-s1259--s3://NDAR_Central_1/submission_-d8c36dc7065b4b9bdbf1abeac4b34697 .git/annex/objects/fG/Mw/URL-s1259--s3&c%%NDAR_Central_1%submission_-d8c36dc7065b4b9bdbf1abeac4b34697/URL-s1259--s3&c%%NDAR_Central_1%submission_-d8c36dc7065b4b9bdbf1abeac4b34697\r\n[2021-03-16 16:53:10.029728] /home/loj/miniconda3/bin/git-annex-remote-ora[2] --> DIRHASH URL-s1259--s3://NDAR_Central_1/submission_-d8c36dc7065b4b9bdbf1abeac4b34697\r\n[2021-03-16 16:53:10.029854] /home/loj/miniconda3/bin/git-annex-remote-ora[2] <-- VALUE fG/Mw/\r\n[2021-03-16 16:53:10.061004] /home/loj/miniconda3/bin/git-annex-remote-ora[2] --> TRANSFER-FAILURE STORE URL-s1259--s3://NDAR_Central_1/submission_-d8c36dc7065b4b9bdbf1abeac4b34697 CommandError: 'scp -o ControlPath=/home/loj/.cache/datalad/sockets/cf474a71 '.git/annex/objects/fG/Mw/URL-s1259--s3&c%%NDAR_Central_1%submission_-d8c36dc7065b4b9bdbf1abeac4b34697/URL-s1259--s3&c%%NDAR_Central_1%submission_-d8c36dc7065b4b9bdbf1abeac4b34697' hcp_a.ds.inm7.de:/ds/hcp_a/srv/ea5/3ca77-7d21-4d1c-9617-c7e2302356b1/ora-remote-8711d553-a17b-4ee3-a0fa-0ebc2cc34df4/transfer/URL-s1259--s3:/NDAR_Central_1/submission_-d8c36dc7065b4b9bdbf1abeac4b34697' failed with exitcode 1 [err: 'scp: /ds/hcp_a/srv/ea5/3ca77-7d21-4d1c-9617-c7e2302356b1/ora-remote-8711d553-a17b-4ee3-a0fa-0ebc2cc34df4/transfer/URL-s1259--s3:/NDAR_Central_1/submission_-d8c36dc7065b4b9bdbf1abeac4b34697: No such file or directory']\r\n```\r\n\r\nping @bpoldrack ", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5504/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5504/timeline", "performed_via_github_app": null}