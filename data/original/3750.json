{"url": "https://api.github.com/repos/datalad/datalad/issues/3750", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3750/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3750/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3750/events", "html_url": "https://github.com/datalad/datalad/issues/3750", "id": 502955418, "node_id": "MDU6SXNzdWU1MDI5NTU0MTg=", "number": 3750, "title": "check_git_configured() performs inadequate check", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 289240596, "node_id": "MDU6TGFiZWwyODkyNDA1OTY=", "url": "https://api.github.com/repos/datalad/datalad/labels/performance", "name": "performance", "color": "f4b2d8", "default": false, "description": "Improve performance of an existing feature"}, {"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-05T12:09:41Z", "updated_at": "2019-10-20T08:32:59Z", "closed_at": "2019-10-20T08:32:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This function is called whenever the first repo instance is created, i.e. for any commandline execution once. It invokes `git config` twice to check for `user.name` and `user.email`.\r\n\r\nI have two issues with that.\r\n\r\n1. it is inadequate for figuring out what it wants to see (git configured to make proper commits with meaningful IDs), because it only checks the config, but ignores all other possibilities.\r\n\r\n```\r\n      user.email\r\n           Your email address to be recorded in any newly created commits. Can be\r\n           overridden by the GIT_AUTHOR_EMAIL, GIT_COMMITTER_EMAIL, and EMAIL environment\r\n           variables. See git-commit-tree(1).\r\n\r\n       user.name\r\n           Your full name to be recorded in any newly created commits. Can be overridden\r\n           by the GIT_AUTHOR_NAME and GIT_COMMITTER_NAME environment variables. See git-\r\n           commit-tree(1).\r\n```\r\n\r\n2. Paying the price of two `git config` calls before there even is a repo seems inappropriate. It may be better to perform such a check whenever the first git config is loaded into the config manager, instead of handling this in `GitRepo`. Both `Repo` and `Dataset` have `ConfigManager` instances that engage `git config anyways.", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3750/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3750/timeline", "performed_via_github_app": null}