{"url": "https://api.github.com/repos/datalad/datalad/issues/3192", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3192/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3192/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3192/events", "html_url": "https://github.com/datalad/datalad/issues/3192", "id": 416498857, "node_id": "MDU6SXNzdWU0MTY0OTg4NTc=", "number": 3192, "title": "Restructure source tree", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 526935563, "node_id": "MDU6TGFiZWw1MjY5MzU1NjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/feedback-desired", "name": "feedback-desired", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-03-03T10:17:13Z", "updated_at": "2020-07-12T07:43:47Z", "closed_at": "2019-03-20T15:21:35Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I believe we agree that the source tree is a bit out of sync with the internal (dependency) structure of the code. I would like to propose a restructuring as follows (lumping together stuff that is scattered across -core and the -revolution extension for now):\r\n\r\n- [x] move core dataset and repo classes into `dataset/` (or rather `core/dataset/`) via gh-4689\r\n  - [x] it might make sense to split Git/AnnexRepo into a core and an extended interface also (via inheritance), the number of rarely used methods is substantial ATM\r\n- [ ] `core/` -- in the spirit of #2765, introduce `core/` for a minimal set of commands that serve as the foundation for others and receive special scrutiny regard API composition and changes.\r\n  - [x]  `local/` -- essential commands for working with a single local dataset(-hierarchy)\r\n    - [x] `status`\r\n    - [x] `diff`\r\n    - [x] `save`\r\n    - [x] `create`\r\n    - [x] `run`\r\n  - [ ] `distributed/` -- key commands needed for communication with other dataset instances\r\n    - [x]  `clone`\r\n    - [ ]  `get`\r\n    - [ ]  `update`\r\n    - [x]  `publish` by means of `push`\r\n    - [ ]  `siblings`\r\n\r\nIn addition, there is a second set of categories that are identical by name, but are treated more like applications instead of foundation with the goal of having them move faster (or at all) in order to expose features and/or adapt to changes in the software/service ecosystem\r\n- [ ] `local/`\r\n  - [ ] `rerun`\r\n  - [ ] `run-procedure`\r\n  - [ ] `add*`\r\n  - [ ] `download-url`\r\n  - [ ] `ls`\r\n  - [x] `subdatasets`\r\n    - [ ] `aggregate-metadata` (not a core command, there could be multiple ways of aggregation, as long as the result is a data structure that the core `metadata` command can access)\r\n    - [ ] `search`\r\n- [ ] `distributed/`\r\n    - [ ]  `install` (placed here and not in core, because we have plans for complex features that could be difficult to keep stable long-term, hence this could be seen as an \"application\" that installs dataset via all kinds of ways)\r\n    - [ ]  `drop`\r\n    - [ ] `create-sibling*`\r\n    - [ ] `export-*`\r\n\r\nOther (more \"leafy\") commands could either be injected in these categories, or populate to additional ones, to possibly better indicate (and enforce?) their (in)dependence on/from others:\r\n- remove\r\n- uninstall\r\n- clean\r\n\r\nGiven the target directories do not conflict with anything, we could approach such a transitions slowly and keep import shims in place for any length of time to ease the pain.", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3192/timeline", "performed_via_github_app": null}