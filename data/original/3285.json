{"url": "https://api.github.com/repos/datalad/datalad/issues/3285", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3285/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3285/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3285/events", "html_url": "https://github.com/datalad/datalad/issues/3285", "id": 428480272, "node_id": "MDU6SXNzdWU0Mjg0ODAyNzI=", "number": 3285, "title": "rev-save PATH seems to add/save also not tracked submodules", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-04-02T22:49:45Z", "updated_at": "2019-04-05T17:30:25Z", "closed_at": "2019-04-05T17:30:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```shell\r\n~ > datalad rev-create /tmp/ds\r\n[INFO   ] Creating a new annex repo at /tmp/ds \r\ncreate(ok): /tmp/ds (dataset)                                                    \r\n\r\n~ > cd /tmp/ds\r\n\r\n/tmp/ds > datalad install ///\r\n[INFO   ] Cloning http://datasets.datalad.org/ [1 other candidates] into '/tmp/ds/datasets.datalad.org' \r\ninstall(ok): /tmp/ds/datasets.datalad.org (dataset)\r\n\r\n/tmp/ds > touch 123\r\n\r\n/tmp/ds > git status                               \r\nOn branch master\r\nUntracked files:\r\n  (use \"git add <file>...\" to include in what will be committed)\r\n\r\n\t123\r\n\tdatasets.datalad.org/\r\n\r\nnothing added to commit but untracked files present (use \"git add\" to track)\r\n\r\n/tmp/ds > datalad rev-save -m \"saving ONLY 123\" 123\r\nadd(ok): 123 (file)                                                              \r\nsave(ok): . (dataset)\r\naction summary:\r\n  add (ok: 1)\r\n  save (ok: 1)\r\n\r\n/tmp/ds > git show\r\ncommit 18469a8a5cd46f7a99e6bb382ba742c2c804f476 (HEAD -> master)\r\nAuthor: Yaroslav Halchenko <debian@onerussian.com>\r\nDate:   Tue Apr 2 18:45:54 2019 -0400\r\n\r\n    saving ONLY 123\r\n\r\ndiff --git a/.gitmodules b/.gitmodules\r\nnew file mode 100644\r\nindex 0000000..01bac71\r\n--- /dev/null\r\n+++ b/.gitmodules\r\n@@ -0,0 +1,3 @@\r\n+[submodule \"datasets.datalad.org\"]\r\n+ path = datasets.datalad.org\r\n+ url = http://datasets.datalad.org/.git\r\ndiff --git a/123 b/123\r\nnew file mode 120000\r\nindex 0000000..ce38032\r\n--- /dev/null\r\n+++ b/123\r\n@@ -0,0 +1 @@\r\n+.git/annex/objects/2W/kW/MD5E-s0--d41d8cd98f00b204e9800998ecf8427e/MD5E-s0--d41d8cd98f00b204e9800998ecf8427e\r\n\\ No newline at end of file\r\ndiff --git a/datasets.datalad.org b/datasets.datalad.org\r\nnew file mode 160000\r\nindex 0000000..5a952ba\r\n--- /dev/null\r\n+++ b/datasets.datalad.org\r\n@@ -0,0 +1 @@\r\n+Subproject commit 5a952ba00a82a9ce62fd8e66335d9d21f28a5387\r\n\r\n/tmp/ds > git status                               \r\nOn branch master\r\nnothing to commit, working tree clean\r\n\r\n/tmp/ds > datalad --version                        \r\ndatalad 0.12.0rc2.dev125\r\n```\r\n\r\nin my original case it was even more interesting -- I had a large directory where some subdir/ and sub/subdir's were \"independent\" repos, I did\r\n```\r\nsource ~datalad/datalad-master/venvs/dev/bin/activate\r\ndatalad create -d .\r\ndatalad create -d . --force\r\ngit status\r\ndatalad save -m \"Adding kenmore manual found here\" kenmore\r\nls -ld kenmore\r\ngit status\r\ndatalad rev-save -m \"Adding kenmore manual found here\" kenmore\r\ngit show --stat\r\n```\r\nand as a result all those submodules got added to `.gitmodules` but not committed.  But I didn't spot if it was done during `save` or `rev-save`", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3285/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3285/timeline", "performed_via_github_app": null}