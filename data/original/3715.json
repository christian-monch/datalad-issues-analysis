{"url": "https://api.github.com/repos/datalad/datalad/issues/3715", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3715/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3715/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3715/events", "html_url": "https://github.com/datalad/datalad/pull/3715", "id": 498397465, "node_id": "MDExOlB1bGxSZXF1ZXN0MzIxMzM3MzU5", "number": 3715, "title": "DOC+TST: gitrepo: Document get_tags() order change from eed2ca6f6", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-09-25T16:33:46Z", "updated_at": "2019-09-25T22:01:07Z", "closed_at": "2019-09-25T22:00:51Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/3715", "html_url": "https://github.com/datalad/datalad/pull/3715", "diff_url": "https://github.com/datalad/datalad/pull/3715.diff", "patch_url": "https://github.com/datalad/datalad/pull/3715.patch"}, "body": "```\r\nPrior to the for_each_ref_() series (gh-3705), get_tags() returned\r\ntags sorted by the committer date.  For annotated tags, this means\r\nthey were sorted by the object pointed to rather than the tagger date.\r\nFollowing gh-3705, the sorted value is by for-each-ref's \"creatordate\"\r\nfield (which exists so that lightweight and annotated tags can be\r\nsorted together), and annotated tags are now sorted based on the\r\ntagger date.\r\n\r\nThis change seems harmless enough.  No current callers in the code\r\nbase rely on annotated tags being sorted by committer date, and it\r\nseems unlikely that outside callers rely on this behavior.  But it\r\ndoes mean that test_get_tags needs to patch GIT_COMMITTER_DATE when\r\ncreating annotated tags so that the tagger date is not affected by the\r\nenvironment of the test run.\r\n\r\nIf we really want to preserve the old behavior, note that using\r\n\"committerdate\" (as originally done by gh-3705's bb17d0ede) is not\r\ncorrect.  It will sort lightweight tags by their committer date and\r\nleave annotated tags sorted alphabetically at the top of the list.\r\nInstead we'd have to use a more involved approach, such as including\r\nboth \"committerdate\" and the dereferenced \"*committerdate\" as fields\r\nand sorting by whichever value is non-empty for a given entry.\r\n```", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3715/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3715/timeline", "performed_via_github_app": null}