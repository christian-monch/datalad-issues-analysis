{"url": "https://api.github.com/repos/datalad/datalad/issues/506", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/506/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/506/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/506/events", "html_url": "https://github.com/datalad/datalad/issues/506", "id": 158965562, "node_id": "MDU6SXNzdWUxNTg5NjU1NjI=", "number": 506, "title": "our special remotes inherit GIT_DIR etc from git-annex but start annex commands from repo topdir", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "debanjum", "id": 6413477, "node_id": "MDQ6VXNlcjY0MTM0Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/6413477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/debanjum", "html_url": "https://github.com/debanjum", "followers_url": "https://api.github.com/users/debanjum/followers", "following_url": "https://api.github.com/users/debanjum/following{/other_user}", "gists_url": "https://api.github.com/users/debanjum/gists{/gist_id}", "starred_url": "https://api.github.com/users/debanjum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/debanjum/subscriptions", "organizations_url": "https://api.github.com/users/debanjum/orgs", "repos_url": "https://api.github.com/users/debanjum/repos", "events_url": "https://api.github.com/users/debanjum/events{/privacy}", "received_events_url": "https://api.github.com/users/debanjum/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "debanjum", "id": 6413477, "node_id": "MDQ6VXNlcjY0MTM0Nzc=", "avatar_url": "https://avatars.githubusercontent.com/u/6413477?v=4", "gravatar_id": "", "url": "https://api.github.com/users/debanjum", "html_url": "https://github.com/debanjum", "followers_url": "https://api.github.com/users/debanjum/followers", "following_url": "https://api.github.com/users/debanjum/following{/other_user}", "gists_url": "https://api.github.com/users/debanjum/gists{/gist_id}", "starred_url": "https://api.github.com/users/debanjum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/debanjum/subscriptions", "organizations_url": "https://api.github.com/users/debanjum/orgs", "repos_url": "https://api.github.com/users/debanjum/repos", "events_url": "https://api.github.com/users/debanjum/events{/privacy}", "received_events_url": "https://api.github.com/users/debanjum/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2016-06-07T16:19:37Z", "updated_at": "2016-06-10T01:06:33Z", "closed_at": "2016-06-10T01:06:33Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "This leads to such obscure failures as \n\n```\n(git)smaug:/mnt/btrfs/scrap/datalad/ds000001[master]sub001/BOLD/task001_run002/QA\n$> git annex drop fd.png                            \ndrop fd.png git-annex: git: createProcess: runInteractiveProcess: chdir: does not exist (No such file or directory)\n(unsafe) \n  Could only verify the existence of 0 out of 1 necessary copies\n\n  Unable to access these remotes: datalad-archives\n\n  Try making some of these repositories available:\n    899f0347-0888-48ef-91b6-bac213ca8cef -- [datalad-archives]\n    c8bd3d05-33d4-4b59-9d53-ca7efbdcdd13 -- yoh@smaug:/mnt/btrfs/datasets/datalad/crawl/openfmri/ds000001\n\n  (Use --force to override this check, or adjust numcopies.)\n```\n\nwhich is due to our custom remote starting contentlocation batch process as we usually do from the top dir of the repository, while inheriting GIT_DIR=../../.., which then leads to\n\n```\n$> echo -e 'MD5E-s2526804721--b29a61c20f974c5e75e7783500ebe8ed.tgz' | GIT_WORK_TREE=../../../.. GIT_DIR=../../../../.git git annex contentlocation --batch\ngit-annex: git: createProcess: runInteractiveProcess: chdir: does not exist (No such file or directory)\n```\n\n@joeyh -- what do you think would be the best resolution?\n1. start batch process within current directory\n   cons: then I think it might interfer with our \"start all git/annex from top directory\" which does paths normalization etc, and might become defunct if that directory gets removed in the process while batch process is still running\n2. sanitize the environment (GIT_DIR GIT_WORK_TREE, anything else?) before invoking git/annex from top directory\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/506/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/506/timeline", "performed_via_github_app": null}