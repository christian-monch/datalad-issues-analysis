{"url": "https://api.github.com/repos/datalad/datalad/issues/5253", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5253/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5253/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5253/events", "html_url": "https://github.com/datalad/datalad/issues/5253", "id": 767965922, "node_id": "MDU6SXNzdWU3Njc5NjU5MjI=", "number": 5253, "title": "test_bare_git_version_{1,2} fails on datalad/git-annex  maint (and may be others)", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2020-12-15T18:19:34Z", "updated_at": "2020-12-17T02:28:25Z", "closed_at": "2020-12-17T02:28:25Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n======================================================================\r\nERROR: datalad.distributed.tests.test_ria_git_remote.test_bare_git_version_1(None,)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/nose/case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/tests/utils.py\", line 750, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/tests/utils.py\", line 750, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/distributed/tests/test_ria_git_remote.py\", line 92, in _test_bare_git_version_1\r\n    ds.repo.enable_remote('bare-git')\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/support/annexrepo.py\", line 1851, in enable_remote\r\n    raise e\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/support/annexrepo.py\", line 1844, in enable_remote\r\n    env=env)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/support/annexrepo.py\", line 1104, in _run_annex_command\r\n    **kwargs)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/cmd.py\", line 144, in run_gitcommand_on_file_list_chunks\r\n    results.append(func(cmd, *args, **kwargs))\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/cmd.py\", line 513, in run\r\n    **results,\r\ndatalad.support.exceptions.CommandError: CommandError: 'git annex enableremote -c annex.dotfiles=true -c annex.retry=3 bare-git' failed with exitcode 1 under /tmp/datalad_temp__test_bare_git_version_15m7abgnw [out: 'enableremote bare-git \r\nfailed'] [err: 'remote bare-git:This repository is not initialized for use by git-annex, but ../datalad_temp__test_bare_git_version_1n42gm4dp/1c5/75c64-67b2-4435-bd8b-52982b6e0663/annex/objects/ exists, which indicates this repository was used by git-annex before, and may have lost its annex.uuid and annex.version configs. Either set back missing configs, or run git-annex init to initialize with a new uuid.\r\n  remote bare-git:This repository is not initialized for use by git-annex, but ../datalad_temp__test_bare_git_version_1n42gm4dp/1c5/75c64-67b2-4435-bd8b-52982b6e0663/annex/objects/ exists, which indicates this repository was used by git-annex before, and may have lost its annex.uuid and annex.version configs. Either set back missing configs, or run git-annex init to initialize with a new uuid.\r\ngit-annex: enableremote: 1 failed']\r\n-------------------- >> begin captured logging << --------------------\r\nasyncio: DEBUG: Using selector: EpollSelector\r\nasyncio: DEBUG: Using selector: EpollSelector\r\nasyncio: DEBUG: Using selector: EpollSelector\r\nasyncio: DEBUG: Using selector: EpollSelector\r\n--------------------- >> end captured logging << ---------------------\r\n\r\n======================================================================\r\nERROR: datalad.distributed.tests.test_ria_git_remote.test_bare_git_version_2(None,)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/nose/case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/tests/utils.py\", line 750, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/tests/utils.py\", line 750, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/distributed/tests/test_ria_git_remote.py\", line 197, in _test_bare_git_version_2\r\n    ds.repo.enable_remote('bare-git')\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/support/annexrepo.py\", line 1851, in enable_remote\r\n    raise e\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/support/annexrepo.py\", line 1844, in enable_remote\r\n    env=env)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/support/annexrepo.py\", line 1104, in _run_annex_command\r\n    **kwargs)\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/cmd.py\", line 144, in run_gitcommand_on_file_list_chunks\r\n    results.append(func(cmd, *args, **kwargs))\r\n  File \"/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/datalad/cmd.py\", line 513, in run\r\n    **results,\r\ndatalad.support.exceptions.CommandError: CommandError: 'git annex enableremote -c annex.dotfiles=true -c annex.retry=3 bare-git' failed with exitcode 1 under /tmp/datalad_temp__test_bare_git_version_2s6zirwhe [out: 'enableremote bare-git \r\nfailed'] [err: 'remote bare-git:This repository is not initialized for use by git-annex, but ../datalad_temp__test_bare_git_version_29wdvdgx9/cb3/fd246-0097-43d4-b135-f2f6b11e0c15/annex/objects/ exists, which indicates this repository was used by git-annex before, and may have lost its annex.uuid and annex.version configs. Either set back missing configs, or run git-annex init to initialize with a new uuid.\r\n  remote bare-git:This repository is not initialized for use by git-annex, but ../datalad_temp__test_bare_git_version_29wdvdgx9/cb3/fd246-0097-43d4-b135-f2f6b11e0c15/annex/objects/ exists, which indicates this repository was used by git-annex before, and may have lost its annex.uuid and annex.version configs. Either set back missing configs, or run git-annex init to initialize with a new uuid.\r\ngit-annex: enableremote: 1 failed']\r\n-------------------- >> begin captured logging << --------------------\r\nasyncio: DEBUG: Using selector: EpollSelector\r\nasyncio: DEBUG: Using selector: EpollSelector\r\nasyncio: DEBUG: Using selector: EpollSelector\r\nasyncio: DEBUG: Using selector: EpollSelector\r\n--------------------- >> end captured logging << ---------------------\r\n\r\n----------------------------------------------------------------------\r\nRan 1193 tests in 4411.102s\r\n\r\nFAILED (SKIP=88, errors=2)\r\n```\r\n\r\n@bpoldrack could you have a look?", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5253/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5253/timeline", "performed_via_github_app": null}