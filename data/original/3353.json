{"url": "https://api.github.com/repos/datalad/datalad/issues/3353", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3353/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3353/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3353/events", "html_url": "https://github.com/datalad/datalad/pull/3353", "id": 436925826, "node_id": "MDExOlB1bGxSZXF1ZXN0MjczMzE0MzM1", "number": 3353, "title": "ENH (sugaring): -c | --cfg-proc option for rev-create to specify cfg_ procedure(s) to run", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/56", "html_url": "https://github.com/datalad/datalad/milestone/56", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/56/labels", "id": 3796173, "node_id": "MDk6TWlsZXN0b25lMzc5NjE3Mw==", "number": 56, "title": "Release 0.12.0", "description": "- drop support of direct mode\r\n- potentially bring revolution home fully or in parts", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 61, "state": "closed", "created_at": "2018-11-05T14:12:45Z", "updated_at": "2020-03-12T15:47:48Z", "due_on": "2020-01-11T08:00:00Z", "closed_at": "2020-01-11T16:10:25Z"}, "comments": 11, "created_at": "2019-04-24T21:59:37Z", "updated_at": "2019-05-02T22:29:58Z", "closed_at": "2019-04-29T18:04:28Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/3353", "html_url": "https://github.com/datalad/datalad/pull/3353", "diff_url": "https://github.com/datalad/datalad/pull/3353.diff", "patch_url": "https://github.com/datalad/datalad/pull/3353.patch"}, "body": "ATM there is no easy way to specify procedures to run on a freshly created dataset. But in my case it is a common use case to quickly create datasets where I know what type they should be - should not\r\nplace text files to git, or might be BIDS datasets, etc.  So it would be nice to be able to succinctly specify procedure(s) to be ran on the new dataset as to configure it.\r\n\r\nAlternative implementation could be adding  --proc-post to the rev-create command itself. Pros then would be:\r\n  - consistent with --proc-post for datalad command itself\r\n  - could then run any procedure, not only cfg_ one\r\n\r\nCons:\r\n  - would be notably more long/tedius to type - i.e.\r\n\r\n        rev-create --proc-post cfg_text2git\r\n\r\n    vs\r\n\r\n        rev-create -c text2git\r\n\r\nI also added a `lgr.info` call within `run_procedure` to signal what procedure is actually about to be ran.  Although might be considered a bit oxymoronic in the case of direct `run_procedure` invocation, makes sense everywhere else procedures could be invoked.\r\n\r\nSo now it would look like\r\n```shell\r\n$> datalad rev-create -c text2git -f /tmp/newds2        \r\n[INFO   ] Creating a new annex repo at /tmp/newds2 \r\ncreate(ok): /tmp/newds2 (dataset)                                                              \r\n[INFO   ] Running procedure cfg_text2git \r\n[INFO   ] == Command start (output follows) ===== \r\n[INFO   ] == Command exit (modification check follows) ===== \r\n```\r\n\r\nWith something like this I think I wouldn't miss any other option of current `create` too much happen we just decide to replace `create` with `rev-create`.\r\n\r\nTODOs:\r\n- [ ] Document special purpose/treatment of `cfg_` procedures\r\n- [ ] Decide on `cfg_` vs `setup_`?", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3353/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3353/timeline", "performed_via_github_app": null}