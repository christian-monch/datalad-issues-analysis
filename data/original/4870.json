{"url": "https://api.github.com/repos/datalad/datalad/issues/4870", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4870/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4870/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4870/events", "html_url": "https://github.com/datalad/datalad/issues/4870", "id": 693453082, "node_id": "MDU6SXNzdWU2OTM0NTMwODI=", "number": 4870, "title": "test_push_subds_no_recursion fails on crippledFS", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-04T18:06:55Z", "updated_at": "2021-01-18T19:06:11Z", "closed_at": "2021-01-18T19:06:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "e.g. https://github.com/datalad/datalad/pull/4448/checks?check_run_id=1073144931#step:8:217 \r\n\r\n<details>\r\n<summary>cut/paste from above</summary> \r\n\r\n```shell\r\n2020-09-04T17:57:21.9815659Z ======================================================================\r\n2020-09-04T17:57:21.9815848Z FAIL: datalad.core.distributed.tests.test_push.test_push_subds_no_recursion\r\n2020-09-04T17:57:21.9816566Z ----------------------------------------------------------------------\r\n2020-09-04T17:57:21.9816697Z Traceback (most recent call last):\r\n2020-09-04T17:57:21.9818321Z   File \"/opt/hostedtoolcache/Python/3.5.9/x64/lib/python3.5/site-packages/nose/case.py\", line 198, in runTest\r\n2020-09-04T17:57:21.9818576Z     self.test(*self.arg)\r\n2020-09-04T17:57:21.9819413Z   File \"/opt/hostedtoolcache/Python/3.5.9/x64/lib/python3.5/site-packages/datalad/tests/utils.py\", line 731, in _wrap_with_tempfile\r\n2020-09-04T17:57:21.9819575Z     return t(*(arg + (filename,)), **kw)\r\n2020-09-04T17:57:21.9819999Z   File \"/opt/hostedtoolcache/Python/3.5.9/x64/lib/python3.5/site-packages/datalad/tests/utils.py\", line 731, in _wrap_with_tempfile\r\n2020-09-04T17:57:21.9824906Z .: store(+) [ora]\r\n2020-09-04T17:57:21.9825221Z .: here(+) [git]\r\n2020-09-04T17:57:21.9825447Z .: here(+) [git]\r\n2020-09-04T17:57:21.9826106Z .: origin(+) [/crippledfs/datalad_temp_test_cached_datasetyx1uiiwu/https___github.com_datalad_testrepo--minimalds (git)]\r\n2020-09-04T17:57:21.9826613Z .: here(+) [git]\r\n2020-09-04T17:57:21.9827147Z .: origin(+) [/crippledfs/datalad_temp_test_cached_datasetyx1uiiwu/https___github.com_datalad_testrepo--minimalds (git)]\r\n2020-09-04T17:57:21.9827445Z .: here(+) [git]\r\n2020-09-04T17:57:21.9827931Z .: origin(+) [/crippledfs/datalad_temp_test_cached_datasetyx1uiiwu/https___github.com_datalad_testrepo--minimalds (git)]\r\n2020-09-04T17:57:21.9828226Z .: here(+) [git]\r\n2020-09-04T17:57:21.9828712Z .: origin(+) [/crippledfs/datalad_temp_test_cached_datasetyx1uiiwu/https___github.com_datalad_testrepo--minimalds (git)]\r\n2020-09-04T17:57:21.9829955Z Versions: annexremote=1.4.3 appdirs=1.4.4 boto=2.49.0 cmd:7z=16.02 cmd:annex=8.20200810+git69-g02a35c9ce-1~ndall+1 cmd:bundled-git=2.24.0 cmd:git=2.24.0 cmd:system-git=2.28.0 cmd:system-ssh=7.6p1 exifread=2.3.1 humanize=2.6.0 iso8601=0.1.12 keyring=20.0.1 keyrings.alt=3.2.0 msgpack=1.0.0 mutagen=1.45.1 requests=2.24.0 tqdm=4.48.2 wrapt=1.12.1\r\n2020-09-04T17:57:21.9830874Z Obscure filename: str=b' ;abc\\xce\\x94\\xd0\\x99\\xd7\\xa7\\xd9\\x85\\xe0\\xb9\\x97\\xe3\\x81\\x82' repr=' ;abc\u0394\u0419\u05e7\u0645\u0e57\u3042'\r\n2020-09-04T17:57:21.9831464Z Encodings: default='utf-8' filesystem='utf-8' locale.prefered='UTF-8'\r\n2020-09-04T17:57:21.9832313Z Environment: GIT_CONFIG_PARAMETERS=\"'init.defaultBranch=master'\" PATH='/opt/hostedtoolcache/Python/3.5.9/x64/bin:/opt/hostedtoolcache/Python/3.5.9/x64:/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/usr/share/rust/.cargo/bin:/home/runner/.config/composer/vendor/bin:/home/runner/.dotnet/tools:/snap/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games' LANG='C.UTF-8'\r\n2020-09-04T17:57:21.9874416Z     return t(*(arg + (filename,)), **kw)\r\n2020-09-04T17:57:21.9875047Z   File \"/opt/hostedtoolcache/Python/3.5.9/x64/lib/python3.5/site-packages/datalad/tests/utils.py\", line 731, in _wrap_with_tempfile\r\n2020-09-04T17:57:21.9875208Z     return t(*(arg + (filename,)), **kw)\r\n2020-09-04T17:57:21.9875655Z   File \"/opt/hostedtoolcache/Python/3.5.9/x64/lib/python3.5/site-packages/datalad/tests/utils.py\", line 731, in _wrap_with_tempfile\r\n2020-09-04T17:57:21.9875792Z     return t(*(arg + (filename,)), **kw)\r\n2020-09-04T17:57:21.9876308Z   File \"/opt/hostedtoolcache/Python/3.5.9/x64/lib/python3.5/site-packages/datalad/core/distributed/tests/test_push.py\", line 400, in test_push_subds_no_recursion\r\n2020-09-04T17:57:21.9876604Z     assert_status('ok', res)\r\n2020-09-04T17:57:21.9877002Z   File \"/opt/hostedtoolcache/Python/3.5.9/x64/lib/python3.5/site-packages/datalad/tests/utils.py\", line 1292, in assert_status\r\n2020-09-04T17:57:21.9877155Z     dumps(results, indent=1, default=lambda x: str(x))))\r\n2020-09-04T17:57:21.9877446Z AssertionError: Test 3/5: expected status ['ok'] not found in:\r\n2020-09-04T17:57:21.9877559Z [\r\n2020-09-04T17:57:21.9877658Z  {\r\n2020-09-04T17:57:21.9877764Z   \"action\": \"publish\",\r\n2020-09-04T17:57:21.9877873Z   \"type\": \"dataset\",\r\n2020-09-04T17:57:21.9877979Z   \"target\": \"target\",\r\n2020-09-04T17:57:21.9878239Z   \"refspec\": \"refs/heads/git-annex:refs/heads/git-annex\",\r\n2020-09-04T17:57:21.9878477Z   \"status\": \"ok\",\r\n2020-09-04T17:57:21.9879082Z   \"refds\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj\",\r\n2020-09-04T17:57:21.9879474Z   \"path\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj\",\r\n2020-09-04T17:57:21.9879611Z   \"operations\": [\r\n2020-09-04T17:57:21.9879935Z    \"fast-forward\"\r\n2020-09-04T17:57:21.9880247Z   ],\r\n2020-09-04T17:57:21.9880617Z   \"message\": \"refs/heads/git-annex->target:refs/heads/git-annex 6f9a4f6..8e931bc\",\r\n2020-09-04T17:57:21.9880742Z   \"hints\": null\r\n2020-09-04T17:57:21.9880856Z  },\r\n2020-09-04T17:57:21.9880967Z  {\r\n2020-09-04T17:57:21.9881081Z   \"action\": \"publish\",\r\n2020-09-04T17:57:21.9881199Z   \"type\": \"dataset\",\r\n2020-09-04T17:57:21.9881316Z   \"target\": \"target\",\r\n2020-09-04T17:57:21.9881443Z   \"refspec\": \"refs/heads/master:refs/heads/master\",\r\n2020-09-04T17:57:21.9881554Z   \"status\": \"ok\",\r\n2020-09-04T17:57:21.9881686Z   \"refds\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj\",\r\n2020-09-04T17:57:21.9881843Z   \"path\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj\",\r\n2020-09-04T17:57:21.9881980Z   \"operations\": [\r\n2020-09-04T17:57:21.9882241Z    \"new-branch\"\r\n2020-09-04T17:57:21.9882359Z   ],\r\n2020-09-04T17:57:21.9882783Z   \"message\": \"refs/heads/master->target:refs/heads/master [new branch]\",\r\n2020-09-04T17:57:21.9882908Z   \"hints\": null\r\n2020-09-04T17:57:21.9882999Z  },\r\n2020-09-04T17:57:21.9883110Z  {\r\n2020-09-04T17:57:21.9883227Z   \"refds\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj\",\r\n2020-09-04T17:57:21.9899437Z   \"action\": \"copy\",\r\n2020-09-04T17:57:21.9899574Z   \"path\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj/sub m\",\r\n2020-09-04T17:57:21.9899699Z   \"target\": \"target\",\r\n2020-09-04T17:57:21.9899806Z   \"message\": [\r\n2020-09-04T17:57:21.9900199Z    \"Target '%s' does not appear to be an annex remote\",\r\n2020-09-04T17:57:21.9900319Z    \"target\"\r\n2020-09-04T17:57:21.9900406Z   ],\r\n2020-09-04T17:57:21.9900512Z   \"status\": \"notneeded\",\r\n2020-09-04T17:57:21.9900765Z   \"type\": \"dataset\"\r\n2020-09-04T17:57:21.9900884Z  },\r\n2020-09-04T17:57:21.9900984Z  {\r\n2020-09-04T17:57:21.9901089Z   \"action\": \"publish\",\r\n2020-09-04T17:57:21.9901195Z   \"type\": \"dataset\",\r\n2020-09-04T17:57:21.9901283Z   \"target\": \"target\",\r\n2020-09-04T17:57:21.9901593Z   \"refspec\": \"refs/heads/git-annex:refs/heads/git-annex\",\r\n2020-09-04T17:57:21.9901711Z   \"status\": \"ok\",\r\n2020-09-04T17:57:21.9901837Z   \"refds\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj\",\r\n2020-09-04T17:57:21.9901973Z   \"path\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj/sub m\",\r\n2020-09-04T17:57:21.9902093Z   \"operations\": [\r\n2020-09-04T17:57:21.9902325Z    \"fast-forward\"\r\n2020-09-04T17:57:21.9902429Z   ],\r\n2020-09-04T17:57:21.9902778Z   \"message\": \"refs/heads/git-annex->target:refs/heads/git-annex 019a44c..4e083ca\",\r\n2020-09-04T17:57:21.9902905Z   \"hints\": null\r\n2020-09-04T17:57:21.9903007Z  },\r\n2020-09-04T17:57:21.9903105Z  {\r\n2020-09-04T17:57:21.9903208Z   \"action\": \"publish\",\r\n2020-09-04T17:57:21.9903319Z   \"type\": \"dataset\",\r\n2020-09-04T17:57:21.9903424Z   \"target\": \"target\",\r\n2020-09-04T17:57:21.9903522Z   \"refspec\": \"refs/heads/master:refs/heads/master\",\r\n2020-09-04T17:57:21.9903631Z   \"status\": \"ok\",\r\n2020-09-04T17:57:21.9903749Z   \"refds\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj\",\r\n2020-09-04T17:57:21.9903884Z   \"path\": \"/crippledfs/datalad_temp_test_push_subds_no_recursionauhdo5sj/sub m\",\r\n2020-09-04T17:57:21.9904011Z   \"operations\": [\r\n2020-09-04T17:57:21.9904246Z    \"new-branch\"\r\n2020-09-04T17:57:21.9904353Z   ],\r\n2020-09-04T17:57:21.9904621Z   \"message\": \"refs/heads/master->target:refs/heads/master [new branch]\",\r\n2020-09-04T17:57:21.9904727Z   \"hints\": null\r\n2020-09-04T17:57:21.9904827Z  }\r\n2020-09-04T17:57:21.9904927Z ]\r\n```\r\n</details>", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4870/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4870/timeline", "performed_via_github_app": null}