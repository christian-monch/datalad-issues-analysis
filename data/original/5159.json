{"url": "https://api.github.com/repos/datalad/datalad/issues/5159", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5159/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5159/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5159/events", "html_url": "https://github.com/datalad/datalad/issues/5159", "id": 743285080, "node_id": "MDU6SXNzdWU3NDMyODUwODA=", "number": 5159, "title": "explicit `gc --prune=now`?", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778592, "node_id": "MDU6TGFiZWw2Mzc3ODU5Mg==", "url": "https://api.github.com/repos/datalad/datalad/labels/enhancement", "name": "enhancement", "color": "0052cc", "default": true, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-11-15T15:54:16Z", "updated_at": "2020-12-07T21:52:12Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "`git` might indeed be doing `gc` when it feels it is the right time, but as my recent fiasco showed (ran out of inodes, running `gc --prune now` freed up about 20% of all available),  in scenarios with many subdatasets it might be of great benefit not to wait.\r\n\r\nSure thing it could be added/duplicated in corresponding \"crawling/update\" scripts but I wonder if we should provide at least some convenience.  E.g. could be some `datalad.runtime.gc=auto|save` with \"auto\" leaving it to git, and `save` to trigger it upon each save so no (rarely accessed) subdataset is left with garbage laying around.\r\n\r\nOr may be we should just add an option (or just document?) to \"proxy\" adjustment of `gc.autoPackLimit` to become such that `git gc --auto` kicks in more often?  what would be a good number?  (I have not tested though if it would be as as good of an effect as `gc --prune=now`)\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5159/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5159/timeline", "performed_via_github_app": null}