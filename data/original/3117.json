{"url": "https://api.github.com/repos/datalad/datalad/issues/3117", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3117/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3117/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3117/events", "html_url": "https://github.com/datalad/datalad/issues/3117", "id": 397927881, "node_id": "MDU6SXNzdWUzOTc5Mjc4ODE=", "number": 3117, "title": "entrypoints/difficulty building debian pkgs of extensions", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-01-10T17:05:54Z", "updated_at": "2020-01-10T21:49:34Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "we would definitely like to run tests while building debian pkgs of the extensions, but the problem is that extension entry points aren't found. I guess it is due to the fact that pybuild by default runs against \"built\" version, not installed:\r\n```\r\n   dh_auto_build -O--buildsystem=pybuild\r\nI: pybuild base:217: /usr/bin/python3 setup.py build \r\nrunning build\r\nrunning build_py\r\ncreating /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container\r\ncopying datalad_container/__init__.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container\r\ncopying datalad_container/containers_add.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container\r\ncopying datalad_container/containers_list.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container\r\ncopying datalad_container/containers_remove.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container\r\ncopying datalad_container/containers_run.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container\r\ncopying datalad_container/definitions.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container\r\ncopying datalad_container/version.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container\r\ncreating /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/adapters\r\ncopying datalad_container/adapters/__init__.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/adapters\r\ncopying datalad_container/adapters/docker.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/adapters\r\ncreating /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/tests\r\ncopying datalad_container/tests/__init__.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/tests\r\ncopying datalad_container/tests/test_containers.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/tests\r\ncopying datalad_container/tests/test_register.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/tests\r\ncopying datalad_container/tests/test_run.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/tests\r\ncopying datalad_container/tests/utils.py -> /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/tests\r\nsetup.py:40: DeprecationWarning: Due to possible ambiguity, 'convert()' is deprecated. Use 'convert_file()'  or 'convert_text()'.\r\n  long_description = pypandoc.convert(README, 'rst')\r\n   dh_auto_test -O--buildsystem=pybuild\r\nI: pybuild base:217: cd /home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build; python3.7 -m nose -v \r\nFailure: ImportError (cannot import name 'containers_add' from 'datalad.api' (/usr/lib/python3/dist-packages/datalad/api.py)) ... ERROR\r\ndatalad_container.tests.test_register.test_register ... FAIL\r\nFailure: ImportError (cannot import name 'containers_add' from 'datalad.api' (/usr/lib/python3/dist-packages/datalad/api.py)) ... ERROR\r\n\r\n======================================================================\r\nERROR: Failure: ImportError (cannot import name 'containers_add' from 'datalad.api' (/usr/lib/python3/dist-packages/datalad/api.py))\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/nose/failure.py\", line 39, in runTest\r\n    raise self.exc_val.with_traceback(self.tb)\r\n  File \"/usr/lib/python3/dist-packages/nose/loader.py\", line 417, in loadTestsFromName\r\n    addr.filename, addr.module)\r\n  File \"/usr/lib/python3/dist-packages/nose/importer.py\", line 47, in importFromPath\r\n    return self.importFromDir(dir_path, fqname)\r\n  File \"/usr/lib/python3/dist-packages/nose/importer.py\", line 94, in importFromDir\r\n    mod = load_module(part_fqname, fh, filename, desc)\r\n  File \"/usr/lib/python3.7/imp.py\", line 234, in load_module\r\n    return load_source(name, filename, file)\r\n  File \"/usr/lib/python3.7/imp.py\", line 171, in load_source\r\n    module = _load(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 696, in _load\r\n  File \"<frozen importlib._bootstrap>\", line 677, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 728, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"/home/yoh/proj/datalad/build-area/datalad-container-0.2.2/.pybuild/cpython3_3.7_datalad-container/build/datalad_container/tests/test_containers.py\", line 5, in <module>\r\n    from datalad.api import containers_add\r\nImportError: cannot import name 'containers_add' from 'datalad.api' (/usr/lib/python3/dist-packages/datalad/api.py)\r\n\r\n```\r\nnot yet sure what would be the best way to overcome", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3117/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3117/timeline", "performed_via_github_app": null}