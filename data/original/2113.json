{"url": "https://api.github.com/repos/datalad/datalad/issues/2113", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2113/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2113/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2113/events", "html_url": "https://github.com/datalad/datalad/issues/2113", "id": 292941062, "node_id": "MDU6SXNzdWUyOTI5NDEwNjI=", "number": 2113, "title": "failed to create second sub dataset in direct mode ", "user": {"login": "daisyburr", "id": 26144925, "node_id": "MDQ6VXNlcjI2MTQ0OTI1", "avatar_url": "https://avatars.githubusercontent.com/u/26144925?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daisyburr", "html_url": "https://github.com/daisyburr", "followers_url": "https://api.github.com/users/daisyburr/followers", "following_url": "https://api.github.com/users/daisyburr/following{/other_user}", "gists_url": "https://api.github.com/users/daisyburr/gists{/gist_id}", "starred_url": "https://api.github.com/users/daisyburr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daisyburr/subscriptions", "organizations_url": "https://api.github.com/users/daisyburr/orgs", "repos_url": "https://api.github.com/users/daisyburr/repos", "events_url": "https://api.github.com/users/daisyburr/events{/privacy}", "received_events_url": "https://api.github.com/users/daisyburr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-01-30T21:19:38Z", "updated_at": "2019-03-03T18:32:12Z", "closed_at": "2019-03-03T18:32:12Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### What is the problem? \r\n@yarikoptic  was confused/surprised that the 2nd invocation failed whenever first one succeeded\r\nthe dataset is in direct mode due to absent posix permissions handling\r\n\r\n```shell\r\ndburr@discovery 1036_iaps]$ cat .git/config\r\n[core]\r\n\trepositoryformatversion = 0\r\n\tfilemode = false\r\n\tbare = False\r\n\tlogallrefupdates = true\r\n\tsymlinks = false\r\n[remote \"origin\"]\r\n\turl = ...\r\n\tfetch = +refs/heads/*:refs/remotes/origin/*\r\n\tannex-uuid = ed4f8a31-4eea-4030-8a46-eb6cbe76ad3d\r\n[branch \"master\"]\r\n\tremote = origin\r\n\tmerge = refs/heads/master\r\n[annex]\r\n\tuuid = a95e8883-5f65-43b4-8056-3e60312ed4b5\r\n\tcrippledfilesystem = true\r\n\tversion = 5\r\n\tdirect = true\r\n[submodule \"derivatives/fmriprep\"]\r\n\turl = \r\n\tactive = true\r\n```\r\n\r\n```shell\r\n[dburr@discovery 1036_iaps]$ datalad create -d . derivatives/fmriprep\r\n[INFO   ] Creating a new annex repo at /dartfs/rc/lab/D/DBIC/cosanlab/Data/1036_IAPS/1036_iaps/derivatives/fmriprep\r\nadd(ok): derivatives/fmriprep (dataset) [added new subdataset]\r\nadd(notneeded): derivatives/fmriprep (dataset) [nothing to add from /dartfs/rc/lab/D/DBIC/cosanlab/Data/1036_IAPS/1036_iaps/derivatives/fmriprep]\r\nadd(notneeded): .gitmodules (file) [already included in the dataset]\r\nsave(ok): /dartfs/rc/lab/D/DBIC/cosanlab/Data/1036_IAPS/1036_iaps (dataset)\r\ncreate(ok): derivatives/fmriprep (dataset)\r\naction summary:\r\n  add (notneeded: 2, ok: 1)\r\n  create (ok: 1)\r\n  save (ok: 1)\r\n[dburr@discovery 1036_iaps]$ datalad create -d . derivatives/^C\r\n[dburr@discovery 1036_iaps]$ datalad create -d . derivatives/analyses\r\n[INFO   ] Creating a new annex repo at /dartfs/rc/lab/D/DBIC/cosanlab/Data/1036_IAPS/1036_iaps/derivatives/analyses\r\n                                                                                                                                  Failed to run ['git', '--work-tree=.', 'diff', '--raw', '-z', '--ignore-submodules=none', '--abbrev=40', 'HEAD', '--'] under '/dartfs/rc/lab/D/DBIC/cosanlab/Data/1036_IAPS/1036_iaps'. Exit code=128. out= err=fatal: This operation must be run in a work tree\r\nfatal: 'git status --porcelain=2' failed in submodule derivatives/fmriprep\r\nfatal: This operation must be run in a work tree\r\nfatal: 'git status --porcelain=2' failed in submodule derivatives/fmriprep\r\n\r\n```\r\n\r\n#### What version of DataLad are you using (run `datalad --version`)? On what operating system (consider running `datalad plugin wtf`)?\r\n0.9.1\r\n\r\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2113/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2113/timeline", "performed_via_github_app": null}