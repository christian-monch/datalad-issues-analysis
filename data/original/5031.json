{"url": "https://api.github.com/repos/datalad/datalad/issues/5031", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5031/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5031/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5031/events", "html_url": "https://github.com/datalad/datalad/issues/5031", "id": 720282878, "node_id": "MDU6SXNzdWU3MjAyODI4Nzg=", "number": 5031, "title": "'getsockname failed: Not a socket' when installing remote dataset via ssh on Windows 10", "user": {"login": "riedelmax", "id": 29626305, "node_id": "MDQ6VXNlcjI5NjI2MzA1", "avatar_url": "https://avatars.githubusercontent.com/u/29626305?v=4", "gravatar_id": "", "url": "https://api.github.com/users/riedelmax", "html_url": "https://github.com/riedelmax", "followers_url": "https://api.github.com/users/riedelmax/followers", "following_url": "https://api.github.com/users/riedelmax/following{/other_user}", "gists_url": "https://api.github.com/users/riedelmax/gists{/gist_id}", "starred_url": "https://api.github.com/users/riedelmax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/riedelmax/subscriptions", "organizations_url": "https://api.github.com/users/riedelmax/orgs", "repos_url": "https://api.github.com/users/riedelmax/repos", "events_url": "https://api.github.com/users/riedelmax/events{/privacy}", "received_events_url": "https://api.github.com/users/riedelmax/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 188141023, "node_id": "MDU6TGFiZWwxODgxNDEwMjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/platform-windows", "name": "platform-windows", "color": "0052cc", "default": false, "description": "Issue concerned with Windows"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2020-10-13T13:50:14Z", "updated_at": "2021-01-06T15:42:22Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "#### What is the problem?\r\nOn Windows 10 `datalad -l debug install -s riedel@<ip-addres>:/home/riedel/data/rhizo` hangs with the last output being `getsockname failed: Not a socket`. Can't even kill the command with ctrl+c, only way is to close the PowerShell window.\r\n\r\nThe output is\r\n```\r\n[DEBUG] Command line args 1st pass. Parsed: Namespace() Unparsed: ['install', '-s', 'riedel@<ip-address>:/home/riedel/data/rhizo']\r\n[DEBUG] Discovering plugins\r\n[DEBUG] Building doc for <class 'datalad.local.subdatasets.Subdatasets'>\r\n[DEBUG] Building doc for <class 'datalad.core.distributed.clone.Clone'>\r\n[DEBUG] Building doc for <class 'datalad.distribution.get.Get'>\r\n[DEBUG] Building doc for <class 'datalad.distribution.install.Install'>\r\n[DEBUG] Parsing known args among ['C:\\\\Users\\\\M.Riedel\\\\Desktop\\\\wurzelsegmentierung\\\\datalad-test\\\\env\\\\Scripts\\\\datalad', '-l', 'debug', 'install', '-s', 'riedel@<ip-address>:/home/riedel/data/rhizo']\r\n[DEBUG] Determined class of decorated function: <class 'datalad.distribution.install.Install'>\r\n[DEBUG] Determined class of decorated function: <class 'datalad.core.distributed.clone.Clone'>\r\n[DEBUG] Determined clone target path from source\r\n[DEBUG] Resolved clone target path to: 'C:\\Users\\M.Riedel\\Desktop\\wurzelsegmentierung\\datalad-test\\data\\rhizo'\r\nClone attempt:   0%|          | 0.00/1.00 [00:00<?, ? Candidate locations/s][DEBUG] Opening SSHConnection(ctrl_path=<<WindowsPath('C++71 chars++c8')>>, sshri=<<SSHRI(hostname++32 chars++el')>>) by calling ['ssh', '-fN', '-o', 'ControlMaster=auto', '-o', 'ControlPersist=15m', '-o', 'ControlPath=C:\\\\Users\\\\M.Riedel\\\\AppData\\\\Local\\\\datalad.org\\\\datalad\\\\Cache\\\\sockets\\\\f70d05c8', 'riedel@<ip-address>']\r\ngetsockname failed: Not a socket\r\n```\r\n\r\n#### What steps will reproduce the problem?\r\n\r\n- Create a datalad dataset on a remote machine `<ip-address>` at `<path>`\r\n- `datalad -l debug install -s <username>@<ip-address>:<path>`\r\n\r\n\r\n#### What version of DataLad are you using (run `datalad --version`)? On what operating system (consider running `datalad wtf`)?\r\nI'm using datalad version 0.13.4 on Windows 10\r\n\r\n```\r\n# WTF\r\n## configuration <SENSITIVE, report disabled by configuration>\r\n## datalad\r\n  - full_version: 0.13.4\r\n  - version: 0.13.4\r\n## dataset\r\n  - id: 345ee3a3-7874-458c-90df-08b2269be0da\r\n  - metadata: <SENSITIVE, report disabled by configuration>\r\n  - path: C:\\Users\\M.Riedel\\Desktop\\wurzelsegmentierung\\datalad-test\r\n  - repo: AnnexRepo\r\n## dependencies\r\n  - annexremote: 1.4.3\r\n  - appdirs: 1.4.4\r\n  - boto: 2.49.0\r\n  - cmd:7z: 16.04\r\n  - cmd:annex: 8.20200815-g335aae266\r\n  - cmd:bundled-git: UNKNOWN\r\n  - cmd:git: 2.16.1.windows.4\r\n  - cmd:system-git: 2.16.1.windows.4\r\n  - cmd:system-ssh: for\r\n  - humanize: 3.0.1\r\n  - iso8601: 0.1.13\r\n  - keyring: 21.4.0\r\n  - keyrings.alt: 4.0.0\r\n  - msgpack: 1.0.0\r\n  - requests: 2.24.0\r\n  - tqdm: 4.50.1\r\n  - wrapt: 1.12.1\r\n## environment\r\n  - PATH: C:\\Users\\M.Riedel\\Desktop\\wurzelsegmentierung\\datalad-test\\env/Scripts;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.2\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.2\\libnvvp;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\libnvvp;C:\\ProgramData\\DockerDesktop\\version-bin;C:\\Program Files\\Docker\\Docker\\Resources\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0\\libnvvp;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v8.0\\libnvvp;C:\\Program Files\\Microsoft MPI\\Bin\\;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files\\dotnet\\;C:\\Program Files\\Git\\cmd;C:\\Program Files (x86)\\GtkSharp\\2.12\\bin;C:\\Program Files\\PuTTY\\;C:\\Program Files (x86)\\Graphviz2.38\\bin;C:\\Program Files\\Inkscape;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Users\\M.Riedel\\cuda_cudnn7\\bin;C:\\Users\\M.Riedel\\opencv\\build\\x64\\vc14\\bin;C:\\Program Files\\cmake_dep\\bin;C:\\Program Files\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\bin;C:\\Program Files\\make;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\Microsoft VS Code\\bin;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NvDLISR;C:\\ProgramData\\chocolatey\\bin;C:\\Program Files\\TortoiseSVN\\bin;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\NVIDIA Corporation\\Nsight Compute 2019.5.0\\;C:\\Program Files\\7-Zip;C:\\Users\\M.Riedel\\Python\\Python38\\Scripts\\;C:\\Users\\M.Riedel\\Python\\Python38\\;C:\\Users\\M.Riedel\\AppData\\Local\\Programs\\Python\\Launcher\\;C:\\Users\\M.Riedel\\AppData\\Local\\Microsoft\\WindowsApps;C:\\texlive\\2017\\bin\\win32;C:\\Program Files\\Microsoft VS Code\\bin;C:\\tools\\neovim\\Neovim\\bin;\r\n## extensions\r\n## git-annex\r\n  - build flags:\r\n    - Assistant\r\n    - Webapp\r\n    - Pairing\r\n    - S3\r\n    - WebDAV\r\n    - TorrentParser\r\n    - Feeds\r\n    - Testsuite\r\n  - dependency versions:\r\n    - aws-0.21.1\r\n    - bloomfilter-2.0.1.0\r\n    - cryptonite-0.25\r\n    - DAV-1.3.4\r\n    - feed-1.2.0.1\r\n    - ghc-8.6.5\r\n    - http-client-0.5.14\r\n    - persistent-sqlite-2.9.3\r\n    - torrent-10000.1.1\r\n    - uuid-1.3.13\r\n    - yesod-1.6.0.1\r\n  - key/value backends:\r\n    - SHA256E\r\n    - SHA256\r\n    - SHA512E\r\n    - SHA512\r\n    - SHA224E\r\n    - SHA224\r\n    - SHA384E\r\n    - SHA384\r\n    - SHA3_256E\r\n    - SHA3_256\r\n    - SHA3_512E\r\n    - SHA3_512\r\n    - SHA3_224E\r\n    - SHA3_224\r\n    - SHA3_384E\r\n    - SHA3_384\r\n    - SKEIN256E\r\n    - SKEIN256\r\n    - SKEIN512E\r\n    - SKEIN512\r\n    - BLAKE2B256E\r\n    - BLAKE2B256\r\n    - BLAKE2B512E\r\n    - BLAKE2B512\r\n    - BLAKE2B160E\r\n    - BLAKE2B160\r\n    - BLAKE2B224E\r\n    - BLAKE2B224\r\n    - BLAKE2B384E\r\n    - BLAKE2B384\r\n    - BLAKE2BP512E\r\n    - BLAKE2BP512\r\n    - BLAKE2S256E\r\n    - BLAKE2S256\r\n    - BLAKE2S160E\r\n    - BLAKE2S160\r\n    - BLAKE2S224E\r\n    - BLAKE2S224\r\n    - BLAKE2SP256E\r\n    - BLAKE2SP256\r\n    - BLAKE2SP224E\r\n    - BLAKE2SP224\r\n    - SHA1E\r\n    - SHA1\r\n    - MD5E\r\n    - MD5\r\n    - WORM\r\n    - URL\r\n    - X*\r\n  - local repository version: 8\r\n  - operating system: mingw32 x86_64\r\n  - remote types:\r\n    - git\r\n    - gcrypt\r\n    - p2p\r\n    - S3\r\n    - bup\r\n    - directory\r\n    - rsync\r\n    - web\r\n    - bittorrent\r\n    - webdav\r\n    - adb\r\n    - tahoe\r\n    - glacier\r\n    - ddar\r\n    - git-lfs\r\n    - hook\r\n    - external\r\n  - supported repository versions:\r\n    - 8\r\n  - upgrade supported from repository versions:\r\n    - 2\r\n    - 3\r\n    - 4\r\n    - 5\r\n    - 6\r\n    - 7\r\n  - version: 8.20200815-g335aae266\r\n## location\r\n  - path: C:\\Users\\M.Riedel\\Desktop\\wurzelsegmentierung\\datalad-test\r\n  - type: dataset\r\n## metadata_extractors\r\n  - annex:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.annex\r\n    - version: None\r\n  - audio:\r\n    - load_error: No module named 'mutagen' [audio.py:<module>:17]\r\n    - module: datalad.metadata.extractors.audio\r\n  - datacite:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datacite\r\n    - version: None\r\n  - datalad_core:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_core\r\n    - version: None\r\n  - datalad_rfc822:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_rfc822\r\n    - version: None\r\n  - exif:\r\n    - load_error: No module named 'exifread' [exif.py:<module>:16]\r\n    - module: datalad.metadata.extractors.exif\r\n  - frictionless_datapackage:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.frictionless_datapackage\r\n    - version: None\r\n  - image:\r\n    - load_error: No module named 'PIL' [image.py:<module>:16]\r\n    - module: datalad.metadata.extractors.image\r\n  - xmp:\r\n    - load_error: No module named 'libxmp' [xmp.py:<module>:20]\r\n    - module: datalad.metadata.extractors.xmp\r\n## python\r\n  - implementation: CPython\r\n  - version: 3.8.5\r\n## system\r\n  - distribution:   10/10.0.19041/SP0/Multiprocessor Free\r\n  - encoding:\r\n    - default: utf-8\r\n    - filesystem: utf-8\r\n    - locale.prefered: cp1252\r\n  - max_path_length: 259\r\n  - name: Windows\r\n  - release: 10\r\n  - type: nt\r\n  - version: 10.0.19041\r\n```\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5031/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5031/timeline", "performed_via_github_app": null}