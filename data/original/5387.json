{"url": "https://api.github.com/repos/datalad/datalad/issues/5387", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5387/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5387/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5387/events", "html_url": "https://github.com/datalad/datalad/issues/5387", "id": 796127573, "node_id": "MDU6SXNzdWU3OTYxMjc1NzM=", "number": 5387, "title": "Failing to find commit and recursively appending to path", "user": {"login": "Shotgunosine", "id": 5289368, "node_id": "MDQ6VXNlcjUyODkzNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/5289368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shotgunosine", "html_url": "https://github.com/Shotgunosine", "followers_url": "https://api.github.com/users/Shotgunosine/followers", "following_url": "https://api.github.com/users/Shotgunosine/following{/other_user}", "gists_url": "https://api.github.com/users/Shotgunosine/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shotgunosine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shotgunosine/subscriptions", "organizations_url": "https://api.github.com/users/Shotgunosine/orgs", "repos_url": "https://api.github.com/users/Shotgunosine/repos", "events_url": "https://api.github.com/users/Shotgunosine/events{/privacy}", "received_events_url": "https://api.github.com/users/Shotgunosine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1782623847, "node_id": "MDU6TGFiZWwxNzgyNjIzODQ3", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-critical", "name": "severity-critical", "color": "ff0000", "default": false, "description": "makes it unusable, causes data loss, introduces security vulnerability"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/75", "html_url": "https://github.com/datalad/datalad/milestone/75", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/75/labels", "id": 5395092, "node_id": "MDk6TWlsZXN0b25lNTM5NTA5Mg==", "number": 75, "title": "0.14.0", "description": "", "creator": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 31, "state": "closed", "created_at": "2020-05-07T17:48:31Z", "updated_at": "2021-08-05T15:29:32Z", "due_on": null, "closed_at": "2021-08-05T15:29:32Z"}, "comments": 13, "created_at": "2021-01-28T15:50:08Z", "updated_at": "2021-02-01T19:59:04Z", "closed_at": "2021-02-01T19:59:03Z", "author_association": "NONE", "active_lock_reason": null, "body": "#### What is the problem?\r\nDatalad is failing to correctly install a superdata set I've created to house fitlins test data and reference results. I'll reply to this issue with the full debug ouptu.\r\n\r\n#### What steps will reproduce the problem?\r\nThe dataset was created with the following commands:\r\n```\r\ndatalad create --description \"Super dataset of test data and expected outputs for FitLins.\" -c text2git fitlins_tests\r\ncd fitlins_tests\r\nmkdir ds003\r\nmodule load webproxy\r\ndatalad install --dataset /data/MBDU/nielsond/dccc2019/fitlins_tests -r -s ///labs/poldrack/ds003_fmriprep /data/MBDU/nielsond/dccc2019/fitlins_tests/ds003/ds003_fmriprep\r\ndatalad siblings -d \"/data/MBDU/nielsond/dccc2019/fitlins_tests/ds003/ds003_fmriprep/sourcedata\" enable -s s3-PRIVATE\r\ncd ds003\r\ndatalad get ds003_fmriprep/sub-0{1,2,3}/func/*_space-MNI152NLin2009cAsym_desc-*.nii.gz \\\r\n                        ds003_fmriprep/sub-0{1,2,3}/func/*_desc-confounds_*.tsv \\\r\n                        ds003_fmriprep/dataset_description.json \\\r\n                        ds003_fmriprep/sub-*/*/*.json\r\ncd ..\r\nmkdir ds003/models\r\ndatalad download-url https://raw.githubusercontent.com/poldracklab/fitlins/master/examples/models/ds000003/models/model-001_smdl.json --dataset /data/MBDU/nielsond/dccc2019/fitlins_tests -m \"add ds003 model\" -O ds003/models/model-001_smdl.json\r\n\r\njob_name=nistats_smooth\r\ndatalad run -m \"run with nistats and isometric smoothing\" \"fitlins ds003/ds003_fmriprep/sourcedata ds003/${job_name}/out dataset -d ds003/ds003_fmriprep/ -m ${PWD}/ds003/models/model-001_smdl.json -w /lscratch/$SLURM_JOB_ID/${job_name}  --participant-label 01 02 03 --space MNI152NLin2009cAsym --estimator nistats  --n-cpus 8 --mem-gb 8 -vv -s 10.0:l1:iso\"\r\n\r\ndatalad create-sibling-osf --title fitlins_tests -s osf --public\r\ndatalad push --to osf\r\n```\r\n\r\nI'm trying to install the dataset with:\r\n`datalad install -r  -s osf://2ynvg/ fitlins_tests`\r\n#### What version of DataLad are you using (run `datalad --version`)? On what operating system (consider running `datalad wtf`)?\r\n```\r\n(/data/MBDU/midla/env) [nielsond@helix test_datalad_downloading]$ datalad wtf\r\n# WTF\r\n## configuration <SENSITIVE, report disabled by configuration>\r\n## credentials \r\n  - keyring: \r\n    - active_backends: \r\n      - PlaintextKeyring with no encyption v.1.0 at /home/nielsond/.local/share/python_keyring/keyring_pass.cfg\r\n    - config_file: /home/nielsond/.local/share/python_keyring/keyringrc.cfg\r\n    - data_root: /home/nielsond/.local/share/python_keyring\r\n## datalad \r\n  - full_version: 0.14.0rc1\r\n  - version: 0.14.0rc1\r\n## dependencies \r\n  - annexremote: 1.4.3\r\n  - appdirs: 1.4.4\r\n  - boto: 2.49.0\r\n  - cmd:7z: 16.02\r\n  - cmd:annex: 8.20201007-g903b2f1\r\n  - cmd:bundled-git: UNKNOWN\r\n  - cmd:git: 2.29.2\r\n  - cmd:system-git: 2.29.2\r\n  - cmd:system-ssh: 8.4p1\r\n  - git: 3.1.3\r\n  - gitdb: 4.0.5\r\n  - humanize: 2.4.0\r\n  - iso8601: 0.1.12\r\n  - keyring: 21.2.1\r\n  - keyrings.alt: 3.4.0\r\n  - msgpack: 1.0.1\r\n  - requests: 2.25.0\r\n  - wrapt: 1.12.1\r\n## environment \r\n  - LANG: en_US.UTF-8\r\n  - LC_ALL: en_US.UTF-8\r\n  - PATH: /data/MBDU/midla/env/bin:/home/nielsond/miniconda3/condabin:/local/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/nielsond/bin\r\n## extensions \r\n  - osf: \r\n    - description: DataLad extension for OSF support\r\n    - entrypoints: \r\n      - datalad_osf.create_sibling_osf.CreateSiblingOSF: \r\n        - class: CreateSiblingOSF\r\n        - load_error: None\r\n        - module: datalad_osf.create_sibling_osf\r\n        - names: \r\n          - create-sibling-osf\r\n          - create_sibling_osf\r\n      - datalad_osf.credentials.OSFCredentials: \r\n        - class: OSFCredentials\r\n        - load_error: None\r\n        - module: datalad_osf.credentials\r\n        - names: \r\n          - osf-credentials\r\n          - osf_credentials\r\n    - load_error: None\r\n    - module: datalad_osf\r\n    - version: 0.2.0\r\n## git-annex \r\n  - build flags: \r\n    - Assistant\r\n    - Webapp\r\n    - Pairing\r\n    - Inotify\r\n    - DBus\r\n    - DesktopNotify\r\n    - TorrentParser\r\n    - MagicMime\r\n    - Feeds\r\n    - Testsuite\r\n    - S3\r\n    - WebDAV\r\n  - dependency versions: \r\n    - aws-0.22\r\n    - bloomfilter-2.0.1.0\r\n    - cryptonite-0.26\r\n    - DAV-1.3.4\r\n    - feed-1.3.0.1\r\n    - ghc-8.8.4\r\n    - http-client-0.6.4.1\r\n    - persistent-sqlite-2.10.6.2\r\n    - torrent-10000.1.1\r\n    - uuid-1.3.13\r\n    - yesod-1.6.1.0\r\n  - key/value backends: \r\n    - SHA256E\r\n    - SHA256\r\n    - SHA512E\r\n    - SHA512\r\n    - SHA224E\r\n    - SHA224\r\n    - SHA384E\r\n    - SHA384\r\n    - SHA3_256E\r\n    - SHA3_256\r\n    - SHA3_512E\r\n    - SHA3_512\r\n    - SHA3_224E\r\n    - SHA3_224\r\n    - SHA3_384E\r\n    - SHA3_384\r\n    - SKEIN256E\r\n    - SKEIN256\r\n    - SKEIN512E\r\n    - SKEIN512\r\n    - BLAKE2B256E\r\n    - BLAKE2B256\r\n    - BLAKE2B512E\r\n    - BLAKE2B512\r\n    - BLAKE2B160E\r\n    - BLAKE2B160\r\n    - BLAKE2B224E\r\n    - BLAKE2B224\r\n    - BLAKE2B384E\r\n    - BLAKE2B384\r\n    - BLAKE2BP512E\r\n    - BLAKE2BP512\r\n    - BLAKE2S256E\r\n    - BLAKE2S256\r\n    - BLAKE2S160E\r\n    - BLAKE2S160\r\n    - BLAKE2S224E\r\n    - BLAKE2S224\r\n    - BLAKE2SP256E\r\n    - BLAKE2SP256\r\n    - BLAKE2SP224E\r\n    - BLAKE2SP224\r\n    - SHA1E\r\n    - SHA1\r\n    - MD5E\r\n    - MD5\r\n    - WORM\r\n    - URL\r\n    - X*\r\n  - operating system: linux x86_64\r\n  - remote types: \r\n    - git\r\n    - gcrypt\r\n    - p2p\r\n    - S3\r\n    - bup\r\n    - directory\r\n    - rsync\r\n    - web\r\n    - bittorrent\r\n    - webdav\r\n    - adb\r\n    - tahoe\r\n    - glacier\r\n    - ddar\r\n    - git-lfs\r\n    - httpalso\r\n    - hook\r\n    - external\r\n  - supported repository versions: \r\n    - 8\r\n  - upgrade supported from repository versions: \r\n    - 0\r\n    - 1\r\n    - 2\r\n    - 3\r\n    - 4\r\n    - 5\r\n    - 6\r\n    - 7\r\n  - version: 8.20201007-g903b2f1\r\n## location \r\n  - path: /gpfs/gsfs11/users/MBDU/nielsond/dccc2019/test_datalad_downloading\r\n  - type: directory\r\n## metadata_extractors \r\n  - annex (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.annex\r\n    - version: None\r\n  - audio (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: No module named 'mutagen' [audio.py:<module>:17]\r\n    - module: datalad.metadata.extractors.audio\r\n  - datacite (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datacite\r\n    - version: None\r\n  - datalad_core (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_core\r\n    - version: None\r\n  - datalad_rfc822 (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_rfc822\r\n    - version: None\r\n  - exif (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: No module named 'exifread' [exif.py:<module>:16]\r\n    - module: datalad.metadata.extractors.exif\r\n  - frictionless_datapackage (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.frictionless_datapackage\r\n    - version: None\r\n  - image (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.image\r\n    - version: None\r\n  - xmp (datalad 0.14.0rc1): \r\n    - distribution: datalad 0.14.0rc1\r\n    - load_error: No module named 'libxmp' [xmp.py:<module>:20]\r\n    - module: datalad.metadata.extractors.xmp\r\n## metadata_indexers \r\n## python \r\n  - implementation: CPython\r\n  - version: 3.7.6\r\n## system \r\n  - distribution: Red Hat Enterprise Linux Server/7.9/Maipo\r\n  - encoding: \r\n    - default: utf-8\r\n    - filesystem: utf-8\r\n    - locale.prefered: UTF-8\r\n  - max_path_length: 309\r\n  - name: Linux\r\n  - release: 3.10.0-1160.11.1.el7.x86_64\r\n  - type: posix\r\n  - version: #1 SMP Mon Nov 30 13:05:31 EST 2020\r\n  ```\r\n", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5387/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5387/timeline", "performed_via_github_app": null}