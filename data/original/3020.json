{"url": "https://api.github.com/repos/datalad/datalad/issues/3020", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3020/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3020/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3020/events", "html_url": "https://github.com/datalad/datalad/issues/3020", "id": 385109739, "node_id": "MDU6SXNzdWUzODUxMDk3Mzk=", "number": 3020, "title": "add annex sizes information to `annex` metadata", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778592, "node_id": "MDU6TGFiZWw2Mzc3ODU5Mg==", "url": "https://api.github.com/repos/datalad/datalad/labels/enhancement", "name": "enhancement", "color": "0052cc", "default": true, "description": ""}, {"id": 700886055, "node_id": "MDU6TGFiZWw3MDA4ODYwNTU=", "url": "https://api.github.com/repos/datalad/datalad/labels/metadata", "name": "metadata", "color": "0052cc", "default": false, "description": ""}, {"id": 1361506618, "node_id": "MDU6TGFiZWwxMzYxNTA2NjE4", "url": "https://api.github.com/repos/datalad/datalad/labels/fixed-in-metalad", "name": "fixed-in-metalad", "color": "0e8a16", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-11-28T05:37:55Z", "updated_at": "2020-01-12T09:17:00Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Could be quite useful to know how big the dataset is without installing it.\r\n1. We could easily include output of the `git annex info` call, such as (removing remotes here):\r\n```shell\r\n$> git annex info --json --bytes | jq .\r\n{\r\n  \"local annex size\": \"12795203\",\r\n  \"size of annexed files in working tree\": \"39538339451\",\r\n...\r\n  \"backend usage\": {\r\n    \"SHA256E\": 1445\r\n  },\r\n  \"local annex keys\": 3,\r\n  \"available local disk space\": \"101327969728 (+1000000 reserved)\",\r\n  \"annexed files in working tree\": 1445,\r\n}\r\n```\r\n\r\n2. Most frequently of interest is the size of the dataset and all of its subdatasts, so we should aggregate that information, either during metadata aggregation, or \"dynamically\" somehow since all that information about data sizes in the subdatasets would be available\r\n\r\n3. This could be of relevance to https://github.com/datalad/datalad/issues/2403 . ATM web ui does similar sizes extraction, but does it also per each file/directory.  If we maintain size information also per each file (for annexed - typically could be extracted from key which we already carry; for git - we would need it anyways) so it could be used to estimate also directories sizes \"on the fly\" (unless we eventually start providing metadata at directory level, which is feasible in many cases, such as subject info in BIDS per sub- directory)", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3020/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3020/timeline", "performed_via_github_app": null}