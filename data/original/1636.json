{"url": "https://api.github.com/repos/datalad/datalad/issues/1636", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1636/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1636/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1636/events", "html_url": "https://github.com/datalad/datalad/issues/1636", "id": 242474197, "node_id": "MDU6SXNzdWUyNDI0NzQxOTc=", "number": 1636, "title": "dataset backend must go to .gitattributes and not .git/config", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 447185719, "node_id": "MDU6TGFiZWw0NDcxODU3MTk=", "url": "https://api.github.com/repos/datalad/datalad/labels/regression", "name": "regression", "color": "fc8387", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/43", "html_url": "https://github.com/datalad/datalad/milestone/43", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/43/labels", "id": 2670140, "node_id": "MDk6TWlsZXN0b25lMjY3MDE0MA==", "number": 43, "title": "Release 0.7.0", "description": "", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2017-07-31T01:55:24Z", "updated_at": "2017-09-08T13:30:49Z", "due_on": "2017-07-31T07:00:00Z", "closed_at": "2017-09-08T13:30:49Z"}, "comments": 0, "created_at": "2017-07-12T18:32:22Z", "updated_at": "2017-07-31T02:01:40Z", "closed_at": "2017-07-14T15:49:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "It used to work like that but now discovered that behavior changed (at least in 0.7.0 and present in master).\r\n.git/config will not be shared across siblings, so whenever I clone that repo, in the clone files will be added to another backend\r\n\r\n```\r\n$> datalad create --annex-backend=MD5E /tmp/test-backend \r\n[INFO   ] Creating a new annex repo at /tmp/test-backend \r\ncreate(ok): /tmp/test-backend (dataset)                                                                                                                                                                                                       \r\n(dev) 2 27185.....................................:Wed 12 Jul 2017 02:28:59 PM EDT:.\r\n(git)hopa:~datalad/datalad-master[master]git\r\n$> ls -lta /tmp/test-backend   \r\ntotal 316\r\ndrwx------   9 yoh  yoh    4096 Jul 12 14:28 .git/\r\ndrwxrwxrwt 139 root root 307200 Jul 12 14:28 ../\r\ndrwx------   2 yoh  yoh    4096 Jul 12 14:28 .datalad/\r\ndrwx------   4 yoh  yoh    4096 Jul 12 14:28 ./\r\n(dev) 2 27186.....................................:Wed 12 Jul 2017 02:29:07 PM EDT:.\r\n(git)hopa:~datalad/datalad-master[master]git\r\n$> cat /tmp/test-backend/.git/config \r\n[core]\r\n\trepositoryformatversion = 0\r\n\tfilemode = true\r\n\tbare = false\r\n\tlogallrefupdates = true\r\n[annex]\r\n\tuuid = 203b481c-7f25-465c-95fa-eacc94dd3de3\r\n\tversion = 5\r\n\tbackends = MD5E\r\n\r\n\r\n$> datalad install -s /tmp/test-backend/ /tmp/test-backend2\r\n[INFO   ] Cloning dataset from '/tmp/test-backend/' (trying 1 location candidate(s)) to '/tmp/test-backend2' \r\ninstall(ok): /tmp/test-backend2 (dataset)\r\n\r\n$> cat /tmp/test-backend2/.git/config \r\n[core]\r\n\trepositoryformatversion = 0\r\n\tfilemode = true\r\n\tbare = false\r\n\tlogallrefupdates = true\r\n[remote \"origin\"]\r\n\turl = /tmp/test-backend/\r\n\tfetch = +refs/heads/*:refs/remotes/origin/*\r\n\tannex-uuid = 203b481c-7f25-465c-95fa-eacc94dd3de3\r\n[branch \"git-annex\"]\r\n\tremote = origin\r\n\tmerge = refs/heads/git-annex\r\n[annex]\r\n\tuuid = c13e80c5-c6e3-4db2-9c28-968beb35ca1a\r\n\tversion = 5\r\n\r\n$> echo 123 > /tmp/test-backend2/124        \r\n\r\n$> datalad add /tmp/test-backend2/124\r\nadd(ok): /tmp/test-backend2/124 (file)                                                                                                                                                                                                        \r\nsave(ok): /tmp/test-backend2 (dataset)\r\naction summary:\r\n  add (ok: 1)\r\n  save (ok: 1)\r\n\r\n$> ls -l /tmp/test-backend2/124\r\nlrwxrwxrwx 1 yoh yoh 178 Jul 12 14:31 /tmp/test-backend2/124 -> .git/annex/objects/G6/qW/SHA256E-s4--181210f8f9c779c26da1d9b2075bde0127302ee0e3fca38c9a83f5b1dd8e5d3b/SHA256E-s4--181210f8f9c779c26da1d9b2075bde0127302ee0e3fca38c9a83f5b1dd8e5d3b\r\n```\r\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1636/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1636/timeline", "performed_via_github_app": null}