{"url": "https://api.github.com/repos/datalad/datalad/issues/4284", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4284/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4284/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4284/events", "html_url": "https://github.com/datalad/datalad/issues/4284", "id": 579927522, "node_id": "MDU6SXNzdWU1Nzk5Mjc1MjI=", "number": 4284, "title": "avoid multiple login prompts by git-annex-remote-datalad  ", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/65", "html_url": "https://github.com/datalad/datalad/milestone/65", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/65/labels", "id": 4992705, "node_id": "MDk6TWlsZXN0b25lNDk5MjcwNQ==", "number": 65, "title": "0.12.x", "description": null, "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2020-01-09T22:01:43Z", "updated_at": "2021-01-06T14:55:51Z", "due_on": null, "closed_at": "2021-01-06T14:55:51Z"}, "comments": 1, "created_at": "2020-03-12T13:09:53Z", "updated_at": "2020-03-18T14:40:57Z", "closed_at": "2020-03-18T14:40:56Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "ATM, an initial attempt to get (by default parallelized with git-annex) content provided via our special remote results in multitude \"parallel\" login prompts bringing chaos etc. E.g.\r\n\r\n```shell\r\n$> datalad install https://github.com/conpdatasets/preventad-open\r\n[INFO   ]   Remote origin not usable by git-annex; setting annex-ignore                                          \r\ninstall(ok): /tmp/preventad-open (dataset)                                                                       \r\ndatalad install https://github.com/conpdatasets/preventad-open  10.86s user 2.27s system 57% cpu 22.764 total\r\n\r\n$> datalad -C preventad-open get  1004359                \r\nTotal:   0%|                                                                          | 0.00/631M [00:00<?, ?B/s]You need to authenticate with 'loris-prevent-ad' credentials. https://openpreventad.loris.ca/api/v0.0.3-dev/login provides information on how to gain access\r\nuser: You need to authenticate with 'loris-prevent-ad' credentials. https://openpreventad.loris.ca/api/v0.0.3-dev/login provides information on how to gain access\r\nuser: You need to authenticate with 'loris-prevent-ad' credentials. https://openpreventad.loris.ca/api/v0.0.3-dev/login provides information on how to gain access\r\nuser: You need to authenticate with 'loris-prevent-ad' credentials. https://openpreventad.loris.ca/api/v0.0.3-dev/login provides information on how to gain access\r\nuser: You need to authenticate with 'loris-prevent-ad' credentials. https://openpreventad.loris.ca/api/v0.0.3-dev/login provides information on how to gain access\r\nuser: You need to authenticate with 'loris-prevent-ad' credentials. https://openpreventad.loris.ca/api/v0.0.3-dev/login provides information on how to gain access\r\nuser: You need to authenticate with 'loris-prevent-ad' credentials. https://openpreventad.loris.ca/api/v0.0.3-dev/login provides information on how to gain access\r\nuser: You need to authenticate with 'loris-prevent-ad' credentials. https://openpreventad.loris.ca/api/v0.0.3-dev/login provides information on how to gain access\r\nuser: \r\n\r\n```\r\n\r\nI think it could be easily avoided by locking, similarly to how we already do in git-annex-remote-datalad-archives special remote to avoid \"parallel\" refetching of the same tarball.  Probably locking could be done at the level of the Credential class level itself for any interaction with it, but we would need to check that a typical operation is \"atomic\".", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4284/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4284/timeline", "performed_via_github_app": null}