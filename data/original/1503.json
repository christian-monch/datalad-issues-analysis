{"url": "https://api.github.com/repos/datalad/datalad/issues/1503", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1503/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1503/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1503/events", "html_url": "https://github.com/datalad/datalad/issues/1503", "id": 227051042, "node_id": "MDU6SXNzdWUyMjcwNTEwNDI=", "number": 1503, "title": ".git/index.lock': File exists  crashes", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2017-05-08T13:46:24Z", "updated_at": "2018-04-06T20:10:15Z", "closed_at": "2018-04-06T20:10:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As reported in #1455 but also encountered in the wild right now but possibly a different manifestation:\r\n```\r\n[INFO   ] Need to download 1.1 MB from http://fcp-indi.s3.amazonaws.com/data/Projects/CORR/JHU-preproc-connectomes/cpacv0392/ANT_nff_nsc_gsr_hox/IPCAS_0025502_session_1_correlation.graphml?versionId=null. No progress indication will be reported \r\n[ERROR  ] Failed to run ['git', '-c', 'receive.autogc=0', '-c', 'gc.auto=0', 'add', '--dry-run', '-N', '--ignore-missing', '--verbose', '.datalad/crawl/versions/master.json'] under '/mnt/btrfs/datasets/datalad/crawl-misc/indi/corr/JHU-preproc-connectomes'. Exit code=128. out= err=fatal: Unable to create '/mnt/btrfs/datasets/datalad/crawl-misc/indi/corr/JHU-preproc-connectomes/.git/index.lock': File exists.\r\n| \r\n| Another git process seems to be running in this repository, e.g.\r\n| an editor opened by 'git commit'. Please make sure all processes\r\n| are terminated then try again. If it still fails, a git process\r\n| may have crashed in this repository earlier:\r\n| remove the file manually to continue.\r\n|  \r\nfatal: Unable to create '/mnt/btrfs/datasets/datalad/crawl-misc/indi/corr/JHU-preproc-connectomes/.git/index.lock': File exists.\r\n\r\nAnother git process seems to be running in this repository, e.g.\r\nan editor opened by 'git commit'. Please make sure all processes\r\nare terminated then try again. If it still fails, a git process\r\nmay have crashed in this repository earlier:\r\nremove the file manually to continue.\r\ndatalad crawl  5343.94s user 5659.52s system 32% cpu 9:23:21.65 total\r\nneurodebian has logged off pts/26 from c-76-24-253-1.                                                                                             \r\n\r\n$> ls -ld /mnt/btrfs/datasets/datalad/crawl-misc/indi/corr/JHU-preproc-connectomes/.git/index.lock\r\nls: cannot access /mnt/btrfs/datasets/datalad/crawl-misc/indi/corr/JHU-preproc-connectomes/.git/index.lock: No such file or directory\r\n```\r\n\r\nI think at least for this case which could come from some race condition or someone running quickly some command (git status?) outside of the datalad process, we could easily workaround by doing few multiple attempts to acquire the lock if that is happening during git.Repo construction (dunno yet when happened, will rerun)", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1503/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1503/timeline", "performed_via_github_app": null}