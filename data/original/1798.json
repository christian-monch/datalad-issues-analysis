{"url": "https://api.github.com/repos/datalad/datalad/issues/1798", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1798/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1798/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1798/events", "html_url": "https://github.com/datalad/datalad/issues/1798", "id": 255558409, "node_id": "MDU6SXNzdWUyNTU1NTg0MDk=", "number": 1798, "title": "How to add things to git instead of annex?", "user": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 526935563, "node_id": "MDU6TGFiZWw1MjY5MzU1NjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/feedback-desired", "name": "feedback-desired", "color": "fbca04", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2017-09-06T10:39:25Z", "updated_at": "2018-10-02T18:40:48Z", "closed_at": "2018-10-02T18:40:48Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Our current approach doesn't work very well. Except for special cases (like `datalad create`) where we write to `.gitattributes`, the general approach is to distinguish between `git-add` and `git-annex-add` if we want to add a certain file to git.\r\nThis doesn't work with V6. Even if we successfully added sth to git this way, this is ignored later on when possible changes are made to that file and it needs to be staged again. There are several ways for such a file to end up in annex later on. As far as I'm aware a distinction entirely based on `.gitattributes` works well in V5 (direct and indirect mode) and V6. This suggests to do it this way only (RF everything involving `to-git`). But then we probably end up in a mess if we continue to allow for adding single files to git, since we then need to keep track, what is addressed by any pattern in `.gitattributes` already and figure out conflicts or redundant entries. An alternative would be to stop supporting single files being added to git.\r\nIs there another solution (to that kind of issues when switching to a pure `.gitattributes` approach) you can think of?\r\n\r\nRelated question: Do we have any clue how to move sth. from annex to git and making sure it's not annex'ed again due to `.gitattributes`?\r\nHow about the opposite direction?\r\n\r\nWhat about moving/renaming files/directories? Do we want to consider any kind of magic or aid to possibly adapt `.gitattributes`? Or are we just saying: \"You messed it up, clean it!\"\r\n\r\nWhat are your thoughts on the matter, @yarikoptic , @mih ?\r\n\r\nFTR: Somewhat related issues:\r\n#1651, #1597, #1021, #358, #1462\r\n\r\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1798/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1798/timeline", "performed_via_github_app": null}