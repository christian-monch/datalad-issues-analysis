{"url": "https://api.github.com/repos/datalad/datalad/issues/5806", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5806/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5806/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5806/events", "html_url": "https://github.com/datalad/datalad/issues/5806", "id": 950580464, "node_id": "MDU6SXNzdWU5NTA1ODA0NjQ=", "number": 5806, "title": "Testing on Windows - non-existent path?", "user": {"login": "adswa", "id": 29738718, "node_id": "MDQ6VXNlcjI5NzM4NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/29738718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adswa", "html_url": "https://github.com/adswa", "followers_url": "https://api.github.com/users/adswa/followers", "following_url": "https://api.github.com/users/adswa/following{/other_user}", "gists_url": "https://api.github.com/users/adswa/gists{/gist_id}", "starred_url": "https://api.github.com/users/adswa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adswa/subscriptions", "organizations_url": "https://api.github.com/users/adswa/orgs", "repos_url": "https://api.github.com/users/adswa/repos", "events_url": "https://api.github.com/users/adswa/events{/privacy}", "received_events_url": "https://api.github.com/users/adswa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-07-22T11:56:57Z", "updated_at": "2021-08-02T12:33:30Z", "closed_at": "2021-08-02T12:33:29Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "I tried to run tests on our shared Windows box, but I can't get the tests to run. I am using an Anaconda prompt, with an editable install of today's master. Initially, I thought I would just be doing the testcall wrong. But it worked with the previously installed 0.13.5, and stopped working after a git pull to a recent master. Have you seen this before, @mih or @yarikoptic , or does anyone spot what I may be doing wrong?\r\n\r\nHere is what I am seeing:\r\n```\r\n\r\n(base) C:\\Users\\datalads\\repos\\datalad>python -m nose --traverse-namespace -a -v datalad\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\n  File \"C:\\Users\\datalads\\miniconda3\\lib\\multiprocessing\\spawn.py\", line 116, in spawn_main\r\n    exitcode = _main(fd, parent_sentinel)\r\n  File \"C:\\Users\\datalads\\miniconda3\\lib\\multiprocessing\\spawn.py\", line 126, in _main\r\n    self = reduction.pickle.load(from_parent)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\__init__.py\", line 50, in <module>\r\n    from .log import lgr\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\log.py\", line 574, in <module>\r\n    lgr = LoggerHelper().get_initialized_logger()\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\log.py\", line 555, in get_initialized_logger\r\n    ColorFormatter(use_color=use_color,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\log.py\", line 154, in __init__\r\n    msg = colors.format_msg(self._get_format(log_name, log_pid),\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\ansi_colors.py\", line 64, in format_msg\r\n    if color_enabled() and use_color:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\ansi_colors.py\", line 57, in color_enabled\r\n    ui_color = cfg.obtain('datalad.ui.color')\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\config.py\", line 489, in obtain\r\n    from datalad.interface.common_cfg import definitions as cfg_defs\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\common_cfg.py\", line 525, in <module>\r\n    compute_cfg_defaults()\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\common_cfg.py\", line 522, in compute_cfg_defaults\r\n    value['default'] = def_fn()\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\common_cfg.py\", line 105, in <lambda>\r\n    'default_fn': lambda: dirs.user_cache_dir,\r\n  File \"C:\\Users\\datalads\\miniconda3\\lib\\site-packages\\appdirs.py\", line 439, in user_cache_dir\r\n    return user_cache_dir(self.appname, self.appauthor,\r\n  File \"C:\\Users\\datalads\\miniconda3\\lib\\site-packages\\appdirs.py\", line 293, in user_cache_dir\r\n    path = os.path.normpath(_get_win_folder(\"CSIDL_LOCAL_APPDATA\"))\r\n  File \"C:\\Users\\datalads\\miniconda3\\lib\\site-packages\\appdirs.py\", line 481, in _get_win_folder_with_pywin32\r\n    dir = shell.SHGetFolderPath(0, getattr(shellcon, csidl_name), 0, 0)\r\npywintypes.com_error: (-2147024893, 'Das System kann den angegebenen Pfad nicht finden.', None, None)\r\n\r\n----------------------------------------------------------------------\r\nRan 0 tests in 7.502s\r\n\r\nOK\r\n\r\n```\r\n\r\nFunnily enough, it worked fine in the previously installed 0.13.5 version of datalad (started, and CTRL-C'd it shortly afterwards):\r\n\r\n```\r\n\r\n(base) C:\\Users\\datalads\\repos\\datalad>python -m nose -s -v --traverse-namespace .\r\nFailure: SkipTest () ... SKIP\r\ndatalad.cmdline.tests.test_helpers.test_strip_arg_from_argv ... ok\r\ndatalad.cmdline.tests.test_helpers.test_get_repo_instance_annex ... Versions: annexremote=1.2.1 appdirs=1.4.4 boto=2.49.0 cmd:7z=19.00 cmd:annex=8.20201008-g7e24b2587 cmd:bundled-git=UNKNOWN cmd:git=2.29.2.windows.1 cmd:system-git=2.29.2.windows.1 cmd:system-ssh=for exifread=2.1.2 humanize=3.1.0 iso8601=0.1.13 keyring=21.4.0 keyrings.alt=3.1 msgpack=1.0.0 mutagen=1.41.1 patoolib=1.12 requests=2.23.0 tqdm=4.46.0 wrapt=1.12.1\r\nObscure filename: str=b\";&%b5{}'.datc\" repr=\";&%b5{}'.datc\"\r\nEncodings: default='utf-8' filesystem='utf-8' locale.prefered='cp1252'\r\nEnvironment: PATH='C:\\\\Users\\\\datalads\\\\miniconda3;C:\\\\Users\\\\datalads\\\\miniconda3\\\\Library\\\\mingw-w64\\\\bin;C:\\\\Users\\\\datalads\\\\miniconda3\\\\Library\\\\usr\\\\bin;C:\\\\Users\\\\datalads\\\\miniconda3\\\\Library\\\\bin;C:\\\\Users\\\\datalads\\\\miniconda3\\\\Scripts;C:\\\\Users\\\\datalads\\\\miniconda3\\\\bin;C:\\\\Users\\\\datalads\\\\miniconda3\\\\condabin;C:\\\\Program Files (x86)\\\\Intel\\\\Intel(R) Management Engine Components\\\\iCLS;C:\\\\Program Files\\\\Intel\\\\Intel(R) Management Engine Components\\\\iCLS;C:\\\\WINDOWS\\\\system32;C:\\\\WINDOWS;C:\\\\WINDOWS\\\\System32\\\\Wbem;C:\\\\WINDOWS\\\\System32\\\\WindowsPowerShell\\\\v1.0;C:\\\\WINDOWS\\\\System32\\\\OpenSSH;C:\\\\Program Files (x86)\\\\Intel\\\\Intel(R) Management Engine Components\\\\DAL;C:\\\\Program Files\\\\Intel\\\\Intel(R) Management Engine Components\\\\DAL;C:\\\\Program Files (x86)\\\\Intel\\\\Intel(R) Management Engine Components\\\\IPT;C:\\\\Program Files\\\\Intel\\\\Intel(R) Management Engine Components\\\\IPT;C:\\\\Program Files\\\\Git\\\\cmd;C:\\\\Users\\\\datalads\\\\miniconda3;C:\\\\Users\\\\datalads\\\\miniconda3\\\\Library\\\\mingw-w64\\\\bin;C:\\\\Users\\\\datalads\\\\miniconda3\\\\Library\\\\usr\\\\bin;C:\\\\Users\\\\datalads\\\\miniconda3\\\\Library\\\\bin;C:\\\\Users\\\\datalads\\\\miniconda3\\\\Scripts;C:\\\\Users\\\\datalads\\\\AppData\\\\Local\\\\Microsoft\\\\WindowsApps;.' GIT_CONFIG_PARAMETERS=\"'init.defaultBranch=dl-test-branch'\"\r\n\r\n----------------------------------------------------------------------\r\nRan 3 tests in 6.464s\r\n\r\n```", "closed_by": {"login": "adswa", "id": 29738718, "node_id": "MDQ6VXNlcjI5NzM4NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/29738718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adswa", "html_url": "https://github.com/adswa", "followers_url": "https://api.github.com/users/adswa/followers", "following_url": "https://api.github.com/users/adswa/following{/other_user}", "gists_url": "https://api.github.com/users/adswa/gists{/gist_id}", "starred_url": "https://api.github.com/users/adswa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adswa/subscriptions", "organizations_url": "https://api.github.com/users/adswa/orgs", "repos_url": "https://api.github.com/users/adswa/repos", "events_url": "https://api.github.com/users/adswa/events{/privacy}", "received_events_url": "https://api.github.com/users/adswa/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5806/timeline", "performed_via_github_app": null}