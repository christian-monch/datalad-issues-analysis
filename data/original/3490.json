{"url": "https://api.github.com/repos/datalad/datalad/issues/3490", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3490/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3490/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3490/events", "html_url": "https://github.com/datalad/datalad/issues/3490", "id": 460997468, "node_id": "MDU6SXNzdWU0NjA5OTc0Njg=", "number": 3490, "title": "test_AnnexRepo_status fails while building/testing on conda-forge", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/62", "html_url": "https://github.com/datalad/datalad/milestone/62", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/62/labels", "id": 4443190, "node_id": "MDk6TWlsZXN0b25lNDQ0MzE5MA==", "number": 62, "title": "Release 0.11.6", "description": "", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2019-06-26T13:58:26Z", "updated_at": "2019-08-25T00:36:02Z", "due_on": "2019-07-27T07:00:00Z", "closed_at": "2019-08-25T00:36:02Z"}, "comments": 1, "created_at": "2019-06-26T14:15:06Z", "updated_at": "2019-06-28T14:54:08Z", "closed_at": "2019-06-28T14:54:08Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "0.11.5 build\r\nhttps://dev.azure.com/conda-forge/feedstock-builds/_build/results?buildId=44838\r\n```\r\n======================================================================\r\nFAIL: datalad.support.tests.test_annexrepo.test_AnnexRepo_status\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/conda/feedstock_root/build_artifacts/datalad_1561498363479/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehol/lib/python3.7/site-packages/nose/case.py\", line 197, in runTest\r\n    self.test(*self.arg)\r\n  File \"/home/conda/feedstock_root/build_artifacts/datalad_1561498363479/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehol/lib/python3.7/site-packages/datalad/tests/utils.py\", line 615, in newfunc\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/home/conda/feedstock_root/build_artifacts/datalad_1561498363479/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehol/lib/python3.7/site-packages/datalad/tests/utils.py\", line 615, in newfunc\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/home/conda/feedstock_root/build_artifacts/datalad_1561498363479/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehol/lib/python3.7/site-packages/datalad/support/tests/test_annexrepo.py\", line 2139, in test_AnnexRepo_status\r\n    _test_status(ar)\r\n  File \"/home/conda/feedstock_root/build_artifacts/datalad_1561498363479/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehol/lib/python3.7/site-packages/datalad/support/tests/test_annexrepo.py\", line 1993, in _test_status\r\n    eq_(stat, ar.get_status())\r\nAssertionError: {'untracked': ['fifth', 'sub/third'], 'deleted': [], 'modified': ['first', 'second'], 'added': [], 'type_changed': []} != {'untracked': ['fifth', 'sub/third', 'submod/'], 'deleted': [], 'modified': ['first', 'second'], 'added': [], 'type_changed': []}\r\n```\r\nso something about submodule `submod` appearing in untracked.\r\n\r\n```\r\nVersions: appdirs=1.4.3 boto=2.49.0 cmd:annex=7.20190507-g0c2cc3d cmd:git=2.22.0 cmd:system-git=2.22.0 exifread=2.1.2 git=2.1.11 gitdb=2.0.5 humanize=0.5.1 iso8601=0.1.12 keyring=19.0.2 keyrings.alt=3.1 msgpack=0.6.1 mutagen=1.41.1 patoolib=1.12 requests=2.22.0 six=1.12.0 tqdm=4.32.2 wrapt=1.11.2\r\n```\r\n\r\nso may be new git 2.22.0? updated to 1:2.22.0+next.20190617-1 from experimental, still passed:\r\n\r\n```shell\r\n$> python -m nose -s -v datalad/support/tests/test_annexrepo.py:test_AnnexRepo_status\r\ndatalad.support.tests.test_annexrepo.test_AnnexRepo_status ... ok\r\nVersions: appdirs=1.4.3 boto=2.44.0 cmd:annex=7.20190507+git126-g5d681a3ce-1~ndall+1 cmd:git=2.20.1 cmd:system-git=2.22.0.455.g172b71a6c5 cmd:system-ssh=7.9p1 exifread=2.1.2 git=2.1.11 gitdb=2.0.5 humanize=0.5.1 iso8601=0.1.11 keyring=17.1.1 keyrings.alt=3.1.1 msgpack=0.5.6 mutagen=1.40.0 requests=2.21.0 six=1.12.0 wrapt=1.10.11\r\nObscure filename: str=b' \"\\';a&b&c\\xce\\x94\\xd0\\x99\\xd7\\xa7\\xd9\\x85\\xe0\\xb9\\x97\\xe3\\x81\\x82 `| ' repr=' \"\\';a&b&c\u0394\u0419\u05e7\u0645\u0e57\u3042 `| '\r\nEncodings: default='utf-8' filesystem='utf-8' locale.prefered='UTF-8'\r\nEnvironment: PATH='/home/yoh/proj/datalad/datalad/venvs/dev3/bin:/home/yoh/gocode/bin:/home/yoh/gocode/bin:/home/yoh/bin:/home/yoh/.local/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/snap/bin:/sbin:/usr/sbin:/usr/local/sbin' LANG='en_US.utf8' GIT_PAGER='less --no-init --quit-if-one-screen' GIT_PYTHON_GIT_EXECUTABLE='/usr/lib/git-annex.linux/git'\r\n```\r\nremembered that we are using bundled with annex git, so tried to force system one way and it also passed\r\n```shell\r\n$> DATALAD_USE_DEFAULT_GIT=1 python -m nose -s -v datalad/support/tests/test_annexrepo.py:test_AnnexRepo_status \r\ndatalad.support.tests.test_annexrepo.test_AnnexRepo_status ... ok\r\nVersions: appdirs=1.4.3 boto=2.44.0 cmd:annex=7.20190507+git126-g5d681a3ce-1~ndall+1 cmd:git=2.22.0.455.g172b71a6c5 cmd:system-git=2.22.0.455.g172b71a6c5 cmd:system-ssh=7.9p1 exifread=2.1.2 git=2.1.11 gitdb=2.0.5 humanize=0.5.1 iso8601=0.1.11 keyring=17.1.1 keyrings.alt=3.1.1 msgpack=0.5.6 mutagen=1.40.0 requests=2.21.0 six=1.12.0 wrapt=1.10.11\r\nObscure filename: str=b' \"\\';a&b&c\\xce\\x94\\xd0\\x99\\xd7\\xa7\\xd9\\x85\\xe0\\xb9\\x97\\xe3\\x81\\x82 `| ' repr=' \"\\';a&b&c\u0394\u0419\u05e7\u0645\u0e57\u3042 `| '\r\nEncodings: default='utf-8' filesystem='utf-8' locale.prefered='UTF-8'\r\nEnvironment: PATH='/home/yoh/proj/datalad/datalad/venvs/dev3/bin:/home/yoh/gocode/bin:/home/yoh/gocode/bin:/home/yoh/bin:/home/yoh/.local/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/snap/bin:/sbin:/usr/sbin:/usr/local/sbin' LANG='en_US.utf8' GIT_PAGER='less --no-init --quit-if-one-screen'\r\n\r\n----------------------------------------------------------------------\r\nRan 1 test in 5.045s\r\n```\r\nalso this failure was not observed in #3476 testing against 0.22.0 - https://travis-ci.org/datalad/datalad/builds/550815965?utm_source=github_status&utm_medium=notification \r\nso not yet sure what is the cause for the regression (or some change in conda-forge build env starting to trigger it).\r\n", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3490/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3490/timeline", "performed_via_github_app": null}