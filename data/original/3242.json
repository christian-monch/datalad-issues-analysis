{"url": "https://api.github.com/repos/datalad/datalad/issues/3242", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3242/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3242/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3242/events", "html_url": "https://github.com/datalad/datalad/pull/3242", "id": 422531182, "node_id": "MDExOlB1bGxSZXF1ZXN0MjYyMzAxMDU3", "number": 3242, "title": "ENH: -d^. to point to the top of the current dataset", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 519289523, "node_id": "MDU6TGFiZWw1MTkyODk1MjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/on%20hold%20-%20input%20required", "name": "on hold - input required", "color": "fbca04", "default": false, "description": "Work on this issue cannot proceed until critical feedback was given"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/60", "html_url": "https://github.com/datalad/datalad/milestone/60", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/60/labels", "id": 4073134, "node_id": "MDk6TWlsZXN0b25lNDA3MzEzNA==", "number": 60, "title": "0.11.x", "description": "To collect issues/PRs targetting 0.11.x development line", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2019-02-20T15:10:42Z", "updated_at": "2020-03-06T19:55:16Z", "due_on": null, "closed_at": "2020-03-06T19:55:16Z"}, "comments": 12, "created_at": "2019-03-19T03:48:09Z", "updated_at": "2019-12-13T23:01:50Z", "closed_at": "2019-12-13T23:01:07Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/3242", "html_url": "https://github.com/datalad/datalad/pull/3242", "diff_url": "https://github.com/datalad/datalad/pull/3242.diff", "patch_url": "https://github.com/datalad/datalad/pull/3242.patch"}, "body": "It is often desired to reference current dataset. E.g. to add an existing\r\ndataset as subdataset to the current dataset somewhere not at the top of the\r\ndataset directories tree. Especially in quite nested hierarchies it\r\nbecomes a burden to figure out where is the boundary of the dataset to specify\r\nit in -d option.  -d .  would point to the (not installed, and possibly illegit\r\nsee #3211) subdataset in current directory, whenever actual need is to specify\r\nsmth like -d ../../..  .\r\n\r\nWith -d^. it becomes possible to say \"refer to the current dataset I am in\".\r\n\r\nThe only gotcha I am aware of is that shell might like to use \"^\" as\r\na quick substitution for previous command, that is why I specified it\r\nas -d^., i.e. without space - then seems to work as intended -- running\r\n\"datalad add -d^. ./subds\"  would add subds in current subdirectory to the\r\ndataset without requiring full path in -d.\r\n\r\nDepending on the outcome of #3230 discussion, this change might not be really\r\nneeded, e.g. if default context for operations (including on subdatasets) would\r\nmigrate to be of \"current dataset\".  Otherwise, if -d would be needed to \"bind\"\r\nthe context to current dataset - at least with this helper it would be easy to\r\nunambigously reference current dataset regardless of the position in the\r\ndirectories hierarchy.\r\n\r\nIf you have a better suggestion instead of `^.` - please suggest.  My choice was because we have `^` to point to supermost dataset, thus use it to point to the (very) top. So it kinda made sense to me to point to the top of dataset curdir belongs to with `^.`, and have it on the left because that target path is to the left of curdir (although `.^` probably would have been better for use in shell due to aforementioned gotcha)\r\n\r\n### Instructions\r\n\r\n- [x] **Delete these instructions**. :-)\r\n", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3242/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3242/timeline", "performed_via_github_app": null}