{"url": "https://api.github.com/repos/datalad/datalad/issues/1380", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1380/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1380/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1380/events", "html_url": "https://github.com/datalad/datalad/issues/1380", "id": 214961635, "node_id": "MDU6SXNzdWUyMTQ5NjE2MzU=", "number": 1380, "title": "Fate and scope of \"result summaries\"", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-03-17T10:19:03Z", "updated_at": "2017-05-07T11:26:50Z", "closed_at": "2017-05-07T11:26:50Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Current `master` implementation of `get` provides a result renderer that summarized the results, rather than rendering each result. This is somewhat in conflict with the changes in #1350.\r\n\r\nIn #1350 there is already a slot to enable per-command custom rendering of individual results. However, in order to provide result summaries, we need to collect the results. This contradicts the principle of a generator that relays them upstairs, one by one. Moreover, we do provide the ability to \"transform\" results in arbitrary ways, making it effectively impossible to render the outcome. The latter is not a problem for individual results, as we transform after rendering. But we can only render summaries after aggregation, which has to take place after transformation.\r\n\r\nWe could establish an additional slot of result summary renderer. Not just the custom ones that we had, but for each relevant output format.\r\n\r\n- `json`: no meaningful summary possible if JSON output is desired\r\n- `simple`: aggregate results by status and report how many we get per status\r\n- `tailored`: whatever makes sense and we can think of\r\n- ....\r\n\r\nThe summary would be rendered in the `return_func` wrapper that is wrapping the generator function created in `eval_results`. It would evoke the summary renderer for the desired output format, if:\r\n\r\n- a summary renderer is available\r\n- no `result_xfm` were active\r\n\r\nIn #1350 we force-disable any `result_xfm` from the cmdline API, so this would never prevent being able to render a summary. However, we run commands as a generator for the cmdline, to be able to relay the results as quickly as possible. This implies that we cannot rely on the rendering the `return_func` wrapper. But we have to duplicate this functionally when we unwind the command generator in the cmdline entrypoint.\r\n\r\nHow do you feel about this?", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1380/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1380/timeline", "performed_via_github_app": null}