{"url": "https://api.github.com/repos/datalad/datalad/issues/1192", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1192/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1192/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1192/events", "html_url": "https://github.com/datalad/datalad/issues/1192", "id": 201462323, "node_id": "MDU6SXNzdWUyMDE0NjIzMjM=", "number": 1192, "title": "create-sibling should fail sooner than later when remote host has no annex", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2017-01-18T02:24:31Z", "updated_at": "2017-02-09T12:25:01Z", "closed_at": "2017-02-09T12:25:01Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "We do require git-annex on remote box if publishing git annex repositories, so we could 'git annex init' them there to get uuid.  If we are creating with -r, it just keeps failing for all of them instead of ideally first sensing that annex is not available and quitting without performing any action (so we could rerun it after having annex installed and have no side-effects of partially configured repositories which would not be reconfigured)\r\n\r\nSample error:\r\n```\r\n[INFO   ] Creating target dataset bids/dbic/dbic-animals/derivatives/mriqc at /inbox/BIDS/dbic/dbic-animals/derivatives/mriqc \r\n[ERROR  ] Initialization of remote git annex repository failed at /inbox/BIDS/dbic/dbic-animals/derivatives/mriqc.\r\n| Error: CommandError: command '['ssh', '-o', u'ControlPath=/home/mvdoc/.cache/datalad/sockets/rolando.cns.dartmouth.edu', u'rolando.cns.dartmouth.edu', \"'git'\", \"'-C'\", u\"'/inbox/BIDS/dbic/dbic-animals/derivatives/mriqc'\", \"'annex'\", \"'init'\"]' failed with exitcode 1\r\n| Failed to run ['ssh', '-o', u'ControlPath=/home/mvdoc/.cache/datalad/sockets/rolando.cns.dartmouth.edu', u'rolando.cns.dartmouth.edu', \"'git'\", \"'-C'\", u\"'/inbox/BIDS/dbic/dbic-animals/derivatives/mriqc'\", \"'annex'\", \"'init'\"] under None. Exit code=1. out= err=git: 'annex' is not a git command. See 'git --help'.\r\n|  [cmd.py:run:370]\r\n``", "closed_by": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1192/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1192/timeline", "performed_via_github_app": null}