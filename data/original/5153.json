{"url": "https://api.github.com/repos/datalad/datalad/issues/5153", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5153/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5153/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5153/events", "html_url": "https://github.com/datalad/datalad/issues/5153", "id": 741363958, "node_id": "MDU6SXNzdWU3NDEzNjM5NTg=", "number": 5153, "title": "Why do we have `AnnexRepo.add_urls()`?", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-12T07:47:36Z", "updated_at": "2020-11-12T15:22:47Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "This is what it advertises:\r\n\r\n```\r\n    def add_urls(self, urls, options=None, backend=None, cwd=None,\r\n                 jobs=None,\r\n                 git_options=None, annex_options=None):\r\n        \"\"\"Downloads each url to its own file, which is added to the annex.\r\n\r\n        Parameters\r\n        ----------\r\n        urls: list of str\r\n        options: list, optional\r\n            options to the annex command\r\n        cwd: string, optional\r\n            working directory from within which to invoke git-annex\r\n        \"\"\"\r\n```\r\n\r\nbut we do have `add_url_to_file()` too:\r\n\r\n```\r\n    def add_url_to_file(self, file_, url, options=None, backend=None,\r\n                        batch=False, git_options=None, annex_options=None,\r\n                        unlink_existing=False):\r\n        \"\"\"Add file from url to the annex.\r\n\r\n        Downloads `file` from `url` and add it to the annex.\r\n        If annex knows `file` already,\r\n        records that it can be downloaded from `url`.\r\n\r\n        Note: Consider using the higher-level `download_url` instead.\r\n\r\n        Parameters\r\n        ----------\r\n        file_: str\r\n        url: str\r\n        options: list\r\n            options to the annex command\r\n        batch: bool, optional\r\n            initiate or continue with a batched run of annex addurl, instead of just\r\n            calling a single git annex addurl command\r\n        unlink_existing: bool, optional\r\n            by default crashes if file already exists and is under git.\r\n            With this flag set to True would first remove it.\r\n\r\n        Returns\r\n        -------\r\n        dict\r\n          In batch mode only ATM returns dict representation of json output returned\r\n          by annex\r\n        \"\"\"\r\n```\r\n\r\nwhich seems to be a superset of `add_urls()`. Also `add_urls()` is not used outside the tests. ``add_url_to_file()` is used in:\r\n\r\n- `add_archive_content`\r\n- `download_url`\r\n- `addurls`\r\n\r\nBoth functions score equal on advertising options that are not implemented and just lead to warnings.\r\n\r\nI'd say we should get rid of `AnnexRepo.add_urls()`.\r\n\r\nThis was prompted by the discovery in #5152 that this is pretty much the last annex run function to go through a non-witless execution path.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5153/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5153/timeline", "performed_via_github_app": null}