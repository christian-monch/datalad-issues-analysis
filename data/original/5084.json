{"url": "https://api.github.com/repos/datalad/datalad/issues/5084", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5084/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5084/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5084/events", "html_url": "https://github.com/datalad/datalad/issues/5084", "id": 728656456, "node_id": "MDU6SXNzdWU3Mjg2NTY0NTY=", "number": 5084, "title": "Broken URL/root path handling for main service dataset", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 188141023, "node_id": "MDU6TGFiZWwxODgxNDEwMjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/platform-windows", "name": "platform-windows", "color": "0052cc", "default": false, "description": "Issue concerned with Windows"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-10-24T04:27:59Z", "updated_at": "2020-11-05T09:39:59Z", "closed_at": "2020-11-05T09:39:59Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Revealed by #5080 \r\n\r\n```\r\n======================================================================\r\n1464ERROR: datalad.core.distributed.tests.test_clone.test_clone_datasets_root\r\n1465----------------------------------------------------------------------\r\n1466Traceback (most recent call last):\r\n1467  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n1468    self.test(*self.arg)\r\n1469  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\tests\\utils.py\", line 177, in _wrap_skip_if_no_network\r\n1470    return func(*args, **kwargs)\r\n1471  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\vcr\\cassette.py\", line 100, in __call__\r\n1472    return type(self)(self.cls, args_getter)._execute_function(function, args, kwargs)\r\n1473  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\vcr\\cassette.py\", line 114, in _execute_function\r\n1474    return self._handle_function(fn=handle_function)\r\n1475  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\vcr\\cassette.py\", line 138, in _handle_function\r\n1476    return fn(cassette)\r\n1477  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\vcr\\cassette.py\", line 107, in handle_function\r\n1478    return function(*args, **kwargs)\r\n1479  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\tests\\utils.py\", line 573, in _wrap_with_tree\r\n1480    return t(*(arg + (d,)), **kw)\r\n1481  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\core\\distributed\\tests\\test_clone.py\", line 145, in test_clone_datasets_root\r\n1482    res = clone(\"///\", on_failure='ignore', result_xfm=None, return_type='list')\r\n1483  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 495, in eval_func\r\n1484    return return_func(generator_func)(*args, **kwargs)\r\n1485  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 483, in return_func\r\n1486    results = list(results)\r\n1487  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 414, in generator_func\r\n1488    allkwargs):\r\n1489  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 562, in _process_results\r\n1490    for res in results:\r\n1491  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\core\\distributed\\clone.py\", line 293, in __call__\r\n1492    cfg=None if ds is None else ds.config,\r\n1493  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\core\\distributed\\clone.py\", line 398, in clone_dataset\r\n1494    or get_local_file_url(track_url, compatibility='git') == src \\\r\n1495  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\support\\network.py\", line 947, in get_local_file_url\r\n1496    path = Path(fname).resolve()\r\n1497  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\utils.py\", line 380, in _resolve_without_strict\r\n1498    if strict or self.exists():\r\n1499  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\pathlib.py\", line 1291, in exists\r\n1500    self.stat()\r\n1501  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\pathlib.py\", line 1111, in stat\r\n1502    return self._accessor.stat(self)\r\n1503  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\pathlib.py\", line 371, in wrapped\r\n1504    return strfunc(str(pathobj), *args)\r\n1505OSError: [WinError 123] The filename, directory name, or volume label syntax is incorrect: 'http:\\\\datasets-tests.datalad.org\\\\.git'\r\n\r\n======================================================================\r\n1597ERROR: datalad.distribution.tests.test_install.test_install_datasets_root\r\n1598----------------------------------------------------------------------\r\n1599Traceback (most recent call last):\r\n1600  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n1601    self.test(*self.arg)\r\n1602  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\tests\\utils.py\", line 177, in _wrap_skip_if_no_network\r\n1603    return func(*args, **kwargs)\r\n1604  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\vcr\\cassette.py\", line 100, in __call__\r\n1605    return type(self)(self.cls, args_getter)._execute_function(function, args, kwargs)\r\n1606  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\vcr\\cassette.py\", line 114, in _execute_function\r\n1607    return self._handle_function(fn=handle_function)\r\n1608  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\vcr\\cassette.py\", line 138, in _handle_function\r\n1609    return fn(cassette)\r\n1610  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\vcr\\cassette.py\", line 107, in handle_function\r\n1611    return function(*args, **kwargs)\r\n1612  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\tests\\utils.py\", line 573, in _wrap_with_tree\r\n1613    return t(*(arg + (d,)), **kw)\r\n1614  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\distribution\\tests\\test_install.py\", line 188, in test_install_datasets_root\r\n1615    result = install(\"///\", result_xfm=None, return_type='list')\r\n1616  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 495, in eval_func\r\n1617    return return_func(generator_func)(*args, **kwargs)\r\n1618  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 483, in return_func\r\n1619    results = list(results)\r\n1620  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 414, in generator_func\r\n1621    allkwargs):\r\n1622  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 562, in _process_results\r\n1623    for res in results:\r\n1624  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\distribution\\install.py\", line 249, in __call__\r\n1625    **common_kwargs):\r\n1626  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 414, in generator_func\r\n1627    allkwargs):\r\n1628  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 562, in _process_results\r\n1629    for res in results:\r\n1630  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\distribution\\install.py\", line 369, in __call__\r\n1631    for r in res:\r\n1632  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 414, in generator_func\r\n1633    allkwargs):\r\n1634  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\interface\\utils.py\", line 562, in _process_results\r\n1635    for res in results:\r\n1636  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\core\\distributed\\clone.py\", line 293, in __call__\r\n1637    cfg=None if ds is None else ds.config,\r\n1638  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\core\\distributed\\clone.py\", line 398, in clone_dataset\r\n1639    or get_local_file_url(track_url, compatibility='git') == src \\\r\n1640  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\support\\network.py\", line 947, in get_local_file_url\r\n1641    path = Path(fname).resolve()\r\n1642  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\site-packages\\datalad\\utils.py\", line 380, in _resolve_without_strict\r\n1643    if strict or self.exists():\r\n1644  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\pathlib.py\", line 1291, in exists\r\n1645    self.stat()\r\n1646  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\pathlib.py\", line 1111, in stat\r\n1647    return self._accessor.stat(self)\r\n1648  File \"C:\\Miniconda35\\envs\\test-environment\\lib\\pathlib.py\", line 371, in wrapped\r\n1649    return strfunc(str(pathobj), *args)\r\n1650OSError: [WinError 123] The filename, directory name, or volume label syntax is incorrect: 'http:\\\\datasets-tests.datalad.org\\\\.git'\r\n1651\r\n```\r\n\r\nReplicates on `maint` and `master` on a real win10 box.", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5084/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5084/timeline", "performed_via_github_app": null}