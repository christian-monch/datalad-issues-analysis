{"url": "https://api.github.com/repos/datalad/datalad/issues/5829", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5829/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5829/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5829/events", "html_url": "https://github.com/datalad/datalad/issues/5829", "id": 953214993, "node_id": "MDU6SXNzdWU5NTMyMTQ5OTM=", "number": 5829, "title": "Cannot clone on Windows via ssh - no password prompt, just errors out", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 188141023, "node_id": "MDU6TGFiZWwxODgxNDEwMjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/platform-windows", "name": "platform-windows", "color": "0052cc", "default": false, "description": "Issue concerned with Windows"}, {"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-07-26T19:25:07Z", "updated_at": "2021-08-17T17:54:55Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "might relate #5031 \r\n\r\n![image](https://user-images.githubusercontent.com/39889/127045796-dc3f9bca-40a9-4517-a5e0-9e97b60313c3.png)\r\n\r\nyou can see that straight `git clone` works, but we fail - not asking for any password, just saying \"kaboom\".\r\n\r\n<details>\r\n<summary>works ok on linux, besides interference with progress bar</summary> \r\n\r\n```shell\r\n$> datalad clone  smaug.datalad.org:/mnt/btrfs/datasets/datalad/ci/git-annex\r\nyoh@smaug.datalad.org's password:                     | 0.00/1.00 [00:00<?, ? Candidate locations/s]\r\ninstall(ok): /home/test3/git-annex (dataset)                                                        \r\n\r\n$> datalad --version\r\ndatalad 0.14.6\r\n```\r\n</details>\r\n\r\nand here is with -l debug (and displaying PID just in case):\r\n\r\n![image](https://user-images.githubusercontent.com/39889/127046606-cab83b02-3354-4a29-ab19-501fc06309d9.png)\r\n\r\nand it seems it is our ssh connector which sets those up\r\n\r\n```shell\r\n$> git grep -3 PasswordAuth\r\ndatalad/support/sshconnector.py-        self._ssh_open_args += [\r\ndatalad/support/sshconnector.py-            # we presently do not support any interactive authentication\r\ndatalad/support/sshconnector.py-            # at the time of process execution\r\ndatalad/support/sshconnector.py:            '-o', 'PasswordAuthentication=no',\r\ndatalad/support/sshconnector.py-            '-o', 'KbdInteractiveAuthentication=no',\r\ndatalad/support/sshconnector.py-        ]\r\ndatalad/support/sshconnector.py-\r\n```\r\n\r\nin effect disabling interactive prompting... didn't look in greater detail but I wonder how it works for any windows mortal user\r\n\r\n<details>\r\n<summary>\r\nedit1: disabling those settings we do **only** for `NoMultiplexSSHConnection` (on windows I guess)\r\n</summary>\r\n\r\nstill results in a failed clone, just differently:\r\n![image](https://user-images.githubusercontent.com/39889/127047989-98f13c89-f244-411d-9a20-9db67a5a047c.png)\r\n</details>\r\n\r\n<details>\r\n<summary>edit 2: native git submodule update --init  also fails!</summary> \r\n\r\n![image](https://user-images.githubusercontent.com/39889/127048514-a4f8dae4-94b9-47c8-ac87-e6ed368e88cc.png)\r\n\r\n</details>\r\n\r\nso unfortunately there is more to the story :-/\r\n\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5829/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5829/timeline", "performed_via_github_app": null}