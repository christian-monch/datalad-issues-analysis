{"url": "https://api.github.com/repos/datalad/datalad/issues/2319", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2319/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2319/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2319/events", "html_url": "https://github.com/datalad/datalad/issues/2319", "id": 306088681, "node_id": "MDU6SXNzdWUzMDYwODg2ODE=", "number": 2319, "title": "(ab)use .git/objects for storing annexed content without incurring permanent drag on the clones", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-03-16T21:56:49Z", "updated_at": "2020-11-12T02:01:28Z", "closed_at": "2020-11-12T02:01:28Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### What is the problem?\r\nWe have lots of small (thanks to .xz) metadata files under git annex control now.  Fetching them one by one via ssh or http shown to be \"not amazingly fast\" to say the least.  Some bundled annex fetching is being thought about/through by @joeyh, but I thought to bring to the table yet another idea I thought we exercised mentally at some point.\r\n\r\nAt some point we discussed a wild ideas of (ab)using git object store  which provides compression and packing for efficient access to textual data.  I wonder if we could still do it somehow, in particular for the \"most recent .datalad/metadata\": e.g. using \"git/objects\" as a special remote of some kind for annex, so we could push those objects (pretty much a tree object with all the metadata files) to the server but in such a way that a regular \"git clone\" would not need to fetch them (disconnected branch).  Then a local special remote would request those objects from git, which might in turn fetch them if they haven't yet arrived locally.  The point is to make them not pointed by any branch which would get into reflog, but in principle we could create a disconnected commit for all current metadata files, make annex special remote know that they are present in there, request git commit, extract from the (git) tree object.  ", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2319/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2319/timeline", "performed_via_github_app": null}