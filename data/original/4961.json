{"url": "https://api.github.com/repos/datalad/datalad/issues/4961", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4961/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4961/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4961/events", "html_url": "https://github.com/datalad/datalad/issues/4961", "id": 708722772, "node_id": "MDU6SXNzdWU3MDg3MjI3NzI=", "number": 4961, "title": "Enums or variables instead of string literals as \"selectors\"", "user": {"login": "christian-monch", "id": 17925232, "node_id": "MDQ6VXNlcjE3OTI1MjMy", "avatar_url": "https://avatars.githubusercontent.com/u/17925232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/christian-monch", "html_url": "https://github.com/christian-monch", "followers_url": "https://api.github.com/users/christian-monch/followers", "following_url": "https://api.github.com/users/christian-monch/following{/other_user}", "gists_url": "https://api.github.com/users/christian-monch/gists{/gist_id}", "starred_url": "https://api.github.com/users/christian-monch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/christian-monch/subscriptions", "organizations_url": "https://api.github.com/users/christian-monch/orgs", "repos_url": "https://api.github.com/users/christian-monch/repos", "events_url": "https://api.github.com/users/christian-monch/events{/privacy}", "received_events_url": "https://api.github.com/users/christian-monch/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-09-25T07:44:26Z", "updated_at": "2020-09-25T07:44:26Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Throughout the datalad code a number of string literals are used as \"selectors\", i.e. they are used to access data items, for example, dictionary values, or to parameterize operations, for example, 'egrep', 'egrepcs', 'textblob', 'autofield' to parameterize search.\r\n\r\nThe use of string literals might lead to the following problems:\r\n- Bugs due to typos, e.g. 'dataset' instead of 'datasets'.\r\n- Mismatch in documentation, e.g. in the doc-string of query_aggregated_metadata. The comment mentions \"dataset\" as valid reporton value, but the correct value would be \"datasets\".\r\n\r\nTo solve this issue, we should use named Python objects instead of string literals. These objects could, for example, be variables, enums. If we use objects string literals:\r\n- Static analysis of the code could reveal errors in the code\r\n- Import of unknown names would trigger early errors\r\n- The python runtime would detect undefined or misspelled names and trigger an error\r\n\r\nThis is conceptually simple but rather voluminous in implementation. One could automate this task, but in this case, care has to be taken, not to translate existing errors into multiple name-definitions.\r\n\r\n(In addition: if we move to python >= 3.7 we should consider to replace dictionary-based structures with dataclasses.)\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4961/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4961/timeline", "performed_via_github_app": null}