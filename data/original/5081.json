{"url": "https://api.github.com/repos/datalad/datalad/issues/5081", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5081/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5081/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5081/events", "html_url": "https://github.com/datalad/datalad/pull/5081", "id": 728593360, "node_id": "MDExOlB1bGxSZXF1ZXN0NTA5Mjc3MjQw", "number": 5081, "title": "ENH:  addurls(..., drop_after=True) to drop content after adding", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778592, "node_id": "MDU6TGFiZWw2Mzc3ODU5Mg==", "url": "https://api.github.com/repos/datalad/datalad/labels/enhancement", "name": "enhancement", "color": "0052cc", "default": true, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-10-23T23:14:15Z", "updated_at": "2021-04-29T21:56:11Z", "closed_at": "2020-11-10T16:52:29Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5081", "html_url": "https://github.com/datalad/datalad/pull/5081", "diff_url": "https://github.com/datalad/datalad/pull/5081.diff", "patch_url": "https://github.com/datalad/datalad/pull/5081.patch"}, "body": "   We have already similar option for add_archive_content and a few places in the\r\n   crawler.  It is a very much needed feature while crawling/addurl-ing big\r\n   datasets, which might not even fit to local harddrive -- we need to drop\r\n   content as soon as it is annexed (well -- later, may be after we extract\r\n   metadata).  For now I am just adding it as a bool, but we might later\r\n   indeed specify when to drop it (right after added, or after dataset saved\r\n   and possibly metadata extracted via some hook or explicit operation etc).\r\n    \r\n   This PR is based on #5022 changes since that is where addurls was RFed\r\n   to accomodate parallel execution, and I would prefer to not mess resolving\r\n   conflicts later on\r\n\r\nFirst I added a `drop` after all files are added, but then decided to not be lazy and RF'ed to\r\nuse `drop_key` in batch mode right after the file is addurl'ed.  So it is two last commits which are relevant, the rest is #4592 \r\nYet to try out on real case.", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5081/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5081/timeline", "performed_via_github_app": null}