{"url": "https://api.github.com/repos/datalad/datalad/issues/5655", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5655/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5655/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5655/events", "html_url": "https://github.com/datalad/datalad/pull/5655", "id": 888438232, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQxNjIwOTc0", "number": 5655, "title": "BF(DOC)+RF: report \"present\" for the state of a present/installed/fulfilled (sub)dataset", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778592, "node_id": "MDU6TGFiZWw2Mzc3ODU5Mg==", "url": "https://api.github.com/repos/datalad/datalad/labels/enhancement", "name": "enhancement", "color": "0052cc", "default": true, "description": ""}, {"id": 227904225, "node_id": "MDU6TGFiZWwyMjc5MDQyMjU=", "url": "https://api.github.com/repos/datalad/datalad/labels/documentation", "name": "documentation", "color": "cfd3d7", "default": true, "description": "Changes only affect the documentation"}, {"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 545918236, "node_id": "MDU6TGFiZWw1NDU5MTgyMzY=", "url": "https://api.github.com/repos/datalad/datalad/labels/DX", "name": "DX", "color": "0052cc", "default": false, "description": "developer experience"}, {"id": 1746781627, "node_id": "MDU6TGFiZWwxNzQ2NzgxNjI3", "url": "https://api.github.com/repos/datalad/datalad/labels/merge-if-ok", "name": "merge-if-ok", "color": "fbca04", "default": false, "description": "OP considers this work done, and requests review/merge"}, {"id": 3049454381, "node_id": "MDU6TGFiZWwzMDQ5NDU0Mzgx", "url": "https://api.github.com/repos/datalad/datalad/labels/minor", "name": "minor", "color": "f1a60e", "default": false, "description": "Increment the minor version when merged"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2021-05-11T19:59:32Z", "updated_at": "2021-10-08T14:13:27Z", "closed_at": "2021-05-17T12:43:50Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5655", "html_url": "https://github.com/datalad/datalad/pull/5655", "diff_url": "https://github.com/datalad/datalad/pull/5655.diff", "patch_url": "https://github.com/datalad/datalad/pull/5655.patch"}, "body": "I think that docstring was left from old(er) times whenever `git submodule` was\r\nused to report the \"state\" of the subdatasets.  After it was replaced with\r\nad-hoc parsing of .gitmodules as far as I see it \"state\" no longer corresponds\r\nto any of those values besides \"absent\", and we simply do not report any state\r\n(as changed unittest shows) for \"present\" (a clear antonym to \"absent\")\r\ndatasets.  All those states are reported by \"status\" command though.  E.g.\r\ncompare:\r\n\r\n\t$> datalad -f '{type} {path}: {state} {status}' --report-type dataset status -d . | grep dataset\r\n\tdataset /tmp/testds3/mod-inited: clean ok\r\n\tdataset /tmp/testds3/not-committed: added ok\r\n\tdataset /tmp/testds3/not-mod-inited: clean ok\r\n\tdataset /tmp/testds3/openneuro: clean ok\r\n\tdataset /tmp/testds3/uninstalled: clean ok\r\n\r\nto (with these changes, without -- would say NA instead of \"present\" since\r\nthere would be no \"state\")\r\n\r\n\t$> datalad -f '{type} {path}: {state} {status}' --report-type dataset subdatasets -d . | grep dataset\r\n\tdataset /tmp/testds3/mod-inited: present ok\r\n\tdataset /tmp/testds3/not-committed: present ok\r\n\tdataset /tmp/testds3/not-mod-inited: present ok\r\n\tdataset /tmp/testds3/openneuro: present ok\r\n\tdataset /tmp/testds3/uninstalled: absent ok\r\n\r\nto see that \"status\" does not care about \"subdataset state\" and reports it as\r\n\"clean\" if absent.\r\n\r\nTo mitigate it, I have established \"present\" as a possible value for the\r\nsubdataset's \"state\", thus overall making it a \"bool\" value as just a field\r\nwith two possible states.  ATM I do not see any other possible value we might\r\nwant to report which would be complimentary (not a sub-category) to those two.\r\n\r\nThis might establish a precedent for RFing of --fulfilled into\r\n--state={any,present,absent} for selection of subdatasets according to their\r\nstate, making interface more coherent IMHO.  But with that in mind I would\r\nstill have consideration of the fact that \"state\" means different things\r\ndepending on the command (subdatasets vs status) which might cause\r\nconfusion/conflict here.  But I think it is status=\"ok\" (pun intended) as long\r\nas we document that it is \"subdatasets state\" and possibly use \"--status-state\"\r\nor just \"--status\" whenever we decide to harmonize options for that.\r\n\r\nWDYT?  if we decide to proceed with this one, then for `foreach` (#749) I would add `--state={present,absent,any}` and possibly suggest a PR for `--fulfilled` -> `--state={any,present,absent}` RFing/deprecation of fulfilled\r\n\r\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5655/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5655/timeline", "performed_via_github_app": null}