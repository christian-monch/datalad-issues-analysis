{"url": "https://api.github.com/repos/datalad/datalad/issues/2753", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2753/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2753/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2753/events", "html_url": "https://github.com/datalad/datalad/issues/2753", "id": 348905479, "node_id": "MDU6SXNzdWUzNDg5MDU0Nzk=", "number": 2753, "title": "Exploration protocol, desired metadata structure", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 700886055, "node_id": "MDU6TGFiZWw3MDA4ODYwNTU=", "url": "https://api.github.com/repos/datalad/datalad/labels/metadata", "name": "metadata", "color": "0052cc", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 32, "created_at": "2018-08-08T21:52:29Z", "updated_at": "2020-11-11T07:24:31Z", "closed_at": "2020-11-11T07:24:31Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n{\r\n  \"@context\": {\r\n    \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\r\n    \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\r\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\r\n    \"dcterms\": \"http://purl.org/dc/elements/1.1/\",\r\n    \"name\": \"dcterms:name\",\r\n    \"nidm\": {\r\n      \"@id\": \"http://purl.org/nidash/nidm#\",\r\n      \"@type\": \"@id\"\r\n    },\r\n    \"spm\": {\r\n      \"@id\": \"http://purl.org/nidash/spm#\",\r\n      \"@type\": \"@id\"\r\n    },\r\n    \"designMatrix\": \"nidm:designMatrix\",\r\n    \"software\": \"nidm:software\",\r\n    \"SPMsDriftCutoffPeriod\": \"spm:spm_SPMsDriftCutoffPeriod\",\r\n    \"type\": {\r\n      \"@id\": \"rdf:type\",\r\n      \"@type\": \"@id\"\r\n    }\r\n  },\r\n  \"type\": \"nidm:Result\",\r\n  \"designMatrix\": {\r\n    \"type\": \"nidm:DesignMatrix\",\r\n    \"SPMsDriftCutoffPeriod\": 128\r\n  },\r\n  \"software\": {\r\n    \"type\": \"nidm:Software\",\r\n    \"name\": \"SPM\"\r\n  }\r\n}\r\n```\r\n\r\n[This example on the JSON-LD playground](https://json-ld.org/playground/#startTab=tab-compacted&copyContext=true&json-ld=%7B%22%40context%22%3A%7B%22rdf%22%3A%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%2C%22rdfs%22%3A%22http%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%22%2C%22xsd%22%3A%22http%3A%2F%2Fwww.w3.org%2F2001%2FXMLSchema%23%22%2C%22dcterms%22%3A%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%2C%22name%22%3A%22dcterms%3Aname%22%2C%22nidm%22%3A%7B%22%40id%22%3A%22http%3A%2F%2Fpurl.org%2Fnidash%2Fnidm%23%22%2C%22%40type%22%3A%22%40id%22%7D%2C%22spm%22%3A%7B%22%40id%22%3A%22http%3A%2F%2Fpurl.org%2Fnidash%2Fspm%23%22%2C%22%40type%22%3A%22%40id%22%7D%2C%22designMatrix%22%3A%22nidm%3AdesignMatrix%22%2C%22software%22%3A%22nidm%3Asoftware%22%2C%22SPMsDriftCutoffPeriod%22%3A%22spm%3Aspm_SPMsDriftCutoffPeriod%22%2C%22type%22%3A%7B%22%40id%22%3A%22rdf%3Atype%22%2C%22%40type%22%3A%22%40id%22%7D%7D%2C%22type%22%3A%22nidm%3AResult%22%2C%22designMatrix%22%3A%7B%22type%22%3A%22nidm%3ADesignMatrix%22%2C%22SPMsDriftCutoffPeriod%22%3A128%7D%2C%22software%22%3A%7B%22type%22%3A%22nidm%3ASoftware%22%2C%22name%22%3A%22SPM%22%7D%7D)\r\n\r\nExploration with @cmaumet and @nicholsn (ping @dbkeator @jbpoline) . Concept:\r\n\r\n- Arbitrary nesting can be combined with a pretty much flat context\r\n- All terms can be \"singular\" (i.e. `Inference` not `Inferences`), as in the above example, the single-item list would get simplified to become just the item as the value by JSON-LD processing\r\n- Embedded/nested `@context` declarations can redefine common terms for metadata components\r\n- writing a *compacted* representation (like above), can be converted into *flattened*, or *expanded* representations of a graph (see the playground example).\r\n- deliberately limit to JSON-LD 1.0 features, because compatibility of software implementations (e.g. rdllib JSON-LD serializer) with JSON-LD 1.1 is very limited or non-existent\r\n\r\nSuch representation is fairly accessible to the search mode implementations that we already have, and can be converted automatically into other forms (expanded, flattened) that might be more desirable for feeding a graph database.\r\n\r\nHere is the above example converted to TTL:\r\n\r\n```\r\n@prefix dcterms: <http://purl.org/dc/elements/1.1/> .\r\n@prefix nidm: <http://purl.org/nidash/nidm#> .\r\n@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .\r\n@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .\r\n@prefix spm: <http://purl.org/nidash/spm#> .\r\n@prefix xml: <http://www.w3.org/XML/1998/namespace> .\r\n@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .\r\n\r\n[] a nidm:Result ;\r\n    nidm:designMatrix [ a nidm:DesignMatrix ;\r\n            spm:spm_SPMsDriftCutoffPeriod 128 ] ;\r\n    nidm:software [ a nidm:Software ;\r\n            dcterms:name \"SPM\" ] .\r\n```\r\n\r\nFollowing a suggestion by @nicholsn `@context` could be modeled after schema.org style. Here is an example (note that the entire thing below is a context, not just the `@context` part, see here for a complete file: https://schema.org/version/3.4/schema.jsonld):\r\n\r\n```\r\n{\r\n  \"@context\": {\r\n    \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\r\n    \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\r\n    \"xsd\": \"http://www.w3.org/2001/XMLSchema#\"\r\n  },\r\n  \"@graph\": [\r\n    {\r\n      \"@id\": \"http://schema.org/productionDate\",\r\n      \"@type\": \"rdf:Property\",\r\n      \"rdfs:comment\": \"The date of production of the item, e.g. vehicle.\",\r\n      \"rdfs:label\": \"productionDate\",\r\n      ... # define units ...\r\n    },\r\n    ...\r\n  ]\r\n}\r\n```\r\nDatalad could be made to quickly parse such a context, look for defined labels, and possibly unit and (numerical) data type definitions to empower itself to supported a wider range of functionality (ordinal comparisons, etc.)", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2753/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2753/timeline", "performed_via_github_app": null}