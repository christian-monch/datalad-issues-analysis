{"url": "https://api.github.com/repos/datalad/datalad/issues/4167", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4167/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4167/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4167/events", "html_url": "https://github.com/datalad/datalad/pull/4167", "id": 567851153, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc3Mzk5NTQ5", "number": 4167, "title": "update: Support ff-only merges and merging parent revision", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/71", "html_url": "https://github.com/datalad/datalad/milestone/71", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/71/labels", "id": 5127107, "node_id": "MDk6TWlsZXN0b25lNTEyNzEwNw==", "number": 71, "title": "0.13.0", "description": "With all the interface removals, we are doomed for at least a new minor release.", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 49, "state": "closed", "created_at": "2020-02-20T19:12:55Z", "updated_at": "2020-06-24T23:01:53Z", "due_on": "2020-06-22T07:00:00Z", "closed_at": "2020-06-24T23:01:53Z"}, "comments": 6, "created_at": "2020-02-19T21:14:01Z", "updated_at": "2020-02-22T03:26:04Z", "closed_at": "2020-02-22T03:25:34Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4167", "html_url": "https://github.com/datalad/datalad/pull/4167", "diff_url": "https://github.com/datalad/datalad/pull/4167.diff", "patch_url": "https://github.com/datalad/datalad/pull/4167.patch"}, "body": "This series is based on the discussion in gh-4148.  On top of the existing \"merge in the chosen branch from the sibling\" mode, it adds a \"follow parent\" mode for merging in the registered revision for updated subdatasets. It replaces the approach proposed in gh-4118, which was a hybrid approach that merged in the subdataset revision directly only if the to-be-merged sibling branch didn't contain the registered revision.  It think the approach here is simpler and will make it easier for the caller to anticipate the result.\r\n\r\nAlso, `--merge` is expanded so that `--merge=ff-only` limits the allowed merges to fast-forwards, while `--merge` retains the same behavior (and is now a shorthand for `--merge=any`).\r\n\r\nPatch 1-4 follow patches from gh-4118 pretty closely.\r\n\r\n```\r\n  [ 1/10] RF: update: Break apart _update_repo() helper\r\n  [ 2/10] ENH: update: Use same merge approach for plain and annex repos\r\n  [ 3/10] ENH: update: Avoid calling 'git pull' to merge changes\r\n  [ 4/10] ENH: update: Don't set merge target to a guess that doesn't exist\r\n  [ 5/10] TST: update: Make more specific assertions about result counts\r\n  [ 6/10] ENH: update: Yield result for merge event\r\n  [ 7/10] NF: update: Add option to merge in recorded commit\r\n  [ 8/10] ENH: update: Try to fetch submodule commit explicitly if needed\r\n  [ 9/10] DOC: update: Explain how sibling is chosen for merge\r\n  [10/10] NF: update: Support restricting merges to fast-forwards\r\n```\r\n", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4167/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4167/timeline", "performed_via_github_app": null}