{"url": "https://api.github.com/repos/datalad/datalad/issues/5419", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5419/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5419/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5419/events", "html_url": "https://github.com/datalad/datalad/issues/5419", "id": 808661645, "node_id": "MDU6SXNzdWU4MDg2NjE2NDU=", "number": 5419, "title": "Absent filename in makes multiple progressbars to \"compete\" for the display", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}, {"id": 447185719, "node_id": "MDU6TGFiZWw0NDcxODU3MTk=", "url": "https://api.github.com/repos/datalad/datalad/labels/regression", "name": "regression", "color": "fc8387", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-02-15T16:11:16Z", "updated_at": "2021-02-24T15:20:15Z", "closed_at": "2021-02-24T15:20:15Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "dataset: https://gin.g-node.org/ljchang/Localizer\r\n\r\ndatalad 0.14.0\r\n\r\nrunning\r\n```\r\n$> datalad get -J5 .\r\nTotal:   0%|                                                                                    | 0.00/45.2G [00:00<?, ? Bytes/s]\r\nGet:   1%|\u258a                              \r\n```\r\n\r\nwhere the last `Get:` is actually jumping between different files progress (so 1 %, then 10, then 0, and so on).  My guess is that because there is no filename in the name/title of the progress bar, so may be they are treated as the same pbar.\r\n\r\ntqdm 4.56.2 .\r\n\r\n<details>\r\n<summary>short WTF</summary> \r\n\r\n# WTF\r\n- datalad: version=0.14.0 full_version=0.14.0\r\n- dependencies: cmd:git=2.30.1 cmd:annex=8.20210127-g42239bc cmd:bundled-git=UNKNOWN cmd:system-git=2.30.1 cmd:system-ssh=8.4p1 c\r\nmd:7z=16.02 annexremote=1.4.3 appdirs=1.4.4 boto=2.49.0 exifread=2.1.2 humanize=3.2.0 iso8601=0.1.13 keyring=22.0.1 keyrings.alt=\r\nUNKNOWN msgpack=1.0.2 mutagen=1.41.1 requests=2.25.1 wrapt=1.12.1\r\n</details>\r\n\r\nedit 1: after interrupting, and switching to another env (no conda, just venv, system wide older annex) and current master I am also getting what I saw before but did not report:  after some initial progress bar completing, there is no progress bar and just `Get` statement:\r\n\r\n```\r\n$> datalad get -J5 .                            \r\nTotal:   0%|                                                                                    | 0.00/45.1G [00:00<?, ? Bytes/s]\r\nGet: 50.9M Bytes [00:15, 3.38M Bytes/s]  \r\n```\r\n\r\nswitching to 0.13.7 brings back original progress bars with file names and multiple of them:\r\n\r\n```\r\n$> datalad get -J5 .\r\nTotal (1 ok, 5 failed out of 1776):   0%|                                                | 5.54M/45.1G [00:05<11:07:43, 1.13MB/s]\r\nderivatives/fmriprep/sub-S02/anat/s .. I152NLin2009cAsym_mode-image_xfm.h5:   1%|\u258f            | 1.27M/102M [00:03<04:11, 401kB/s]\r\nderivatives/fmriprep/sub-S02/anat/sub-S02_label-CSF_probseg.nii.gz:  19%|\u2588\u2588\u2588\u258a                | 1.01M/5.30M [00:03<00:15, 272kB/s]\r\nderivatives/fmriprep/sub-S02/anat/sub-S02_dseg.nii.gz:  85%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588     | 630k/737k [00:00<00:00, 1.26MB/s]\r\nderivatives/fmriprep/sub-S02/anat/s .. n2009cAsym_to-T1w_mode-image_xfm.h5:   2%|\u258f            | 1.72M/102M [00:02<02:46, 604kB/s]\r\nderivatives/fmriprep/sub-S02/anat/sub-S02_label-GM_probseg.nii.gz:   6%|\u2588\u258e                    | 348k/5.66M [00:01<00:14, 361kB/s]\r\nderivatives/fmriprep/sub-S02/anat/sub-S02_label-WM_probseg.nii.gz:   8%|\u2588\u258b                    | 417k/5.44M [00:01<00:11, 433kB/s]\r\n```\r\n\r\n<details>\r\n<summary>WTF in this env</summary> \r\n\r\n```shell\r\n$> datalad wtf -S python -S system -S dependencies -S datalad\r\n# WTF\r\n## datalad \r\n  - full_version: 0.13.7\r\n  - version: 0.13.7\r\n## dependencies \r\n  - annexremote: 1.4.3\r\n  - appdirs: 1.4.3\r\n  - boto: 2.44.0\r\n  - cmd:7z: 16.02\r\n  - cmd:annex: 7.20190819+git2-g908476a9b-1~ndall+1\r\n  - cmd:bundled-git: 2.20.1\r\n  - cmd:git: 2.20.1\r\n  - cmd:system-git: 2.24.0\r\n  - cmd:system-ssh: 7.9p1\r\n  - exifread: 2.1.2\r\n  - git: 3.0.5\r\n  - gitdb: 2.0.5\r\n  - humanize: 0.5.1\r\n  - iso8601: 0.1.11\r\n  - keyring: 17.1.1\r\n  - keyrings.alt: 3.1.1\r\n  - msgpack: 0.5.6\r\n  - mutagen: 1.40.0\r\n  - requests: 2.21.0\r\n  - wrapt: 1.10.11\r\n## python \r\n  - implementation: CPython\r\n  - version: 3.7.3\r\n## system \r\n  - distribution: debian/10.0\r\n  - encoding: \r\n    - default: utf-8\r\n    - filesystem: utf-8\r\n    - locale.prefered: UTF-8\r\n  - max_path_length: 280\r\n  - name: Linux\r\n  - release: 4.19.0-5-amd64\r\n  - type: posix\r\n  - version: #1 SMP Debian 4.19.37-5+deb10u1 (2019-07-19)\r\n```\r\n</details>\r\n\r\nso it seems to be a regression of 0.14.0", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5419/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5419/timeline", "performed_via_github_app": null}