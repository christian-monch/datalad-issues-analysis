{"url": "https://api.github.com/repos/datalad/datalad/issues/242", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/242/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/242/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/242/events", "html_url": "https://github.com/datalad/datalad/issues/242", "id": 108056111, "node_id": "MDU6SXNzdWUxMDgwNTYxMTE=", "number": 242, "title": "ERRORs on failed execution of external commands are logged twice in API commands", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/41", "html_url": "https://github.com/datalad/datalad/milestone/41", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/41/labels", "id": 2580592, "node_id": "MDk6TWlsZXN0b25lMjU4MDU5Mg==", "number": 41, "title": "Release 0.6.0", "description": "A huge refactoring of input/output of API commands etc", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 56, "state": "closed", "created_at": "2017-06-13T14:33:04Z", "updated_at": "2017-08-29T08:14:19Z", "due_on": "2017-06-14T07:00:00Z", "closed_at": "2017-06-15T10:55:30Z"}, "comments": 2, "created_at": "2015-09-24T04:23:30Z", "updated_at": "2017-06-13T14:36:14Z", "closed_at": "2017-06-12T11:21:43Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "e.g. with freshly submitted PR #241 \n\n```\nhopa:/tmp/tutorial_data5/haxby2001\n$> datalad drop -l info \\* \n\n2015-09-24 00:12:51,340 [ERROR  ] Protocol: NullProtocol: stderr| git-annex: drop: 1 failed (cmd.py:319)\n2015-09-24 00:12:51,340 [ERROR  ] Failed to run ['git-annex', 'drop', 'haxby2001/1.dat', 'haxby2001/task_key.txt', 'haxby2001/sub001', 'haxby2001/study_key.txt', 'haxby2001/scan_key.txt', 'haxby2001/models', 'haxby2001/mask_white.nii.gz', 'haxby2001/mask_vt.nii.gz', 'haxby2001/mask_hoc.nii.gz', 'haxby2001/mask_gray.nii.gz', 'haxby2001/mask_brain.nii.gz', 'haxby2001/bold_mean.nii.gz', 'haxby2001/bold_mc.par', 'haxby2001/bold.nii.gz', 'haxby2001/attributes.txt', 'haxby2001/anat.nii.gz'] under '/tmp/tutorial_data5'. Exit code=1. out=drop haxby2001/1.dat (unsafe) \n|   Could only verify the existence of 0 out of 1 necessary copies\n| \n|   Rather than dropping this file, try using: git annex move\n| \n|   (Use --force to override this check, or adjust numcopies.)\n| failed\n| drop haxby2001/sub001/masks/orig/brain.nii.gz (checking origin...) ok\n| drop haxby2001/sub001/masks/orig/gray.nii.gz (checking origin...) ok\n| drop haxby2001/sub001/masks/orig/hoc.nii.gz (checking origin...) ok\n| drop haxby2001/sub001/masks/orig/vt.nii.gz (checking origin...) ok\n| drop haxby2001/sub001/masks/orig/white.nii.gz (checking origin...) ok\n| (recording state in git...)\n|  err=git-annex: drop: 1 failed\n|  (cmd.py:264)\n2015-09-24 00:12:51,350 [INFO   ] 5 items were dropped (drop.py:68)\n2015-09-24 00:12:51,351 [ERROR  ] CommandError: command '['git-annex', 'drop', 'haxby2001/1.dat', 'haxby2001/task_key.txt', 'haxby2001/sub001', 'haxby2001/study_key.txt', 'haxby2001/scan_key.txt', 'haxby2001/models', 'haxby2001/mask_white.nii.gz', 'haxby2001/mask_vt.nii.gz', 'haxby2001/mask_hoc.nii.gz', 'haxby2001/mask_gray.nii.gz', 'haxby2001/mask_brain.nii.gz', 'haxby2001/bold_mean.nii.gz', 'haxby2001/bold_mc.par', 'haxby2001/bold.nii.gz', 'haxby2001/attributes.txt', 'haxby2001/anat.nii.gz']' failed with exitcode 1.\n| Failed to run ['git-annex', 'drop', 'haxby2001/1.dat', 'haxby2001/task_key.txt', 'haxby2001/sub001', 'haxby2001/study_key.txt', 'haxby2001/scan_key.txt', 'haxby2001/models', 'haxby2001/mask_white.nii.gz', 'haxby2001/mask_vt.nii.gz', 'haxby2001/mask_hoc.nii.gz', 'haxby2001/mask_gray.nii.gz', 'haxby2001/mask_brain.nii.gz', 'haxby2001/bold_mean.nii.gz', 'haxby2001/bold_mc.par', 'haxby2001/bold.nii.gz', 'haxby2001/attributes.txt', 'haxby2001/anat.nii.gz'] under '/tmp/tutorial_data5'. Exit code=1. out=drop haxby2001/1.dat (unsafe) \n|   Could only verify the existence of 0 out of 1 necessary copies\n| \n|   Rather than dropping this file, try using: git annex move\n| \n|   (Use --force to override this check, or adjust numcopies.)\n| failed\n| drop haxby2001/sub001/masks/orig/brain.nii.gz (checking origin...) ok\n| drop haxby2001/sub001/masks/orig/gray.nii.gz (checking origin...) ok\n| drop haxby2001/sub001/masks/orig/hoc.nii.gz (checking origin...) ok\n| drop haxby2001/sub001/masks/orig/vt.nii.gz (checking origin...) ok\n| drop haxby2001/sub001/masks/orig/white.nii.gz (checking origin...) ok\n| (recording state in git...)\n|  err=git-annex: drop: 1 failed\n|  (CommandError) (main.py:206)\n```\n\nNot sure how much we should expose user to those, but probably we should. Then we should work out to log them once, probably not logging error at the cmd module level via 'expect_fail=True' but it is burried quite deep inside so we might consider other means to instrument this\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/242/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/242/timeline", "performed_via_github_app": null}