{"url": "https://api.github.com/repos/datalad/datalad/issues/4619", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4619/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4619/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4619/events", "html_url": "https://github.com/datalad/datalad/pull/4619", "id": 635551912, "node_id": "MDExOlB1bGxSZXF1ZXN0NDMxODk3OTcw", "number": 4619, "title": "ENH: Give clone candidates a priority", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2020-06-09T15:46:50Z", "updated_at": "2020-06-15T06:30:34Z", "closed_at": "2020-06-15T06:30:31Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4619", "html_url": "https://github.com/datalad/datalad/pull/4619", "diff_url": "https://github.com/datalad/datalad/pull/4619.diff", "patch_url": "https://github.com/datalad/datalad/pull/4619.patch"}, "body": "This is achieved by prefixing their existing label with three digits and sorting them before processing them.\r\n\r\nThis implementation makes no change to the previously established order, it just makes that order explicit in the labels.\r\n\r\nThe default setup uses the priorities in the second half of the spectrum:\r\n\r\n- 500 for remote URL + submodule path\r\n- 600 for the configured submodule URL\r\n- 700 for any unprioritized 'datalad.get.subdataset-source-candidate' config\r\n- 900 for the local subdataset path\r\n\r\nThe first half of the spectrum and the spaces inbetween are available for re-prioritizing clone attempts. The idea is to be able to configure\r\n\r\n  `datalad.get.subdataset-source-candidate-000takemefirst = http://some`\r\n\r\nand have this be processed first.\r\n\r\nI have confirmed manually that this solution enables successful clones on first attempt, and substantially speeds up dataset installation. Likewise using '999label' it is possible to configure a fallback source candidate.\r\n\r\nTowards a resolution of gh-4613\r\n\r\nTODO:\r\n- [x] adjust `clone` to use this feature\r\n- [x] adjust documentation\r\n- [x] add test\r\n- ~~potentially prevent \"flexibilizing\" of explicitly configured URLs (e.g. `/.git` appending)~~", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4619/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4619/timeline", "performed_via_github_app": null}