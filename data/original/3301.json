{"url": "https://api.github.com/repos/datalad/datalad/issues/3301", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3301/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3301/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3301/events", "html_url": "https://github.com/datalad/datalad/pull/3301", "id": 430319178, "node_id": "MDExOlB1bGxSZXF1ZXN0MjY4MjMxOTc3", "number": 3301, "title": "Speed-up GitRepo.get_content_info() (fixes gh-3300)", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778590, "node_id": "MDU6TGFiZWw2Mzc3ODU5MA==", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-normal", "name": "severity-normal", "color": "ff8888", "default": false, "description": "standard severity"}, {"id": 289240596, "node_id": "MDU6TGFiZWwyODkyNDA1OTY=", "url": "https://api.github.com/repos/datalad/datalad/labels/performance", "name": "performance", "color": "f4b2d8", "default": false, "description": "Improve performance of an existing feature"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 16, "created_at": "2019-04-08T08:25:41Z", "updated_at": "2019-04-09T12:35:27Z", "closed_at": "2019-04-09T12:34:36Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/3301", "html_url": "https://github.com/datalad/datalad/pull/3301", "diff_url": "https://github.com/datalad/datalad/pull/3301.diff", "patch_url": "https://github.com/datalad/datalad/pull/3301.patch"}, "body": "#3300\r\n\r\nBenchmark info:\r\n\r\n```\r\non present master:\r\n% time datalad status\r\ndatalad status  10.37s user 1.51s system 100% cpu 11.851 total\r\n% datalad rev-diff -f HEAD~1 -t HEAD\r\ndatalad rev-diff -f HEAD~1 -t HEAD  11.00s user 1.79s system 108% cpu 11.751 total\r\n\r\nthis PR:\r\n% time datalad status\r\ndatalad status  7.83s user 1.17s system 105% cpu 8.495 total\r\n(datalad3-dev) mih@meiner ~/forrest/collection/visloc (git)-[master] % datalad rev-diff -f HEAD~1 -t HEAD\r\ndatalad rev-diff -f HEAD~1 -t HEAD  9.87s user 1.61s system 100% cpu 11.443 total\r\n```\r\n\r\nHence no slow-down or minor speed-up, despite much more testing in the `diff` case. In master symlinks were not properly evaluated at all, but instead any coincidental symlink on the filesystem with the same name was being used for testing. Now every single symlink is read from Git for the given `ref`. On slow FS this might even be faster than `os.readlink` in the worktree.\r\n\r\nTest repo has 33k symlinks to be tested.", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3301/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3301/timeline", "performed_via_github_app": null}