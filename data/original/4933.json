{"url": "https://api.github.com/repos/datalad/datalad/issues/4933", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4933/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4933/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4933/events", "html_url": "https://github.com/datalad/datalad/issues/4933", "id": 704611452, "node_id": "MDU6SXNzdWU3MDQ2MTE0NTI=", "number": 4933, "title": "2 datalad-archives tests fail on conda", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-09-18T19:40:22Z", "updated_at": "2021-01-06T20:39:37Z", "closed_at": "2021-01-06T20:39:37Z", "author_association": "MEMBER", "active_lock_reason": null, "body": " linux_64_nodepTrue downstream testing of git annex build of datalad 0.13.3 fails on conda-forge https://github.com/conda-forge/git-annex-feedstock/pull/101 leads to two datalad-archives remote related tests:\r\n\r\n```\r\n2020-09-18T03:50:48.4181911Z ======================================================================\r\n2020-09-18T03:50:48.4182393Z ERROR: datalad.customremotes.tests.test_archives.test_annex_get_from_subdir\r\n2020-09-18T03:50:48.4183170Z ----------------------------------------------------------------------\r\n2020-09-18T03:50:48.4183612Z Traceback (most recent call last):\r\n2020-09-18T03:50:48.4184924Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/nose/case.py\", line 197, in runTest\r\n2020-09-18T03:50:48.4185885Z     self.test(*self.arg)\r\n2020-09-18T03:50:48.4187203Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/datalad/tests/utils.py\", line 554, in _wrap_with_tree\r\n2020-09-18T03:50:48.4188120Z     return t(*(arg + (d,)), **kw)\r\n2020-09-18T03:50:48.4189536Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/datalad/customremotes/tests/test_archives.py\", line 178, in test_annex_get_from_subdir\r\n2020-09-18T03:50:48.4190841Z     runner(['git', 'annex', 'get', '--', fn_in_archive_obscure])   # run git annex get\r\n2020-09-18T03:50:48.4192225Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/datalad/cmd.py\", line 599, in __call__\r\n2020-09-18T03:50:48.4193116Z     return self.run(cmd, *args, **kwargs)\r\n2020-09-18T03:50:48.4194418Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/datalad/cmd.py\", line 961, in run\r\n2020-09-18T03:50:48.4195255Z     raise exc\r\n2020-09-18T03:50:48.4196205Z datalad.support.exceptions.CommandError: CommandError: 'git annex get -- ' \"'\"'\"';a&b&c\u0394\u0419\u05e7\ufee1\u0e57\u3042 `| '' failed with exitcode 1 [out: 'get  \"';a&b&c\u0394\u0419\u05e7\ufee1\u0e57\u3042 `|  (from datalad-archives...)\r\n2020-09-18T03:50:48.4196862Z\r\n2020-09-18T03:50:48.4197076Z\r\n2020-09-18T03:50:48.4197609Z   Unable to access these remotes: datalad-archives\r\n2020-09-18T03:50:48.4197958Z\r\n2020-09-18T03:50:48.4198297Z   Try making some of these repositories available:\r\n2020-09-18T03:50:48.4198967Z    c04eb54b-4b4e-5755-8436-866b043170fa -- [datalad-archives]\r\n2020-09-18T03:50:48.4200450Z failed'] [err: 'Failed to fetch any archive containing SHA256E-s3--a665a45920422f9d417e4867efdc4fb8a04a1f3fff1fa07e998e86f7f7a27ae3. Tried: ['SHA256E-s166--44e4c670086709cf7aadd3a7618ca77f5f1d5934305a3e792cf671e7bbe1d20b.tar.gz'] [archives.py:_transfer:405]\r\n2020-09-18T03:50:48.4201611Z git-annex: get: 1 failed']\r\n2020-09-18T03:50:48.4202260Z -------------------- >> begin captured logging << --------------------\r\n2020-09-18T03:50:48.4202718Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4203409Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4204670Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4205176Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4205605Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4206694Z fasteners.process_lock: Level 5: Acquired file lock `/tmp/datalad_temp_tree_test_annex_get_from_subdirxu27uco6/.git/datalad/tmp/archives/69dc725608.extract-lck` after waiting 0.000s [1 attempts were required]\r\n2020-09-18T03:50:48.4207955Z fasteners.process_lock: Level 5: Unlocked and closed file lock open on `/tmp/datalad_temp_tree_test_annex_get_from_subdirxu27uco6/.git/datalad/tmp/archives/69dc725608.extract-lck`\r\n2020-09-18T03:50:48.4208632Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4209036Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4209688Z --------------------- >> end captured logging << ---------------------\r\n```\r\n\r\n```\r\n2020-09-18T03:50:48.4210377Z ======================================================================\r\n2020-09-18T03:50:48.4210847Z FAIL: datalad.customremotes.tests.test_archives.test_basic_scenario\r\n2020-09-18T03:50:48.4211510Z ----------------------------------------------------------------------\r\n2020-09-18T03:50:48.4211960Z Traceback (most recent call last):\r\n2020-09-18T03:50:48.4213242Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/nose/case.py\", line 197, in runTest\r\n2020-09-18T03:50:48.4214109Z     self.test(*self.arg)\r\n2020-09-18T03:50:48.4215432Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/datalad/tests/utils.py\", line 554, in _wrap_with_tree\r\n2020-09-18T03:50:48.4216318Z     return t(*(arg + (d,)), **kw)\r\n2020-09-18T03:50:48.4217634Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/datalad/tests/utils.py\", line 731, in _wrap_with_tempfile\r\n2020-09-18T03:50:48.4218554Z     return t(*(arg + (filename,)), **kw)\r\n2020-09-18T03:50:48.4219966Z   File \"/home/conda/feedstock_root/build_artifacts/git-annex_1600392873041/_test_env_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placehold_placeh/lib/python3.8/site-packages/datalad/customremotes/tests/test_archives.py\", line 124, in test_basic_scenario\r\n2020-09-18T03:50:48.4220955Z     assert_true(annex.file_has_content(fn_extracted))\r\n2020-09-18T03:50:48.4221338Z AssertionError: False is not true\r\n2020-09-18T03:50:48.4221966Z -------------------- >> begin captured logging << --------------------\r\n2020-09-18T03:50:48.4222420Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4222824Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4223240Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4223735Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4224154Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4224625Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4225039Z asyncio: DEBUG: Using selector: EpollSelector\r\n2020-09-18T03:50:48.4225825Z --------------------- >> end captured logging << ---------------------\r\n```\r\n", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4933/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4933/timeline", "performed_via_github_app": null}