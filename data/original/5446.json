{"url": "https://api.github.com/repos/datalad/datalad/issues/5446", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5446/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5446/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5446/events", "html_url": "https://github.com/datalad/datalad/issues/5446", "id": 817455586, "node_id": "MDU6SXNzdWU4MTc0NTU1ODY=", "number": 5446, "title": "No error result reported in the summary whenever git-annex get crashes", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 2767256516, "node_id": "MDU6TGFiZWwyNzY3MjU2NTE2", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-get", "name": "cmd-get", "color": "FEF2C0", "default": false, "description": ""}, {"id": 2775377145, "node_id": "MDU6TGFiZWwyNzc1Mzc3MTQ1", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-install", "name": "cmd-install", "color": "FEF2C0", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2021-02-26T15:37:35Z", "updated_at": "2021-02-28T11:12:58Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "@djarecka reported on killed (with 9) git-annex process in https://github.com/dandi/dandisets/issues/33 .  Yet to figure out what exactly is going there.  But what is relevant here now is that summary statement didn't have any `error` reported -- only ok and not-needed:\r\n\r\n```shell\r\n[00:56][2.93][-73%]djarecka@openmind7:dandi$ datalad install -J5 -g -r https://github.com/dandi/dandi-api-datasets\r\n[INFO   ] Installing Dataset(/om2/scratch/Sat/djarecka/dandi/dandi-api-datasets) to get /om2/scratch/Sat/djarecka/dandi/dandi-api-datasets recursively \r\nTotal (2 ok out of 70):   2%|\u2588\u258e                                                      | 50.5G/2.14T [59:35<67:20:12, 8.62MB/s][WARNING] Running get resulted in stderr output: error: git-annex died of signal 9    | 15.4G/54.5G [49:29<2:37:04, 4.14MB/s]\r\n ub-YutaMouse42/sub-YutaMouse42_s .. use42-151106_behavior+ecephys.nwb:  93%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u258e| 13.2G/14.1G [43:36<03:31, 4.52MB/s]\r\n[WARNING] Still have 2 active progress bars when stopping \r\n                                                                                                                             get(ok): /om2/scratch/Sat/djarecka/dandi/dandi-api-datasets/dandisets/000003/sub-YutaMouse41/sub-YutaMouse41_ses-YutaMouse41-150831_behavior+ecephys.nwb (file) [from web...]                                                                             \r\nget(ok): /om2/scratch/Sat/djarecka/dandi/dandi-api-datasets/dandisets/000003/sub-YutaMouse42/sub-YutaMouse42_ses-YutaMouse42-151102_behavior+ecephys.nwb (file) [from web...]\r\nget(ok): /om2/scratch/Sat/djarecka/dandi/dandi-api-datasets/dandisets/000055/sub-11/sub-11_ses-20000105T190000_behavior+ecephys.nwb (file) [from web...]\r\nget(ok): /om2/scratch/Sat/djarecka/dandi/dandi-api-datasets/dandisets/000055/sub-12/sub-12_ses-20000106T190000_behavior+ecephys.nwb (file) [from web...]\r\nget(ok): /om2/scratch/Sat/djarecka/dandi/dandi-api-datasets/dandisets/000055/sub-12/sub-12_ses-20000103T190000_behavior+ecephys.nwb (file) [from web...]\r\nget(ok): /om2/scratch/Sat/djarecka/dandi/dandi-api-datasets/dandisets/000055/sub-12/sub-12_ses-20000105T190000_behavior+ecephys.nwb (file) [from web...]\r\naction summary:\r\n  get (ok: 6)\r\n  install (notneeded: 1)\r\n```\r\n\r\nand subsequent rerun shows that it is trying to fetch more files:\r\n\r\n```\r\n[09:26][2.46][-82%]djarecka@openmind7:dandi$ datalad install -J5 -g -r https://github.com/dandi/dandi-api-datasets\r\n[INFO   ] Installing Dataset(/om2/scratch/Sat/djarecka/dandi/dandi-api-datasets) to get /om2/scratch/Sat/djarecka/dandi/dandi-api-datasets recursively \r\nTotal:   1%|\u2588                                                                        | 30.3G/2.12T [03:05<61:24:24, 9.44MB/s]Total:   1%|\u2588                                                                        | 30.3G/2.12T [03:06<62:25:04, 9.29MB/s]Total:   1%|\u2588                                                                        | 30.3G/2.12T [03:06<65:02:06, 8.92MB/s]\r\n```\r\n\r\nI think somewhere we are not channeling as a result message some `error` that we have failed.  It might be on a big number of files for which that `git annex` process died of on.\r\n\r\n<details><summary>DataLad 0.13.7 WTF (configuration, datalad, dependencies, environment, extensions, git-annex, location, metadata_extractors, python, system)</summary>\r\n\r\n# WTF\r\n## configuration <SENSITIVE, report disabled by configuration>\r\n## datalad\r\n  - full_version: 0.13.7\r\n  - version: 0.13.7\r\n## dependencies\r\n  - annexremote: 1.5.0\r\n  - appdirs: 1.4.4\r\n  - boto: 2.49.0\r\n  - cmd:7z: 16.02\r\n  - cmd:annex: 8.20201129-geb388e6\r\n  - cmd:bundled-git: UNKNOWN\r\n  - cmd:git: 2.30.0\r\n  - cmd:system-git: 2.30.0\r\n  - cmd:system-ssh: 8.4p1\r\n  - humanize: 3.2.0\r\n  - iso8601: 0.1.13\r\n  - keyring: 22.0.1\r\n  - keyrings.alt: UNKNOWN\r\n  - msgpack: 1.0.2\r\n  - requests: 2.25.1\r\n  - wrapt: 1.12.1\r\n## environment\r\n  - LANG: en_US.UTF-8\r\n  - PATH: /om/user/djarecka/elastix/bin:/home/djarecka/bin:/om2/user/djarecka/miniconda/envs/datalad/bin:/om\\\r\n2/user/djarecka/miniconda/condabin:/om/user/djarecka/elastix/bin:/home/djarecka/bin:/cm/shared/apps/gcc/4.8.\\\r\n4/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin\r\n## extensions\r\n## git-annex\r\n  - build flags:\r\n    - Assistant\r\n    - Webapp\r\n    - Pairing\r\n    - Inotify\r\n    - DBus\r\n    - DesktopNotify\r\n    - TorrentParser\r\n    - MagicMime\r\n    - Feeds\r\n    - Testsuite\r\n    - S3\r\n    - WebDAV\r\n  - dependency versions:\r\n    - aws-0.22\r\n    - bloomfilter-2.0.1.0\r\n    - cryptonite-0.26\r\n    - DAV-1.3.4\r\n    - feed-1.3.0.1\r\n    - ghc-8.8.4\r\n    - http-client-0.6.4.1\r\n    - persistent-sqlite-2.10.6.2\r\n    - torrent-10000.1.1\r\n    - uuid-1.3.13\r\n    - yesod-1.6.1.0\r\n  - key/value backends:\r\n    - SHA256E\r\n    - SHA256\r\n    - SHA512E\r\n    - SHA512\r\n    - SHA224E\r\n    - SHA224\r\n    - SHA384E\r\n    - SHA384\r\n    - SHA3_256E\r\n    - SHA3_256\r\n    - SHA3_512E\r\n    - SHA3_512\r\n    - SHA3_224E\r\n    - SHA3_224\r\n    - SHA3_384E\r\n    - SHA3_384\r\n    - SKEIN256E\r\n    - SKEIN256\r\n    - SKEIN512E\r\n    - SKEIN512\r\n    - BLAKE2B256E\r\n    - BLAKE2B256\r\n    - BLAKE2B512E\r\n    - BLAKE2B512\r\n    - BLAKE2B160E\r\n    - BLAKE2B160\r\n    - BLAKE2B224E\r\n    - BLAKE2B224\r\n    - BLAKE2B384E\r\n    - BLAKE2B384\r\n    - BLAKE2BP512E\r\n    - BLAKE2BP512\r\n    - BLAKE2S256E\r\n    - BLAKE2S256\r\n    - BLAKE2S160E\r\n    - BLAKE2S160\r\n    - BLAKE2S224E\r\n    - BLAKE2S224\r\n    - BLAKE2SP256E\r\n    - BLAKE2SP256\r\n    - BLAKE2SP224E\r\n    - BLAKE2SP224\r\n    - SHA1E\r\n    - SHA1\r\n    - MD5E\r\n    - MD5\r\n    - WORM\r\n    - URL\r\n    - X*\r\n  - operating system: linux x86_64\r\n  - remote types:\r\n    - git\r\n    - gcrypt\r\n    - p2p\r\n    - S3\r\n    - bup\r\n    - directory\r\n    - rsync\r\n    - web\r\n    - bittorrent\r\n    - webdav\r\n    - adb\r\n    - tahoe\r\n    - glacier\r\n    - ddar\r\n    - git-lfs\r\n    - httpalso\r\n    - borg\r\n    - hook\r\n    - external\r\n  - supported repository versions:\r\n    - 8\r\n  - upgrade supported from repository versions:\r\n    - 0\r\n    - 1\r\n    - 2\r\n    - 3\r\n    - 4\r\n    - 5\r\n    - 6\r\n    - 7\r\n  - version: 8.20201129-geb388e6\r\n## location\r\n  - path: /rdma/vast-rdma/scratch/Sat/djarecka/dandi\r\n  - type: directory\r\n## metadata_extractors\r\n  - annex:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.annex\r\n    - version: None\r\n  - audio:\r\n    - load_error: No module named 'mutagen' [audio.py:<module>:17]\r\n    - module: datalad.metadata.extractors.audio\r\n  - datacite:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datacite\r\n    - version: None\r\n  - datalad_core:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_core\r\n    - version: None\r\n  - datalad_rfc822:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_rfc822\r\n    - version: None\r\n  - exif:\r\n    - load_error: No module named 'exifread' [exif.py:<module>:16]\r\n    - module: datalad.metadata.extractors.exif\r\n  - frictionless_datapackage:\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.frictionless_datapackage\r\n    - version: None\r\n  - image:\r\n    - load_error: No module named 'PIL' [image.py:<module>:16]\r\n    - module: datalad.metadata.extractors.image\r\n  - xmp:\r\n    - load_error: No module named 'libxmp' [xmp.py:<module>:20]\r\n    - module: datalad.metadata.extractors.xmp\r\n## python\r\n  - implementation: CPython\r\n  - version: 3.8.6\r\n## system\r\n  - distribution: centos/7/Core\r\n  - encoding:\r\n    - default: utf-8\r\n    - filesystem: utf-8\r\n    - locale.prefered: UTF-8\r\n  - max_path_length: 287\r\n  - name: Linux\r\n  - release: 3.10.0-1062.el7.x86_64\r\n  - type: posix\r\n  - version: #1 SMP Wed Aug 7 18:08:02 UTC 2019\r\n</details>\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5446/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5446/timeline", "performed_via_github_app": null}