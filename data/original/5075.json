{"url": "https://api.github.com/repos/datalad/datalad/issues/5075", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5075/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5075/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5075/events", "html_url": "https://github.com/datalad/datalad/issues/5075", "id": 728187561, "node_id": "MDU6SXNzdWU3MjgxODc1NjE=", "number": 5075, "title": "`subdatasets -r` listing: should be fast(er) ", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 289240596, "node_id": "MDU6TGFiZWwyODkyNDA1OTY=", "url": "https://api.github.com/repos/datalad/datalad/labels/performance", "name": "performance", "color": "f4b2d8", "default": false, "description": "Improve performance of an existing feature"}, {"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2020-10-23T12:42:55Z", "updated_at": "2020-10-23T22:49:44Z", "closed_at": "2020-10-23T22:49:44Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "haven't look in detail yet but IMHO `subdatasets` seems to be doing something `avoidable`.  if `subdatasets -r` supposed to list only \"known\" subdatasets, should it even \"consult\" `.config` of leaf datasets if there is no `.gitmodules` in the top directory of that leaf dataset? \r\n\r\nHere is the flame graph of running process where it was slowly listing leaf subdatasets: http://www.onerussian.com/tmp/busy-datalad-subdatasets-1.svg . So it seems (didn't look in detail) that .config is consulted by AnnexRepo in `__init__`, which I guess we instantiate to verify that subdataset is installed...  May be could be \"avoided\"?  (didn't look in detail yet)\r\n\r\nAlso,  If it is collecting all kinds of \"useful information\" which is otherwise disregarded at the end (e.g. whenever I just need to list subdatasets), we might look into making such \"additional lookup\" lazy (i.e. triggered only when some key is requested from the yielded record).", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5075/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5075/timeline", "performed_via_github_app": null}