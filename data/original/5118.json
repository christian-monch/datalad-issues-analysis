{"url": "https://api.github.com/repos/datalad/datalad/issues/5118", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5118/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5118/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5118/events", "html_url": "https://github.com/datalad/datalad/issues/5118", "id": 734901170, "node_id": "MDU6SXNzdWU3MzQ5MDExNzA=", "number": 5118, "title": "Windows: Detect when running in conda and trying to use posix but not being in login shell", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 188141023, "node_id": "MDU6TGFiZWwxODgxNDEwMjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/platform-windows", "name": "platform-windows", "color": "0052cc", "default": false, "description": "Issue concerned with Windows"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-11-02T23:14:30Z", "updated_at": "2020-11-03T16:08:01Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Due to https://github.com/ContinuumIO/anaconda-issues/issues/12124 users might end up in a conda environment's `bash` which would have \"trimmed\" PATH, so datalad would not see git-annex if installed in conda environment etc.  I wonder if, somewhat similarly to what we do for a standalone build (tune up PATH to use standalone's `git`), tune up `PATH` to the best of our knowledge if we see that 1. we are running on Windows, 2. in conda, 3. `Library\\bin` (and may be something else) of that conda environment is not in the PATH\r\n\r\ninvalidness of the name is considered without extension, e.g. `con.txt` is also invalid\r\n\r\nrelevant useful references\r\n- archeology behind: https://superuser.com/a/613335 stems from CP/M (that is 1960s)\r\n- how to force (`mkdir \\\\.\\C:\\tmp\\con`) https://superuser.com/questions/86999/why-cant-i-name-a-folder-or-file-con-in-windows\r\n\r\nfuller list https://superuser.com/a/844514: \r\n\r\nCON\r\nPRN\r\nAUX\r\nNUL\r\nCOM0, COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9\r\nLPT0, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, LPT9", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5118/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5118/timeline", "performed_via_github_app": null}