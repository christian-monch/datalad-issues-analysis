{"url": "https://api.github.com/repos/datalad/datalad/issues/843", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/843/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/843/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/843/events", "html_url": "https://github.com/datalad/datalad/issues/843", "id": 177401855, "node_id": "MDU6SXNzdWUxNzc0MDE4NTU=", "number": 843, "title": "git clone fails in master branch (actually: NOT)", "user": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778590, "node_id": "MDU6TGFiZWw2Mzc3ODU5MA==", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-normal", "name": "severity-normal", "color": "ff8888", "default": false, "description": "standard severity"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2016-09-16T11:17:57Z", "updated_at": "2016-09-20T12:15:02Z", "closed_at": "2016-09-20T12:15:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Currently we got a lot of cloning failures within the tests. This happens in master branch! Most simple example:\n\n```\n$> nosetests -s -v datalad/tests/test_testrepos.py:test_clone\ndatalad.tests.test_testrepos.test_clone ... ERROR\n\n======================================================================\nERROR: datalad.tests.test_testrepos.test_clone\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/nose/case.py\", line 197, in runTest\n    self.test(*self.arg)\n  File \"/home/ben/Development/datalad/datalad/tests/utils.py\", line 686, in newfunc\n    t(*(arg + (uri,)), **kw)\n  File \"/home/ben/Development/datalad/datalad/tests/utils.py\", line 516, in newfunc\n    return t(*(arg + (filename,)), **kw)\n  File \"/home/ben/Development/datalad/datalad/tests/test_testrepos.py\", line 39, in test_clone\n    output = r.run([\"git\" , \"clone\", src, tempdir], log_online=True)\n  File \"/home/ben/Development/datalad/datalad/cmd.py\", line 297, in run\n    raise CommandError(str(cmd), msg, status, out[0], out[1])\nCommandError: CommandError: command '['git', 'clone', 'git://github.com/datalad/testrepo--basic--r1', '/tmp/datalad_temp_test_cloneue2vNN']' failed with exitcode 128.\nFailed to run ['git', 'clone', 'git://github.com/datalad/testrepo--basic--r1', '/tmp/datalad_temp_test_cloneue2vNN'] under None. Exit code=128. out= err=Cloning into '/tmp/datalad_temp_test_cloneue2vNN'...\n\n-------------------- >> begin captured logging << --------------------\ndatalad.utils: Level 5: Importing datalad.utils\ndatalad.utils: Level 5: Done importing datalad.utils\n--------------------- >> end captured logging << ---------------------\n\n----------------------------------------------------------------------\nRan 1 test in 6.585s\n\nFAILED (errors=1)\n```\n\nI did not manage yet to figure out, what this is about. It happens via direct git calls by the `Runner` class as well as via GitPython. But: Apparently it happens within the context of the tests only. I cannot reproduce it manually. Neither via python nor via the shell. I used the very same calls. I even did it in parallel with the debugger. Stepped to the point where it would be called, and executed the actual call in another terminal. Tried it via Shell command, via `GitRepo`, directly via Gitpython function - no result. It works. Just not within the tests. I even copied all environment variables. I have no idea what is happening atm or how the context the tests are running in differ from what I set up to reproduce it.\nSo - any idea is welcome.\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/843/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/843/timeline", "performed_via_github_app": null}