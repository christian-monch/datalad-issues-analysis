{"url": "https://api.github.com/repos/datalad/datalad/issues/5033", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5033/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5033/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5033/events", "html_url": "https://github.com/datalad/datalad/issues/5033", "id": 721089572, "node_id": "MDU6SXNzdWU3MjEwODk1NzI=", "number": 5033, "title": "install/get: ideally should add to candidates a URL based on super's ", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2020-10-14T02:46:58Z", "updated_at": "2021-07-11T14:30:27Z", "closed_at": "2021-07-11T14:30:27Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "If I clone/install a super-dataset, which has **only** immediate subdatasets installed, but not subdatasets (although available from their original location with \"relative path URLs\", `datalad install` in such a clone would fail since it nohow considers urls \"built up\" from the url present (only) in super dataset's .gitmodules\r\n\r\n<details>\r\n<summary>full dump from an example</summary> \r\n\r\n```shell\r\n> git remote show origin\r\n* remote origin\r\n  Fetch URL: /tmp/tttt\r\n  Push  URL: /tmp/tttt\r\n  HEAD branch: master\r\n  Remote branches:\r\n    git-annex tracked\r\n    master    tracked\r\n  Local branch configured for 'git pull':\r\n    master merges with remote master\r\n  Local refs configured for 'git push':\r\n    git-annex pushes to git-annex (fast-forwardable)\r\n    master    pushes to master    (up to date)\r\n(dev3) 1 29608 [1].....................................:Tue 13 Oct 2020 10:42:04 PM EDT:.\r\n(git-annex)lena:/tmp/tttt-clone[master]\r\n$> cat .gitmodules \r\n[submodule \"haxby\"]\r\n\tpath = haxby\r\n\turl = smaug:/mnt/btrfs/datasets/datalad/crawl/labs/haxby\r\n\tdatalad-id = 01cfb952-8439-11e6-af53-002590f97d84\r\n[submodule \"abide\"]\r\n\tpath = abide\r\n\turl = falkor.datalad.org:/srv/datasets.datalad.org/www/abide/\r\n\tdatalad-id = 064527ea-92b3-11e7-8836-002590f97d84\r\n(dev3) 1 29609 [1].....................................:Tue 13 Oct 2020 10:42:08 PM EDT:.\r\n(git-annex)lena:/tmp/tttt-clone[master]\r\n$> datalad install haxby\r\n(dev3) 1 29610 [1].....................................:Tue 13 Oct 2020 10:42:25 PM EDT:.\r\n(git-annex)lena:/tmp/tttt-clone[master]\r\n$> ls haxby\r\ntotal 16\r\n4 attention/  4 dataset_description.json  4 life/  4 raiders/\r\n(dev3) 1 29611 [1].....................................:Tue 13 Oct 2020 10:42:27 PM EDT:.\r\n(git-annex)lena:/tmp/tttt-clone[master]\r\n$> cat haxby/.gitmodules \r\n[submodule \"raiders\"]\r\n\tpath = raiders\r\n\turl = ./raiders\r\n[submodule \"attention\"]\r\n\tpath = attention\r\n\turl = ./attention\r\n[submodule \"life\"]\r\n\tpath = life\r\n\turl = ./life\r\n(dev3) 1 29612 [1].....................................:Tue 13 Oct 2020 10:42:49 PM EDT:.\r\n(git-annex)lena:/tmp/tttt-clone[master]\r\n$> datalad install -r haxby\r\n[INFO   ] Installing Dataset(/tmp/tttt-clone/haxby) to get /tmp/tttt-clone/haxby recursively \r\n[ERROR  ] Failed to clone from any candidate source URL. Encountered errors per each url were:                   \r\n| - /tmp/tttt/haxby/attention\r\n  CommandError: 'git clone --progress /tmp/tttt/haxby/attention /tmp/tttt-clone/haxby/attention' failed with exitcode 128 [err: 'fatal: repository '/tmp/tttt/haxby/attention' does not exist'] [install(/tmp/tttt-clone/haxby/attention)] \r\ninstall(error): /tmp/tttt-clone/haxby/attention (dataset) [Failed to clone from any candidate source URL. Encountered errors per each url were:\r\n- /tmp/tttt/haxby/attention\r\n  CommandError: 'git clone --progress /tmp/tttt/haxby/attention /tmp/tttt-clone/haxby/attention' failed with exitcode 128 [err: 'fatal: repository '/tmp/tttt/haxby/attention' does not exist']]\r\n[ERROR  ] Failed to clone from any candidate source URL. Encountered errors per each url were:                   \r\n| - /tmp/tttt/haxby/life\r\n  CommandError: 'git clone --progress /tmp/tttt/haxby/life /tmp/tttt-clone/haxby/life' failed with exitcode 128 [err: 'fatal: repository '/tmp/tttt/haxby/life' does not exist'] [install(/tmp/tttt-clone/haxby/life)] \r\ninstall(error): /tmp/tttt-clone/haxby/life (dataset) [Failed to clone from any candidate source URL. Encountered errors per each url were:\r\n- /tmp/tttt/haxby/life\r\n  CommandError: 'git clone --progress /tmp/tttt/haxby/life /tmp/tttt-clone/haxby/life' failed with exitcode 128 [err: 'fatal: repository '/tmp/tttt/haxby/life' does not exist']]\r\n[ERROR  ] Failed to clone from any candidate source URL. Encountered errors per each url were:                   \r\n| - /tmp/tttt/haxby/raiders\r\n  CommandError: 'git clone --progress /tmp/tttt/haxby/raiders /tmp/tttt-clone/haxby/raiders' failed with exitcode 128 [err: 'fatal: repository '/tmp/tttt/haxby/raiders' does not exist'] [install(/tmp/tttt-clone/haxby/raiders)] \r\ninstall(error): /tmp/tttt-clone/haxby/raiders (dataset) [Failed to clone from any candidate source URL. Encountered errors per each url were:\r\n- /tmp/tttt/haxby/raiders\r\n  CommandError: 'git clone --progress /tmp/tttt/haxby/raiders /tmp/tttt-clone/haxby/raiders' failed with exitcode 128 [err: 'fatal: repository '/tmp/tttt/haxby/raiders' does not exist']]\r\naction summary:\r\n  get (notneeded: 1)\r\n  install (error: 3)\r\n\r\n```\r\n</details>", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5033/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5033/timeline", "performed_via_github_app": null}