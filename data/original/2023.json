{"url": "https://api.github.com/repos/datalad/datalad/issues/2023", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2023/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2023/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2023/events", "html_url": "https://github.com/datalad/datalad/issues/2023", "id": 281449480, "node_id": "MDU6SXNzdWUyODE0NDk0ODA=", "number": 2023, "title": "keyring doesn't wait for secure storage to get unlocked", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-12-12T16:31:01Z", "updated_at": "2017-12-12T16:31:01Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "#### What is the problem?\r\n\r\nkeyring does async call without waiting for user to unlock the passwords storage\r\n```shell\r\n$> datalad download-url 's3://hcp-openaccess/HCP_1200/100307/MEG/StoryM/eravg/100307_MEG_StoryM_eravg_[LM-TEV-storsentnon]_[BT-diff]_[MODE-mag].mat'\r\n[INFO   ] Downloading 's3://hcp-openaccess/HCP_1200/100307/MEG/StoryM/eravg/100307_MEG_StoryM_eravg_[LM-TEV-storsentnon]_[BT-diff]_[MODE-mag].mat' into '.' \r\nERROR: To make asynchronous calls, receive signals or export objects, D-Bus connections must be attached to a main loop by passing mainloop=... to the constructor or calling dbus.set_default_main_loop(...) [connection.py:add_signal_receiver:400]\r\n[ERROR  ] 1 url(s) failed to download [download_url.py:__call__:110] (RuntimeError) \r\n\r\n```\r\nso I need to run command twice (on 2nd it uses unlocked keystore)\r\n#### What steps will reproduce the problem?\r\n\r\nlogin afresh, while your passwords storage is still locked, and try dto download something\r\n\r\nwe need to see if we could make keyring wait for the secure storage to get unlocked\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2023/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2023/timeline", "performed_via_github_app": null}