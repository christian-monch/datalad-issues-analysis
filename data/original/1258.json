{"url": "https://api.github.com/repos/datalad/datalad/issues/1258", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1258/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1258/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1258/events", "html_url": "https://github.com/datalad/datalad/issues/1258", "id": 205465120, "node_id": "MDU6SXNzdWUyMDU0NjUxMjA=", "number": 1258, "title": "add_url_to_file batched seems to not batch but start new process each time -- 1 commit per each file", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/35", "html_url": "https://github.com/datalad/datalad/milestone/35", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/35/labels", "id": 2083028, "node_id": "MDk6TWlsZXN0b25lMjA4MzAyOA==", "number": 35, "title": "Release 0.5", "description": "Finish ultimate DB support and construct first more or less complete openfmri metadataset which would have links to access data from tarballs or straight from extracted files on S3 ", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-10-20T16:49:47Z", "updated_at": "2017-06-13T06:01:40Z", "due_on": null, "closed_at": "2017-06-13T06:01:40Z"}, "comments": 1, "created_at": "2017-02-05T23:59:26Z", "updated_at": "2017-02-09T16:12:13Z", "closed_at": "2017-02-07T14:21:11Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```shell\r\n[DEBUG] Adding .dataladQeVpdz/fsaverage/label/rh.cortex.label to annex pointing to dl+archive:MD5E-s325844218--298f9c517003a3127b19e26bed2c3a01.tar.gz#path=fsaverage/label/rh.cortex.label&size=5964904 and with options None \r\n[DEBUG] Initiating a new process for BatchedAnnex(annex_cmd=['addurl'], annex_options=['--with-files', '--json'], git_options=<<['-c', 'receive.autogc...>>, output_proc=<function>, path='/tmp/fsaverage2') \r\n[DEBUG] Closing stdin of <subprocess.Popen object at 0x7f9dde380350> and waiting process to finish \r\n[DEBUG] Process <subprocess.Popen object at 0x7f9dde380350> has finished \r\n[DEBUG] Adding .dataladQeVpdz/fsaverage/label/rh.BA2_exvivo.label to annex pointing to dl+archive:MD5E-s325844218--298f9c517003a3127b19e26bed2c3a01.tar.gz#path=fsaverage/label/rh.BA2_exvivo.label&size=265610 and with options None \r\n[DEBUG] Initiating a new process for BatchedAnnex(annex_cmd=['addurl'], annex_options=['--with-files', '--json'], git_options=<<['-c', 'receive.autogc...>>, output_proc=<function>, path='/tmp/fsaverage2') \r\n[DEBUG] Closing stdin of <subprocess.Popen object at 0x7f9dde380350> and waiting process to finish \r\n[DEBUG] Process <subprocess.Popen object at 0x7f9dde380350> has finished \r\n...\r\n```\r\nI believe it worked just fine before.  Tested with 0.4.1 to see the same behavior -- so it might well be somewere changed in git-annex?  I guess we did not test for that detail (reuse of the same process + 1 commit for all files addition)", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1258/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1258/timeline", "performed_via_github_app": null}