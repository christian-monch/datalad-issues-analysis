{"url": "https://api.github.com/repos/datalad/datalad/issues/1553", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1553/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1553/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1553/events", "html_url": "https://github.com/datalad/datalad/issues/1553", "id": 234956697, "node_id": "MDU6SXNzdWUyMzQ5NTY2OTc=", "number": 1553, "title": "datalad install in master uses 'url' from .gitmodules as a source of last resort??", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2017-06-09T22:55:36Z", "updated_at": "2017-08-29T08:18:21Z", "closed_at": "2017-08-29T08:18:21Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As originally appeared in #1549, datalad install -r failed on  https://github.com/psychoinformatics-de/studyforrest-data  although it works with 0.5.x version (besides the #1549 issue which is complimentary to this one I think):\r\nwith 0.5.x (0.5.1.dev132)\r\n```shell\r\n*yoh@hopa:/tmp> datalad install -r  https://github.com/psychoinformatics-de/studyforrest-data\r\n[INFO   ] Installing dataset at /tmp/studyforrest-data from https://github.com/psychoinformatics-de/studyforrest-data \r\n[INFO   ] Installing subdataset <Dataset path=/tmp/studyforrest-data/aligned> \r\n[INFO   ] Submodule HEAD got detached. Resetting branch master to point to 72b577b3. Original location was 47e53498 \r\n[INFO   ] Installing subdataset <Dataset path=/tmp/studyforrest-data/freesurfer> \r\n[INFO   ] Installing subdataset <Dataset path=/tmp/studyforrest-data/multires7T> \r\n[INFO   ] Submodule HEAD got detached. Resetting branch master to point to bad942cc. Original location was 869c290c \r\n[INFO   ] Installing subdataset <Dataset path=/tmp/studyforrest-data/phase2> \r\n[INFO   ] Submodule HEAD got detached. Resetting branch master to point to 5cd35c44. Original location was fbb5d619 \r\n[INFO   ] Installing subdataset <Dataset path=/tmp/studyforrest-data/structural> \r\n[INFO   ] Installing subdataset <Dataset path=/tmp/studyforrest-data/templatetransforms> \r\n[INFO   ] Submodule HEAD got detached. Resetting branch master to point to 98584d15. Original location was 424d1252 \r\n[INFO   ] Obtaining <Dataset path=/tmp/studyforrest-data/aligned> underneath . recursively \r\n[INFO   ] Installing subdataset /tmp/studyforrest-data/aligned/src/phase1 \r\nUsername for 'https://github.com': \r\n```\r\nand with master (0.5.1.dev543) we fail since it seems to ignore url entirely and just build candidate urls from the paths (as shown in #1549):\r\n```shell\r\nyoh@hopa:/tmp> datalad install -r  https://github.com/psychoinformatics-de/studyforrest-data\r\n[INFO   ] Cloning dataset from 'https://github.com/psychoinformatics-de/studyforrest-data' to '/tmp/studyforrest-data' \r\ninstall(ok): /tmp/studyforrest-data (dataset)\r\n[INFO   ] Installing <Dataset path=/tmp/studyforrest-data> recursively \r\n[INFO   ] Cloning dataset from 'https://github.com/psychoinformatics-de/studyforrest-data/aligned' to '/tmp/studyforrest-data/aligned' \r\n[ERROR  ] Failed to clone data from any candidate source URL: ['https://github.com/psychoinformatics-de/studyforrest-data/aligned', 'https://github.com/psychoinformatics-de/studyforrest-data/aligned/.git'] [install(/tmp/studyforrest-data/aligned)] \r\n[INFO   ] Cloning dataset from 'https://github.com/psychoinformatics-de/studyforrest-data-aligned.git' to '/tmp/studyforrest-data/aligned' \r\n[INFO   ] Submodule HEAD got detached. Resetting branch master to point to 72b577b3. Original location was 47e53498 \r\ninstall(ok): aligned (dataset) [Installed subdataset <Dataset path=/tmp/studyforrest-data/aligned>]\r\n[INFO   ] Cloning dataset from 'https://github.com/psychoinformatics-de/studyforrest-data-aligned.git/src/phase1' to '/tmp/studyforrest-data/aligned/src/phase1' \r\n[ERROR  ] Failed to clone data from any candidate source URL: ['https://github.com/psychoinformatics-de/studyforrest-data-aligned.git/src/phase1', 'https://github.com/psychoinformatics-de/studyforrest-data-aligned.git/src/phase1/.git'] [install(/tmp/studyforrest-data/aligned/src/phase1)] \r\n[INFO   ] Cloning dataset from 'https://github.com/psychoinformatics-de/phase1' to '/tmp/studyforrest-data/aligned/src/phase1' \r\nUsername for 'https://github.com': ^CERROR: \r\nInterrupted by user while doing magic:  [subprocess.py:_communicate_with_poll:1152]\r\n\r\nyoh@hopa:/tmp> datalad ls -r studyforrest-data/\r\nstudyforrest-data                      [git]  master  - 2016-03-01/06:20:45  X\r\nstudyforrest-data/aligned              [annex]  master  - 2016-01-20/04:43:59  X\r\nstudyforrest-data/aligned/src/phase1   not installed\r\nstudyforrest-data/aligned/src/phase2   not installed\r\nstudyforrest-data/aligned/src/tnt      not installed\r\nstudyforrest-data/freesurfer           not installed\r\nstudyforrest-data/multires7T           not installed\r\nstudyforrest-data/phase2               not installed\r\nstudyforrest-data/structural           not installed\r\nstudyforrest-data/templatetransforms   not installed\r\n```\r\n\r\nso it did install `aligned` from the url, but only after trying in an independent trial first to install by using paths, failing, logging an ERROR about that, and then trying a URL.  IMHO \r\n\r\n1. URL should have been tried first when provided\r\n2. all candidate urls should be tried in a single attempt, so we do not get those misleading ERROR messages that candidates were tried and none succeeded.", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1553/timeline", "performed_via_github_app": null}