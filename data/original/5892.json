{"url": "https://api.github.com/repos/datalad/datalad/issues/5892", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5892/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5892/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5892/events", "html_url": "https://github.com/datalad/datalad/pull/5892", "id": 970620110, "node_id": "MDExOlB1bGxSZXF1ZXN0NzEyNTQ3NTY1", "number": 5892, "title": "BF: do not crash, just skip whenever trying to delete non existing field in the underlying keyring", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 1746781627, "node_id": "MDU6TGFiZWwxNzQ2NzgxNjI3", "url": "https://api.github.com/repos/datalad/datalad/labels/merge-if-ok", "name": "merge-if-ok", "color": "fbca04", "default": false, "description": "OP considers this work done, and requests review/merge"}, {"id": 2919091393, "node_id": "MDU6TGFiZWwyOTE5MDkxMzkz", "url": "https://api.github.com/repos/datalad/datalad/labels/credentials", "name": "credentials", "color": "768F68", "default": false, "description": "Issues concerning credential(-management)"}, {"id": 3049454433, "node_id": "MDU6TGFiZWwzMDQ5NDU0NDMz", "url": "https://api.github.com/repos/datalad/datalad/labels/patch", "name": "patch", "color": "870048", "default": false, "description": "Increment the patch version when merged"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/88", "html_url": "https://github.com/datalad/datalad/milestone/88", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/88/labels", "id": 7035554, "node_id": "MI_kwDOANZqws4Aa1qi", "number": 88, "title": "0.14.8", "description": null, "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 8, "state": "closed", "created_at": "2021-08-05T15:26:32Z", "updated_at": "2021-09-10T14:21:07Z", "due_on": null, "closed_at": "2021-09-10T14:21:07Z"}, "comments": 2, "created_at": "2021-08-13T18:19:06Z", "updated_at": "2021-10-08T14:12:54Z", "closed_at": "2021-08-18T15:10:27Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5892", "html_url": "https://github.com/datalad/datalad/pull/5892", "diff_url": "https://github.com/datalad/datalad/pull/5892.diff", "patch_url": "https://github.com/datalad/datalad/pull/5892.patch"}, "body": "Fixing bug leading to a crash: We have pairs or more in composite\r\ncredentials. If user saved some but not all of them, then upon renew whenever\r\nwe try to delete them all we would crash here since keyring cannot delete the\r\nones it does not yet know.  So the easiest (although adhoc due to need to match\r\nmsg) is to handle such an exception.\r\n\r\nTo get it tested, I had to use a \"real\" keyring's backend (so they are called),\r\nand for that I had to RF our Keyring helper class to be capable of being\r\nprovided a keyring backend instance (or in other words -- a \"keyring\").  An odd\r\nlogic abit I left behind is that even though we are now explicitly asking for\r\nwhat keyring will be used, so we could store/use that instance if no explicit\r\nbackend is provided, but for consistency with current behavior (since to go\r\nagainst maint), decided to keep it as is and keep using module level bound\r\ninterfaces of keyring module in case if no backend instance was provided.\r\n\r\nSo now ._keyring  could be either keyring module (no backend instance provided,\r\nor actual keyring backend if it was provided (used only in the tests).\r\n\r\nAdded test also tests basic assumption that keyring is storing the name\r\nsomewhere, and deletes entire section whenever we delete entire credential.\r\nRelies on \"ad-hoc\" way to specify the filename. Somewhat inquired in\r\nhttps://github.com/jaraco/keyrings.alt/issues/45 on a better way.\r\n\r\nCloses #5889", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5892/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5892/timeline", "performed_via_github_app": null}