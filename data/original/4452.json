{"url": "https://api.github.com/repos/datalad/datalad/issues/4452", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4452/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4452/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4452/events", "html_url": "https://github.com/datalad/datalad/issues/4452", "id": 608570738, "node_id": "MDU6SXNzdWU2MDg1NzA3Mzg=", "number": 4452, "title": "update --recursive --follow parentds  should allow to not bother with non-updated subdatasets", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 736433505, "node_id": "MDU6TGFiZWw3MzY0MzM1MDU=", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-wishlist", "name": "severity-wishlist", "color": "ffeeee", "default": false, "description": "feature request, or bugs that are very difficult to fix due to design issues"}, {"id": 2767213993, "node_id": "MDU6TGFiZWwyNzY3MjEzOTkz", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-update", "name": "cmd-update", "color": "FEF2C0", "default": false, "description": "Issues relates to update functionality"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-04-28T19:50:06Z", "updated_at": "2021-03-17T02:32:09Z", "closed_at": "2021-03-17T02:32:09Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "ATM `update` with `--follow parentds` would go into each subdataset even when there is no need to go into it -- it was not changed in the parentds.  That leads to lengthy invocation of update to just traverse and accomplish nothing if there were no changes to parentds:\r\n```shell\r\n$> datalad update -d conp-dataset --recursive --follow parentds --merge ff-only\r\n[INFO   ] Fetching updates for Dataset(/mnt/btrfs/datasets/datalad/crawl/conp-dataset) \r\nmerge(ok): . (dataset) [Merged origin/master]                                                                                                          \r\nupdate(ok): . (dataset)\r\n[INFO   ] Fetching updates for Dataset(/mnt/btrfs/datasets/datalad/crawl/conp-dataset/projects/1000GenomesProject) \r\nmerge(ok): projects/1000GenomesProject (dataset) [Merged 9bf36faa927ca8bcea7a9166d97ca34c46ed1c08]                                                     \r\nupdate(ok): projects/1000GenomesProject (dataset)\r\n...\r\n```\r\n\r\nAnd I think such behavior is the safest by default and is inline with default behavior e.g. of `publish` since we might be in the situation when prior update did not work out fully in some subdataset, or may be there was an update to other branches (e.g. `git-annex`) which should be fetched regardless of the absence of changes in the default (master) branch.\r\n\r\nBut in some cases, where it is desired to fetch only updates to the subdatasets which were changed since the last update, having something like `--since=` in publish (or `diff`) would be of benefit.  That should result in quick completion e.g. if there were no changes, instead of the full traversal.", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4452/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4452/timeline", "performed_via_github_app": null}