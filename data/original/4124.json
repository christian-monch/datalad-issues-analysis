{"url": "https://api.github.com/repos/datalad/datalad/issues/4124", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4124/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4124/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4124/events", "html_url": "https://github.com/datalad/datalad/pull/4124", "id": 562037068, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyNzI4MzA1", "number": 4124, "title": "NF: create-sibling-ria command", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 135267875, "node_id": "MDU6TGFiZWwxMzUyNjc4NzU=", "url": "https://api.github.com/repos/datalad/datalad/labels/do-in-datalad", "name": "do-in-datalad", "color": "ffda63", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/65", "html_url": "https://github.com/datalad/datalad/milestone/65", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/65/labels", "id": 4992705, "node_id": "MDk6TWlsZXN0b25lNDk5MjcwNQ==", "number": 65, "title": "0.12.x", "description": null, "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2020-01-09T22:01:43Z", "updated_at": "2021-01-06T14:55:51Z", "due_on": null, "closed_at": "2021-01-06T14:55:51Z"}, "comments": 15, "created_at": "2020-02-08T15:46:59Z", "updated_at": "2020-02-27T19:26:07Z", "closed_at": "2020-02-19T11:07:27Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4124", "html_url": "https://github.com/datalad/datalad/pull/4124", "diff_url": "https://github.com/datalad/datalad/pull/4124.diff", "patch_url": "https://github.com/datalad/datalad/pull/4124.patch"}, "body": "This is the code that was used to push the HCP datasets to store.datalad.org -- written by @bpoldrack (see https://github.com/datalad/git-annex-ria-remote/pull/38). It is one of the last pieces of RIA functionality to move into -core (the actual special remote implementation being the very last one). It is being proposed as a separate PR, because it can function without it (HCP doesn't use the ria-special remote), and to keep the complexity of the PR more manageable.\r\n\r\nFeedback is very much welcome! Thanks!\r\n\r\nRelated:\r\n\r\n- #4068 consolidation on common operations with `create_sibling`\r\n- UX issues:\r\n  - https://github.com/datalad/git-annex-ria-remote/issues/44\r\n  - https://github.com/datalad/git-annex-ria-remote/issues/45\r\n\r\nUpdate by @bpoldrack :\r\n\r\nFrom my point of view, this is ready. Above mentioned UX issues are addressed and test failures fixed (includes a fix for #4151). A long the way I doscovered #4152 and #4153. However, those are neither fixed herein nor are fixes for that actually required for this PR.\r\n\r\nTests currently depend on installing `https://github.com/datalad/git-annex-ria-remote@transition-to-core`, which removes the conflicting implementation of `create-sibling-ria` therein. While this seems somewhat ugly, it should be a quite short lived approach. Rational: We are moving the special remote to core. I'm currently working on PR #4068 to integrate execution via a persistent remote shell. When this is done, git-annex-ria-remote can go into core completely. If we had an actual dependency on the `ria_remote` package via `setup.py`, this would lead to people installing it, when shortly afterwards it will become at least unnecessary, if not conflicting to have it installed, which is why I consider this approach superior.\r\n\r\nEdit by @bpoldrack :\r\n\r\nPlans changed. Since there's some time pressure and a new idea re special remote configuration ( https://github.com/datalad/datalad/pull/4124#issuecomment-587487164 ), updated plan for ria-remote's move to core:\r\n  - move ria-remote as is with remote execution factored out for easier RF later on.\r\n  - once it's merged:\r\n      - this PR (`create-sibling-ria`) can remove Travis dependency it properly reference/import within core and be merged\r\n      - then special remote's `initremote` can be adapted to store the annex UUID in the bare repo's config\r\n      - and `clone` then needs to be aware to make use of it\r\n\r\nNote, that integration with #4068 is thereby postponed.\r\n\r\nSo, 3 PRs:\r\n  - the main move to core\r\n  - this very PR with adaptions\r\n  - change `RIARemote.initremote()` and datalad-clone\r\n ", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4124/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4124/timeline", "performed_via_github_app": null}