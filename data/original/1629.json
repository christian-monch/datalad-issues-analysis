{"url": "https://api.github.com/repos/datalad/datalad/issues/1629", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1629/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1629/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1629/events", "html_url": "https://github.com/datalad/datalad/issues/1629", "id": 240308316, "node_id": "MDU6SXNzdWUyNDAzMDgzMTY=", "number": 1629, "title": "update --merge -r tries to get to non-installed subrepositories", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778590, "node_id": "MDU6TGFiZWw2Mzc3ODU5MA==", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-normal", "name": "severity-normal", "color": "ff8888", "default": false, "description": "standard severity"}, {"id": 2767213993, "node_id": "MDU6TGFiZWwyNzY3MjEzOTkz", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-update", "name": "cmd-update", "color": "FEF2C0", "default": false, "description": "Issues relates to update functionality"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-07-04T04:26:17Z", "updated_at": "2021-03-08T16:24:32Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "```shell\r\n(git)hopa:~/datalad_aside2[master]\r\n$> datalad update --merge --recursive                   \r\n[INFO   ] Updating dataset '/home/yoh/datalad_aside2' ... \r\n[INFO   ] Merging updates... \r\nupdate(ok): . (dataset)\r\n[ERROR  ] 'NoneType' object has no attribute 'get_remotes' [update.py:__call__:132] (AttributeError) \r\n(dev) 2 25050 ->1.....................................:Tue 04 Jul 2017 12:23:08 AM EDT:.\r\n(git)hopa:~/datalad_aside2[master]\r\n$> datalad --version\r\ndatalad 0.7.0.dev1\r\n\r\nCopyright (c) 2013-2017 DataLad developers\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\nchanges on filesystem:                                                           \r\n crcns    | 2 +-\r\n indi     | 2 +-\r\n labs     | 2 +-\r\n openfmri | 2 +-\r\n(dev) 2 25051.....................................:Tue 04 Jul 2017 12:23:18 AM EDT:.\r\n(git)hopa:~/datalad_aside2[master]\r\n$> git diff\r\ndiff --git a/crcns b/crcns\r\nindex f70f982..ccddf75 160000\r\n--- a/crcns\r\n+++ b/crcns\r\n@@ -1 +1 @@\r\n-Subproject commit f70f9822a166ae7b3d2714f222ce0df265bae4d0\r\n+Subproject commit ccddf752a335c11215a3f0c5a2195cec130dedaa\r\ndiff --git a/indi b/indi\r\nindex e8ddd38..a50d85d 160000\r\n--- a/indi\r\n+++ b/indi\r\n@@ -1 +1 @@\r\n-Subproject commit e8ddd38f7eb1d3c8500c326bd90abf791ea3267b\r\n+Subproject commit a50d85d1d09423f6875720d43673cbfaeac01fb3\r\ndiff --git a/labs b/labs\r\nindex d6dd295..d8489e6 160000\r\n--- a/labs\r\n+++ b/labs\r\n@@ -1 +1 @@\r\n-Subproject commit d6dd295614b162e9d35150c6b8c4442420914566\r\n+Subproject commit d8489e61cee62323efe1ec039566d6723678a23a\r\ndiff --git a/openfmri b/openfmri\r\nindex 093e700..2f9f81e 160000\r\n--- a/openfmri\r\n+++ b/openfmri\r\n@@ -1 +1 @@\r\n-Subproject commit 093e70015853b48afc7428a3504b1ac5fd13af6a\r\n+Subproject commit 2f9f81e34b2a941f2bade857a4efe9cd08f633d2-dirty\r\nchanges on filesystem:                                                           \r\n crcns    | 2 +-\r\n indi     | 2 +-\r\n labs     | 2 +-\r\n openfmri | 2 +-\r\n\r\n$> datalad --dbg update --merge --recursive      \r\n[INFO   ] Updating dataset '/home/yoh/datalad_aside2' ... \r\n[INFO   ] Merging updates... \r\nupdate(ok): . (dataset)\r\nTraceback (most recent call last):\r\n  File \"/home/yoh/proj/datalad/datalad-master/venvs/dev/bin/datalad\", line 8, in <module>\r\n    main()\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/cmdline/main.py\", line 348, in main\r\n    ret = cmdlineargs.func(cmdlineargs)\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/interface/base.py\", line 424, in call_from_parser\r\n    ret = list(ret)\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/interface/utils.py\", line 674, in generator_func\r\n    result_renderer, result_xfm, _result_filter, **_kwargs):\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/interface/utils.py\", line 741, in _process_results\r\n    for res in results:\r\n  File \"/home/yoh/proj/datalad/datalad-master/datalad/distribution/update.py\", line 132, in __call__\r\n    remotes = repo.get_remotes(\r\nAttributeError: 'NoneType' object has no attribute 'get_remotes'\r\n()\r\n> /home/yoh/proj/datalad/datalad-master/datalad/distribution/update.py(132)__call__()\r\n-> remotes = repo.get_remotes(\r\n(Pdb) p repo\r\nNone\r\n(Pdb) l\r\n127  \t            # prepare return value\r\n128  \t            # TODO reuse AP for return props\r\n129  \t            res = get_status_dict('update', ds=ds, logger=lgr, refds=refds_path)\r\n130  \t            # get all remotes which have references (would exclude\r\n131  \t            # special remotes)\r\n132  ->\t            remotes = repo.get_remotes(\r\n133  \t                **({'exclude_special_remotes': True} if isinstance(repo, AnnexRepo) else {}))\r\n134  \t            if not remotes:\r\n135  \t                res['message'] = (\"No siblings known to dataset at %s\\nSkipping\",\r\n136  \t                                  repo.path)\r\n137  \t                res['status'] = 'notneeded'\r\n(Pdb) p ds\r\n<Dataset path=/home/yoh/datalad_aside2/adhd200>\r\n*(Pdb) p ds.is_installed()\r\nFalse\r\n\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1629/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1629/timeline", "performed_via_github_app": null}