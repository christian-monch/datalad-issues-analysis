{"url": "https://api.github.com/repos/datalad/datalad/issues/1176", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1176/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1176/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1176/events", "html_url": "https://github.com/datalad/datalad/issues/1176", "id": 198270388, "node_id": "MDU6SXNzdWUxOTgyNzAzODg=", "number": 1176, "title": "Hidden Exception problem?", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2017-01-01T15:10:11Z", "updated_at": "2017-01-18T16:41:00Z", "closed_at": "2017-01-18T16:41:00Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "While restoring my dev environment I stumbled upon this, which may be hidden, when all deps are installed, but could also be something totally different.\r\n\r\n````\r\n======================================================================\r\nERROR: datalad.tests.test_utils_testrepos.test_BasicAnnexTestRepo\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/mih/hacking/datalad/git/datalad/support/annexrepo.py\", line 774, in get_file_key\r\n    expect_fail=True)\r\n  File \"/home/mih/hacking/datalad/git/datalad/support/annexrepo.py\", line 398, in _run_annex_command\r\n    raise e\r\n  File \"/home/mih/hacking/datalad/git/datalad/support/annexrepo.py\", line 390, in _run_annex_command\r\n    return self.cmd_call_wrapper.run(cmd_list, **kwargs)\r\n  File \"/home/mih/hacking/datalad/git/datalad/cmd.py\", line 455, in run\r\n    cmd, env=self.get_git_environ_adjusted(), *args, **kwargs)\r\n  File \"/home/mih/hacking/datalad/git/datalad/cmd.py\", line 370, in run\r\n    raise CommandError(str(cmd), msg, status, out[0], out[1])\r\ndatalad.support.exceptions.CommandError: CommandError: command '['git', '-c', 'receive.autogc=0', '-c', 'gc.auto=0', 'annex', 'lookupkey', 'test.dat']' failed with exitcode 1\r\nFailed to run ['git', '-c', 'receive.autogc=0', '-c', 'gc.auto=0', 'annex', 'lookupkey', 'test.dat'] under '/tmp/datalad_temp_test_BasicAnnexTestRepou5y_6g0j'. Exit code=1. out= err=\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3/dist-packages/nose/case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"/home/mih/hacking/datalad/git/datalad/tests/utils.py\", line 536, in newfunc\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/home/mih/hacking/datalad/git/datalad/tests/test_utils_testrepos.py\", line 51, in test_BasicAnnexTestRepo\r\n    _test_BasicAnnexTestRepo(path)\r\n  File \"/home/mih/hacking/datalad/git/datalad/tests/test_utils_testrepos.py\", line 34, in _test_BasicAnnexTestRepo\r\n    ok_file_under_git(trepo.path, 'test.dat')\r\n  File \"/home/mih/hacking/datalad/git/datalad/tests/utils.py\", line 215, in ok_file_under_git\r\n    repo.get_file_key(file_repo_path)\r\n  File \"/home/mih/hacking/datalad/git/datalad/support/gitrepo.py\", line 290, in newfunc\r\n    result = func(self, files_new, *args, **kwargs)\r\n  File \"/home/mih/hacking/datalad/git/datalad/support/annexrepo.py\", line 786, in get_file_key\r\n    filename=files)\r\nTypeError: RuntimeError.__new__(FileInGitError) is not safe, use OSError.__new__()\r\n\r\n----------------------------------------------------------------------\r\nRan 559 tests in 285.725s\r\n\r\nFAILED (SKIP=67, errors=10)\r\n````", "closed_by": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1176/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1176/timeline", "performed_via_github_app": null}