{"url": "https://api.github.com/repos/datalad/datalad/issues/4309", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4309/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4309/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4309/events", "html_url": "https://github.com/datalad/datalad/issues/4309", "id": 582714867, "node_id": "MDU6SXNzdWU1ODI3MTQ4Njc=", "number": 4309, "title": "rerun: an option to remove outputs first + may be storing it in the run record", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778592, "node_id": "MDU6TGFiZWw2Mzc3ODU5Mg==", "url": "https://api.github.com/repos/datalad/datalad/labels/enhancement", "name": "enhancement", "color": "0052cc", "default": true, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-03-17T02:48:56Z", "updated_at": "2020-03-17T02:48:56Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Might be a twin brother (if not a duplicate) of #3206 (\"run: an option to NOT unlock outputs\").\r\n\r\nUse case is https://github.com/datalad/datalad-extensions . I use `datalad rerun` to quickly regenerate/commit all the templates.  Whenever templates generation process changes commit should reflect that change. That happens if I add a new extension to the list.  But it doesn't happen if e.g. I remove/disable an extension (like I did for `datalad-metalad`).  Since previously produced files were no modified by rerun, they were left committed as they were.  I can now envision the cases where script changes completely to e.g. produce differently named files.  `rerun` would then just breed new files and leave old ones behind where my intention would be for rerun is to redo previous operation so all the artifacts which are no longer produced are gone.\r\n\r\nI think such intention could only be expressed explicitly. So I think we do need an option to `run` and `rerun` which would explicitly state what to do with outputs -- \"auto\" (whatever it does now), \"unlock\", \"remove\".\r\n\r\nThen in this case I could have `rerun --outputs remove` and achieved a desired effect.\r\n\r\nI even wonder if `run` record itself should may be include this setting (then may be it should be `--outputs-prep` or alike).  Without it there is actually a risk of irreproducible behavior if e.g. `run`ed command behaves differently if output file is present (e.g. read-writes it) or not. E.g. with current automatic decision making on either to unlock or just remove behavior could differ depending on availability of annexed content.  With it, in my use case I could make an initial run declaring that all outputs should be first removed (if present) thus guaranteeing that subsequent reruns would do the same -- reproducible behavior as well.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4309/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4309/timeline", "performed_via_github_app": null}