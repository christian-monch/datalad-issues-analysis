{"url": "https://api.github.com/repos/datalad/datalad/issues/4094", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4094/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4094/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4094/events", "html_url": "https://github.com/datalad/datalad/pull/4094", "id": 555826062, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY3Njk3ODc4", "number": 4094, "title": "BF: cmdline: Don't capitalize first word of lines ending with \":\"", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-27T20:52:28Z", "updated_at": "2020-01-28T14:18:06Z", "closed_at": "2020-01-28T09:27:26Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4094", "html_url": "https://github.com/datalad/datalad/pull/4094", "diff_url": "https://github.com/datalad/datalad/pull/4094.diff", "patch_url": "https://github.com/datalad/datalad/pull/4094.patch"}, "body": "Our help text has lots of spots where the first word in a line is\r\nincorrectly capitalized when the line ends with a colon.  The code\r\nthat does this has a comment that says this is to capitalize the first\r\nword of all \"headings\", but it's not clear what those headings are.\r\n\r\nWithout this code, the help output of all of our current commands only\r\ndiffers in cases of incorrect capitalization, so it looks like this\r\ncode is no longer serving its original purpose while causing issues\r\nelsewhere.  Drop it.\r\n\r\nRe: https://github.com/datalad/datalad/pull/4091#discussion_r371312477\r\n\r\n---\r\n\r\nHere is the difference in help output before and after this command:\r\n\r\n<details>\r\n<summary>diff</summary>\r\n\r\n```python\r\nfrom itertools import chain\r\nimport subprocess as sp\r\nimport sys\r\n\r\nimport datalad.interface.base as di\r\n\r\nsp.run([\"datalad\", \"--help\"])\r\n\r\nsubcommands = map(di.get_cmdline_command_name,\r\n                  chain(*(g[2] for g in di.get_interface_groups())))\r\n\r\nfor subcommand in sorted(subcommands):\r\n    print(subcommand, file=sys.stderr)\r\n    sp.run([\"datalad\", subcommand, \"--help\"])\r\n```\r\n\r\n```diff\r\n--- /tmp/dl-command-help.1\t2020-01-27 15:49:04.383406891 -0500\r\n+++ /tmp/dl-command-help.2\t2020-01-27 15:49:17.715559872 -0500\r\n@@ -388,7 +388,7 @@\r\n \r\n Enabling a metadata extractor for a dataset is done by adding its name to the\r\n 'datalad.metadata.nativetype' configuration variable -- typically in the\r\n-Dataset's configuration file (.datalad/config), e.g.::\r\n+dataset's configuration file (.datalad/config), e.g.::\r\n \r\n   [datalad \"metadata\"]\r\n     nativetype = exif\r\n@@ -1054,7 +1054,7 @@\r\n credential store. Lastly, an *oauth* token stored in the Git\r\n configuration under variable *hub.oauthtoken* will be used automatically.\r\n Such a token can be obtained, for example, using the commandline Github\r\n-Interface (https://github.com/sociomantic/git-hub) by running:\r\n+interface (https://github.com/sociomantic/git-hub) by running:\r\n git hub setup (if no 2FA is used).\r\n \r\n *Arguments*\r\n@@ -1131,7 +1131,7 @@\r\n via python-gitlab, and all its features are supported. A particular GitLab\r\n site must be configured in a named section of a python-gitlab.cfg file\r\n (see https://python-gitlab.readthedocs.io/en/stable/cli.html#configuration\r\n-For details), such as::\r\n+for details), such as::\r\n \r\n   [mygit]\r\n   url = https://git.example.com\r\n@@ -1143,7 +1143,7 @@\r\n \r\n (Recursive) sibling creation for all, or a selected subset of subdatasets\r\n is supported. Three different project layouts for nested datasets are\r\n-Supported (see --layout):\r\n+supported (see --layout):\r\n \r\n \"hierarchy\"\r\n   Each dataset is placed into its own group, and the actual GitLab\r\n@@ -1456,7 +1456,7 @@\r\n    % datalad drop --dataset <path/to/dataset> --recursive\r\n \r\n Disable check to assure the configured minimum number of\r\n-Remote sources for dropped data::\r\n+remote sources for dropped data::\r\n \r\n    % datalad drop <path/to/content> --nocheck\r\n \r\n@@ -1998,7 +1998,7 @@\r\n When called with --report, this command reports information about what\r\n would be re-executed as a series of records. There will be a record\r\n for each revision in the specified revision range. Each of these will\r\n-Have one of the following \"rerun_action\" values:\r\n+have one of the following \"rerun_action\" values:\r\n \r\n   - run: the revision has a recorded command that would be re-executed\r\n   - skip-or-pick: the revision does not have a recorded command and would\r\n@@ -2166,12 +2166,12 @@\r\n \r\n Run a command and specify a directory as a dependency\r\n for the run. The contents of the dependency will be retrieved\r\n-Prior to running the script::\r\n+prior to running the script::\r\n \r\n    % datalad run -m 'run my script' --input 'data/*' 'code/script.sh'\r\n \r\n Run an executable script and specify output files of the\r\n-Script to be unlocked prior to running the script::\r\n+script to be unlocked prior to running the script::\r\n \r\n    % datalad run -m 'run my script' --input 'data/*' --output 'output_dir/*' 'code/script.sh'\r\n \r\n@@ -2290,7 +2290,7 @@\r\n dataset they shall operate on).\r\n \r\n For further customization there are two configuration settings per procedure\r\n-Available:\r\n+available:\r\n \r\n - 'datalad.procedures.<NAME>.call-format'\r\n   fully customizable format string to determine how to execute procedure\r\n@@ -2352,7 +2352,7 @@\r\n *Examples*\r\n \r\n Save any content underneath the current directory, without\r\n-Altering any potential subdataset::\r\n+altering any potential subdataset::\r\n \r\n    % datalad save .\r\n \r\n@@ -2365,13 +2365,13 @@\r\n    % datalad save -m 'add file' myfile.txt\r\n \r\n Save any content underneath the current directory, and\r\n-Recurse into any potential subdatasets::\r\n+recurse into any potential subdatasets::\r\n \r\n    % datalad save . --recursive\r\n \r\n Save any modification of known dataset content in the\r\n current directory, but leave untracked files (e.g. temporary files)\r\n-Untouched::\r\n+untouched::\r\n \r\n    % datalad save -u -d .\r\n \r\n@@ -2450,14 +2450,14 @@\r\n - autofield\r\n \r\n An alternative default mode can be configured by tuning the\r\n-Configuration variable 'datalad.search.default-mode'::\r\n+configuration variable 'datalad.search.default-mode'::\r\n \r\n   [datalad \"search\"]\r\n     default-mode = egrepcs\r\n \r\n Each search mode has its own default configuration for what kind of\r\n documents to query. The respective default can be changed via configuration\r\n-Variables::\r\n+variables::\r\n \r\n   [datalad \"search\"]\r\n     index-<mode_name>-documenttype = (all|datasets|files)\r\n@@ -2539,7 +2539,7 @@\r\n of datasets. This mode uses its own query language (not regular expressions)\r\n that is similar to other search engines. It supports logical conjunctions\r\n and fuzzy search terms. More information on this is available from the Whoosh\r\n-Project (search engine implementation):\r\n+project (search engine implementation):\r\n \r\n   - Description of the Whoosh query language:\r\n     http://whoosh.readthedocs.io/en/latest/querylang.html)\r\n@@ -2699,7 +2699,7 @@\r\n removal (or de-configuration) of a registered sibling.\r\n \r\n For each sibling (added, configured, or queried) all known sibling\r\n-Properties are reported. This includes:\r\n+properties are reported. This includes:\r\n \r\n \"name\"\r\n     Name of the sibling\r\n@@ -2715,7 +2715,7 @@\r\n a key that matches that in the Git configuration.\r\n \r\n By default, sibling information is rendered as one line per sibling\r\n-Following this scheme::\r\n+following this scheme::\r\n \r\n   <dataset_path>: <sibling_name>(<+|->) [<access_specification]\r\n \r\n@@ -2862,20 +2862,20 @@\r\n When it is necessary to address a subdataset record in a superdataset\r\n without causing a status query for the state _within_ the subdataset\r\n itself, this can be achieved by explicitly providing a reference dataset\r\n-And the path to the root of the subdataset like so::\r\n+and the path to the root of the subdataset like so::\r\n \r\n   datalad status --dataset . subdspath\r\n \r\n In contrast, when the state of the subdataset within the superdataset is\r\n not relevant, a status query for the content of the subdataset can be\r\n obtained by adding a trailing path separator to the query path (rsync-like\r\n-Syntax)::\r\n+syntax)::\r\n \r\n   datalad status --dataset . subdspath/\r\n \r\n When both aspects are relevant (the state of the subdataset content\r\n and the state of the subdataset within the superdataset), both queries\r\n-Can be combined::\r\n+can be combined::\r\n \r\n   datalad status --dataset . subdspath subdspath/\r\n \r\n@@ -2916,18 +2916,18 @@\r\n \r\n Address a subdataset record in a superdataset without\r\n causing a status query for the state _within_ the subdataset\r\n-Itself::\r\n+itself::\r\n \r\n    % datalad status --dataset . mysubdataset\r\n \r\n Get a status query for the state within the subdataset\r\n without causing a status query for the superdataset (using trailing\r\n-Path separator in the query path):::\r\n+path separator in the query path):::\r\n \r\n    % datalad status --dataset . mysubdataset/\r\n \r\n Report on the state of a subdataset in a superdataset and\r\n-On the state within the subdataset::\r\n+on the state within the subdataset::\r\n \r\n    % datalad status --dataset . mysubdataset mysubdataset/\r\n \r\n```\r\n\r\n</details>\r\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4094/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4094/timeline", "performed_via_github_app": null}