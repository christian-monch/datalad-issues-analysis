{"url": "https://api.github.com/repos/datalad/datalad/issues/1169", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1169/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1169/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1169/events", "html_url": "https://github.com/datalad/datalad/pull/1169", "id": 196663193, "node_id": "MDExOlB1bGxSZXF1ZXN0OTg4Nzk5Mzk=", "number": 1169, "title": "RF save/add/create/get", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 18, "created_at": "2016-12-20T12:40:49Z", "updated_at": "2018-07-14T16:14:44Z", "closed_at": "2017-01-18T16:40:58Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/1169", "html_url": "https://github.com/datalad/datalad/pull/1169", "diff_url": "https://github.com/datalad/datalad/pull/1169.diff", "patch_url": "https://github.com/datalad/datalad/pull/1169.patch"}, "body": "High-level summary of the desired changes -- after staring two weeks at the code, trying to come up with something that makes more sense, is easier to test, and minimizes the places in the code where similar things happen:\r\n\r\n- `save` will no longer do half of the work of `add` -- it will only operate on content that was \"added\" by other means before. that being said, once the clean version is implemented we can and should reevaluate the scope again\r\n- `save` will no longer do half of the work of `uninstall` and `remove`. only paths to things that presently exist on the file system will be dealt with -- no convenience deinit of vanished submodules, no (possibly dangerous) `git rm` of vanished files anymore. maybe there will be a `fix-this-mess` command later on, and maybe it will triggered by `save`, but clean implementation first\r\n- \"surgical\" save: only path that we given explicitly (or implicitely via something like `all_changes=True` will be saved. Even if other changes were staged already.\r\n- three layers of functionality are envisioned:\r\n   1. toplevel API: throw it any number of paths in any number of datasets in any order and it will do the right thing with the respective datasets (flags will enable modes such as \"also save this one in the superdataset\", or \"record all changes to known components\")\r\n   2. intermediate: give it a dictionary with datasets to touch and the paths to safe in them, and it will figure out the order of processing, discover possibly required intermediate datasets to handle in order to fulfill a request and do the right thing\r\n   3. low: given a single dataset and a list of paths to save, it will save that content in this single dataset -- regardless of the type of content (file, directory, subdataset state)\r\n\r\nTo be addressed issues:\r\n- [x] #1175 (parts of)\r\n- [x] #1174 \r\n- [x] #1173 \r\n- [x] #1172 \r\n- [x] #1141 \r\n- [x] #1140 \r\n- [x] #1109 \r\n- [x] #1106 (50% of it)\r\n- [x] #1096 \r\n- [x] #1016 \r\n- [x] #1004 \r\n\r\nAlso contains:\r\n\r\n- [x] #1119 \r\n", "closed_by": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1169/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1169/timeline", "performed_via_github_app": null}