{"url": "https://api.github.com/repos/datalad/datalad/issues/3988", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3988/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3988/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3988/events", "html_url": "https://github.com/datalad/datalad/issues/3988", "id": 545400762, "node_id": "MDU6SXNzdWU1NDU0MDA3NjI=", "number": 3988, "title": "Establish core `*Repo` classes", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 526935563, "node_id": "MDU6TGFiZWw1MjY5MzU1NjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/feedback-desired", "name": "feedback-desired", "color": "fbca04", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-05T10:42:54Z", "updated_at": "2020-01-06T17:57:49Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "Following the plan from https://github.com/datalad/datalad/issues/3192 I want to approach the move of the `Dataset` and `*Repo` classes under `datalad/core` in the source tree.\r\n\r\nHaving done a fair amount of digging through the code layers over the past few months, I am playing with an idea already mentioned in #3192:\r\n\r\n> move core dataset and repo classes into dataset/ (or rather core/dataset/). it might make sense to split Git/AnnexRepo into a core and an extended interface also (via inheritance), the number of rarely used methods is substantial ATM\r\n\r\nWhile from a technical angle this may cause more trouble then benefits, I believe the potential for strategic development is substantial. I am thinking about issues like #3714 that are both hard to see and hard to tackle, because everything is so intertwined.\r\n\r\nSo what about the following plan:\r\n\r\n- establish new base classes for `GitRepo`, `AnnexRepo`, `Dataset`, each with the name prefix `Core`, and place them, and only these new classes under `datalad/core`. The original classes will then derive from the new bases while keeping there API 100% intact.\r\n- adjust all code under `datalad/core` to exclusively use the new classes, and populate them with any functionality that is actually required by code in `datalad/core`. When moving code to the base classes, make sure strategic development goals are met (GitPy removal, `normalize_paths` removal, result communication rather than error handling in low-level code, etc.)\r\n\r\nThis is likely to become a lengthy process (slow transition of code from super into the base class), but it should be a process that minimizes the impact on users and functionality, while still providing the wiggle room necessary to tackle a number of long-standing issues.\r\n\r\nWhat do you think @datalad/developers ?", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3988/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3988/timeline", "performed_via_github_app": null}