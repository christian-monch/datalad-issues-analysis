{"url": "https://api.github.com/repos/datalad/datalad/issues/5949", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5949/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5949/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5949/events", "html_url": "https://github.com/datalad/datalad/pull/5949", "id": 986564115, "node_id": "MDExOlB1bGxSZXF1ZXN0NzI1NzU4ODQ4", "number": 5949, "title": "create-sibling-{github,gogs,gitea,gin} as instances of GitHub-like platforms", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778592, "node_id": "MDU6TGFiZWw2Mzc3ODU5Mg==", "url": "https://api.github.com/repos/datalad/datalad/labels/enhancement", "name": "enhancement", "color": "0052cc", "default": true, "description": ""}, {"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 1746781627, "node_id": "MDU6TGFiZWwxNzQ2NzgxNjI3", "url": "https://api.github.com/repos/datalad/datalad/labels/merge-if-ok", "name": "merge-if-ok", "color": "fbca04", "default": false, "description": "OP considers this work done, and requests review/merge"}, {"id": 2803374957, "node_id": "MDU6TGFiZWwyODAzMzc0OTU3", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-create-sibling-github", "name": "cmd-create-sibling-github", "color": "FEF2C0", "default": false, "description": ""}, {"id": 3049454381, "node_id": "MDU6TGFiZWwzMDQ5NDU0Mzgx", "url": "https://api.github.com/repos/datalad/datalad/labels/minor", "name": "minor", "color": "f1a60e", "default": false, "description": "Increment the minor version when merged"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/89", "html_url": "https://github.com/datalad/datalad/milestone/89", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/89/labels", "id": 7131484, "node_id": "MI_kwDOANZqws4AbNFc", "number": 89, "title": "0.16.0", "description": "", "creator": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "open_issues": 4, "closed_issues": 3, "state": "open", "created_at": "2021-09-07T19:00:51Z", "updated_at": "2021-10-13T06:59:59Z", "due_on": null, "closed_at": null}, "comments": 13, "created_at": "2021-09-02T11:11:59Z", "updated_at": "2021-09-23T07:20:43Z", "closed_at": "2021-09-22T17:47:28Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5949", "html_url": "https://github.com/datalad/datalad/pull/5949", "diff_url": "https://github.com/datalad/datalad/pull/5949.diff", "patch_url": "https://github.com/datalad/datalad/pull/5949.patch"}, "body": "This is a large PR that adds to new supported platforms (GIN, fixes #2680, and GOGS, fixes #5935), and reimplements the GitHub-platform support using the same code (fixes #5937).\r\n\r\nMoreover, it comes with the following changes:\r\n\r\n- [x] personal access tokens are now the only supported auth method. They can be provided via an option, or all supported mean to provide credentials.\r\n- [x] there is no support for automatically obtaining access tokens using other means of authentication, in order to keep the complexity of the implementation low (ping #5932)\r\n- [x] most code can be tested without network using a uniform `--dry-run` mode\r\n- [x] the same test code evaluates all three platform directly, using a particular instance each with a dedicated account. Respective token are deposited on appveyor.\r\n- [x] the previous `create-sibling-github` implementation has been replaced almost in full. In particular, the complex github-only credential handling was trimmed down to match the others. There is no dependency on `PyGithub` anymore.\r\n- [x]  enables direct specification of organization repos via a `[<org>/]repo` syntax. Fixes #3755 \r\n- [x]  makes API URLs configurable for all platforms, incl. GitHub. Fixes #5324\r\n- [x] no longer reconfigure an existing repo with `existing=skip` when there is no local conflicting sibling. Do so only with `existing=reconfigure`. Fixes #5941\r\n- [x]  implement `existing=replace` in a consistent manner, or stop supporting it (see related #5946). From discussion: only implement for github.\r\n- [x] robustify handling of deprecated parameters of `-github`, but @yarikoptic appears to argue for a hard rip-out in https://github.com/datalad/datalad/pull/5949#discussion_r701121819 Conlusion from call: implement a simple mapping, as planned\r\n- [x] investigate what causes the SSH connection attempt in the gin tests that stall the CI on mac and linux, e.g. https://ci.appveyor.com/project/mih/datalad/builds/40620305/job/36yo7wifel4164ld\r\n- [x] change `--auth` to something like `--credential <name>`, and document cfg and env spec possibilities in docstring\r\n- [x]  gitea was added with minimal effort\r\n- [x] run `isort`\r\n- [x] make pass over documentation\r\n- [x] decide on a (common) default for `--access-protocol` (see #5939). With GIN a sensible setup is a push URL with SSH (to enable annex-copy) and a pull URL with http (to enable --as-common-datasrc). For all other platforms pure-http or http/ssh can make equal sense (on windows pure-http would be a better choice due to limited SSH support, think credentials, think no multiplexing)", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5949/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5949/timeline", "performed_via_github_app": null}