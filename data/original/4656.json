{"url": "https://api.github.com/repos/datalad/datalad/issues/4656", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4656/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4656/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4656/events", "html_url": "https://github.com/datalad/datalad/issues/4656", "id": 644828867, "node_id": "MDU6SXNzdWU2NDQ4Mjg4Njc=", "number": 4656, "title": "datalad push has concurrency/locking issues", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2767220159, "node_id": "MDU6TGFiZWwyNzY3MjIwMTU5", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-push", "name": "cmd-push", "color": "FEF2C0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2020-06-24T18:34:10Z", "updated_at": "2021-02-24T17:09:02Z", "closed_at": "2021-02-24T17:09:02Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Scenario: hundreds of jobs change different clones of the same dataset. They save the generated content into different branches and `push`. Random pushes fail at like this:\r\n\r\n```\r\npublish(ok): . (dataset) [refs/heads/condor-60585.2->origin:refs/heads/condor-60585.2 [new branch]]\r\ncopy(ok): testfunny (file) [to origin...]\r\npublish(error): . (dataset) [refs/heads/git-annex->origin:refs/heads/git-annex [rejected] (fetch first)]\r\nPotential hints to solve encountered errors: \r\n1: Updates were rejected because the remote contains work that you do not have locally. This is usually caused by another repository pushing to the same ref. You may want to first integrate the remote changes (e.g., 'git pull ...') before pushing again. See the 'Note about fast-forwards' in 'git push --help' for details.\r\n```\r\n\r\ni.e. `git-annex` branch is gets outdated -- I think with the `push` call.", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4656/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4656/timeline", "performed_via_github_app": null}