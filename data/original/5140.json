{"url": "https://api.github.com/repos/datalad/datalad/issues/5140", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5140/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5140/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5140/events", "html_url": "https://github.com/datalad/datalad/issues/5140", "id": 740514555, "node_id": "MDU6SXNzdWU3NDA1MTQ1NTU=", "number": 5140, "title": "FOI: msys sh on windows ignores real user home", "user": {"login": "adswa", "id": 29738718, "node_id": "MDQ6VXNlcjI5NzM4NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/29738718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adswa", "html_url": "https://github.com/adswa", "followers_url": "https://api.github.com/users/adswa/followers", "following_url": "https://api.github.com/users/adswa/following{/other_user}", "gists_url": "https://api.github.com/users/adswa/gists{/gist_id}", "starred_url": "https://api.github.com/users/adswa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adswa/subscriptions", "organizations_url": "https://api.github.com/users/adswa/orgs", "repos_url": "https://api.github.com/users/adswa/repos", "events_url": "https://api.github.com/users/adswa/events{/privacy}", "received_events_url": "https://api.github.com/users/adswa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 188141023, "node_id": "MDU6TGFiZWwxODgxNDEwMjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/platform-windows", "name": "platform-windows", "color": "0052cc", "default": false, "description": "Issue concerned with Windows"}, {"id": 385404347, "node_id": "MDU6TGFiZWwzODU0MDQzNDc=", "url": "https://api.github.com/repos/datalad/datalad/labels/for%20our%20information", "name": "for our information", "color": "fbca04", "default": false, "description": "Announcement-type issues (possibly inconsequential)"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-11-11T06:47:25Z", "updated_at": "2021-01-18T19:17:22Z", "closed_at": "2021-01-18T19:17:22Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Demo: clone via SSH, real windows user has a key setup, but\r\n\r\n```\r\nsh-4.3$ git clone git@github.com:psychoinformatics-de/paper-remodnav.git tmp2\r\nCloning into 'tmp2'...\r\nWarning: Permanently added the RSA host key for IP address '140.82.121.3' to the list of known hosts.\r\ngit@github.com: Permission denied (publickey).\r\nfatal: Could not read from remote repository.\r\n\r\nPlease make sure you have the correct access rights\r\nand the repository exists.\r\n```\r\n\r\nRunning the same command in `cmd.exe` works.\r\n\r\nThe reason for that is that the msys shell \"maintains a different HOME:\r\n\r\n```\r\nsh-4.3$ set |grep HOME\r\nHOME=/home/datalad\r\nHOMEDRIVE=C:\r\nHOMEPATH='\\Users\\datalad'\r\n```\r\n\r\nwhich has nothing to do with the actual windows user home, hence also doesn't know about the SSH key.\r\n\r\nThis can be \"fixed\":\r\n\r\n```\r\nsh-4.3$ HOME=C:\\\\Users\\\\datalad git clone git@github.com:psychoinformatics-de/paper-\r\nremodnav.git tmp2\r\nCloning into 'tmp2'...\r\nremote: Enumerating objects: 238, done.\r\nremote: Counting objects: 100% (238/238), done.\r\nremote: Compressing objects: 100% (128/128), done.\r\nremote: Total 1546 (delta 140), reused 175 (delta 90), pack-reused 1308\r\nReceiving objects: 100% (1546/1546), 11.01 MiB | 5.22 MiB/s, done.\r\nResolving deltas: 100% (928/928), done.\r\n```\r\n\r\nThis also explains the strange difference in the [behavior of `git config`](https://github.com/datalad/datalad/pull/5002#discussion_r520853020).\r\n\r\nThis is likely to affect any usage of real windows programs within an msys environment. Whether to HOME readjustment is a real fix is uncertain.", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5140/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5140/timeline", "performed_via_github_app": null}