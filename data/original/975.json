{"url": "https://api.github.com/repos/datalad/datalad/issues/975", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/975/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/975/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/975/events", "html_url": "https://github.com/datalad/datalad/issues/975", "id": 180964769, "node_id": "MDU6SXNzdWUxODA5NjQ3Njk=", "number": 975, "title": "datalad search fails on Py2 with some pyld caching", "user": {"login": "satra", "id": 184063, "node_id": "MDQ6VXNlcjE4NDA2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/184063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/satra", "html_url": "https://github.com/satra", "followers_url": "https://api.github.com/users/satra/followers", "following_url": "https://api.github.com/users/satra/following{/other_user}", "gists_url": "https://api.github.com/users/satra/gists{/gist_id}", "starred_url": "https://api.github.com/users/satra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/satra/subscriptions", "organizations_url": "https://api.github.com/users/satra/orgs", "repos_url": "https://api.github.com/users/satra/repos", "events_url": "https://api.github.com/users/satra/events{/privacy}", "received_events_url": "https://api.github.com/users/satra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/33", "html_url": "https://github.com/datalad/datalad/milestone/33", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/33/labels", "id": 2041599, "node_id": "MDk6TWlsZXN0b25lMjA0MTU5OQ==", "number": 33, "title": "Release 0.3.2", "description": "Python 3 and other misc \r\n\r\nis getting superseded by 0.4", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2016-10-01T15:12:54Z", "updated_at": "2016-10-20T16:48:16Z", "due_on": "2016-10-08T07:00:00Z", "closed_at": "2016-10-20T16:48:16Z"}, "comments": 1, "created_at": "2016-10-04T18:09:54Z", "updated_at": "2016-10-07T19:17:08Z", "closed_at": "2016-10-05T00:49:40Z", "author_association": "NONE", "active_lock_reason": null, "body": "datalad 0.3.1\npyld.jsonld.**version** : '0.7.1'\n\n```\n$ datalad search bids\nNo DataLad dataset found at current location\nWould you like to search within DataLad meta-dataset under '/Users/satra/datalad' and search within it? (choices: yes, no): yes\n\n2016-10-04 14:01:54,726 [INFO   ] Performing search using central dataset '/Users/satra/datalad' (search.py:174)\n2016-10-04 14:01:54,747 [INFO   ] Loading and caching local meta-data... might take a few seconds (search.py:201)\nTraceback (most recent call last):\n  File \"/software/anaconda/envs/devpype/bin/datalad\", line 11, in <module>\n    sys.exit(main())\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/datalad/cmdline/main.py\", line 273, in main\n    cmdlineargs.result_renderer(ret, cmdlineargs)\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/datalad/metadata/search.py\", line 357, in result_renderer_cmdline\n    for location, r in res:\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/datalad/metadata/search.py\", line 180, in __call__\n    format=format, regex=regex):\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/datalad/metadata/search.py\", line 208, in __call__\n    meta = flatten_metadata_graph(meta)\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/datalad/metadata/__init__.py\", line 348, in flatten_metadata_graph\n    return jsonld.flatten(obj, ctx={\"@context\": \"http://schema.org/\"})\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/pyld/jsonld.py\", line 189, in flatten\n    return JsonLdProcessor().flatten(input_, ctx, options)\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/pyld/jsonld.py\", line 869, in flatten\n    'jsonld.FlattenError', cause=cause)\npyld.jsonld.JsonLdError: ('Could not expand input before flattening.',)\nType: jsonld.FlattenError\nCause: ('Could not perform JSON-LD expansion.',)\nType: jsonld.ExpandError\nCause: ('Dereferencing a URL did not result in a valid JSON-LD context.',)\nType: jsonld.ContextUrlError\nCode: loading remote context failed\nDetails: {'url': 'http://schema.org/'}\nCause:   File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/pyld/jsonld.py\", line 4070, in _retrieve_context_urls\n    remote_doc = load_document(url)\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/datalad/metadata/__init__.py\", line 326, in _cached_load_document\n    doc = pickle.load(open(doc_fname))\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/pyld/jsonld.py\", line 812, in expand\n    input_, {}, options['documentLoader'], options['base'])\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/pyld/jsonld.py\", line 4077, in _retrieve_context_urls\n    code='loading remote context failed', cause=cause)\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/pyld/jsonld.py\", line 865, in flatten\n    expanded = self.expand(input_, options)\n  File \"/software/anaconda/envs/devpype/lib/python2.7/site-packages/pyld/jsonld.py\", line 816, in expand\n    'jsonld.ExpandError', cause=cause)\n```\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/975/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/975/timeline", "performed_via_github_app": null}