{"url": "https://api.github.com/repos/datalad/datalad/issues/2522", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2522/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2522/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2522/events", "html_url": "https://github.com/datalad/datalad/issues/2522", "id": 325137776, "node_id": "MDU6SXNzdWUzMjUxMzc3NzY=", "number": 2522, "title": "fatal: 'git status --porcelain=2' failed in submodule submod", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2018-05-22T04:33:09Z", "updated_at": "2018-05-22T06:05:14Z", "closed_at": "2018-05-22T06:05:14Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "#### What is the problem?\r\nI guess caused by uploading annex 6.20180521+gitg78a648d0f-1~ndall+1, rushed to fix up inability to install previous build done on buster to those elder ubuntus on travis.\r\n\r\nanyways -- now, as testing of the PR #2520 https://travis-ci.org/datalad/datalad/jobs/381952429 shows , some tests started to fail in direct mode. HEre is a sample one\r\n```\r\n======================================================================\r\nERROR: datalad.distribution.tests.test_uninstall.test_remove_dataset_hierarchy\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/travis/virtualenv/python3.5.5/lib/python3.5/site-packages/nose/case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"/home/travis/build/datalad/datalad/datalad/tests/utils.py\", line 663, in newfunc\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/home/travis/build/datalad/datalad/datalad/distribution/tests/test_uninstall.py\", line 356, in test_remove_dataset_hierarchy\r\n    ok_clean_git(ds.path)\r\n  File \"/home/travis/build/datalad/datalad/datalad/tests/utils.py\", line 271, in ok_clean_git\r\n    submodules=not ignore_submodules))\r\n  File \"/home/travis/build/datalad/datalad/datalad/support/annexrepo.py\", line 707, in is_dirty\r\n    path=path)\r\n  File \"/home/travis/build/datalad/datalad/datalad/support/annexrepo.py\", line 665, in get_status\r\n    raise e\r\n  File \"/home/travis/build/datalad/datalad/datalad/support/annexrepo.py\", line 640, in get_status\r\n    'status', opts=options, expect_stderr=False))\r\n  File \"/home/travis/build/datalad/datalad/datalad/support/annexrepo.py\", line 2378, in _run_annex_command_json\r\n    raise e\r\n  File \"/home/travis/build/datalad/datalad/datalad/support/annexrepo.py\", line 2294, in _run_annex_command_json\r\n    **kwargs)\r\n  File \"/home/travis/build/datalad/datalad/datalad/support/annexrepo.py\", line 1054, in _run_annex_command\r\n    raise e\r\n  File \"/home/travis/build/datalad/datalad/datalad/support/annexrepo.py\", line 1046, in _run_annex_command\r\n    return self.cmd_call_wrapper.run(cmd_list, env=env, **kwargs)\r\n  File \"/home/travis/build/datalad/datalad/datalad/cmd.py\", line 668, in run\r\n    cmd, env=self.get_git_environ_adjusted(env), *args, **kwargs)\r\n  File \"/home/travis/build/datalad/datalad/datalad/cmd.py\", line 528, in run\r\n    raise CommandError(str(cmd), msg, status, out[0], out[1])\r\ndatalad.support.exceptions.CommandError: CommandError: command '['git', '-c', 'receive.autogc=0', '-c', 'gc.auto=0', '-c', 'core.bare=False', '--work-tree=.', 'annex', 'status', '--json', '--']' failed with exitcode 1\r\nFailed to run ['git', '-c', 'receive.autogc=0', '-c', 'gc.auto=0', '-c', 'core.bare=False', '--work-tree=.', 'annex', 'status', '--json', '--'] under '/tmp/datalad_temp_test_remove_dataset_hierarchymbb76ml0'. Exit code=1. out= err=fatal: this operation must be run in a work tree\r\nfatal: 'git status --porcelain=2' failed in submodule deep\r\ngit-annex: git status failed\r\n```", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2522/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2522/timeline", "performed_via_github_app": null}