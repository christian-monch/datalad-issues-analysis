{"url": "https://api.github.com/repos/datalad/datalad/issues/2491", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2491/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2491/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2491/events", "html_url": "https://github.com/datalad/datalad/pull/2491", "id": 322958894, "node_id": "MDExOlB1bGxSZXF1ZXN0MTg4MDE3MTY4", "number": 2491, "title": "entry_points in extensions -- not in effect whatsoever? (tests do not run, not available within datalad namespace)", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 63778590, "node_id": "MDU6TGFiZWw2Mzc3ODU5MA==", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-normal", "name": "severity-normal", "color": "ff8888", "default": false, "description": "standard severity"}, {"id": 63778594, "node_id": "MDU6TGFiZWw2Mzc3ODU5NA==", "url": "https://api.github.com/repos/datalad/datalad/labels/question", "name": "question", "color": "fbca04", "default": true, "description": "Issue asks a question rather than reporting a problem"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-05-14T19:59:06Z", "updated_at": "2018-05-16T08:07:19Z", "closed_at": "2018-05-16T08:07:16Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/2491", "html_url": "https://github.com/datalad/datalad/pull/2491", "diff_url": "https://github.com/datalad/datalad/pull/2491.diff", "patch_url": "https://github.com/datalad/datalad/pull/2491.patch"}, "body": "#### What is the problem?\r\nI am not sure how to run tests for \"everything in datalad\"... e.g. in below you could see that I am installing datalad-crawler (`datalad crawl` command does become available) and expected that I could just test `datalad` module and automagically tests for `datalad.crawl` would also be executed... but nope:\r\n```shell\r\n$> git clone git://github.com/datalad/datalad-crawler                            \r\n$> cd datalad-crawler \r\n$> virtualenv --system-site-packages venvs/dev                  \r\n$> source venvs/dev/bin/activate\r\n$> pip install -e .                 \r\n$> which datalad                                                         \r\n/tmp/datalad-crawler/venvs/dev/bin/datalad\r\n$> python -m nose -s -v datalad 2>&1 | grep crawl\r\n# nothing output of relevance to tests within datalad_crawler\r\n```\r\nalso now looking into .travis.yml -- seems that the only way is to just invoke them by naming the extension module (i.e. datalad_crawl). \r\n\r\nI saw that extensions (e.g. datalad-crawler) sets up entry_points for setuptools, e.g.:\r\n```python\r\n    entry_points = {\r\n        # 'datalad.extensions' is THE entrypoint inspected by the datalad API builders\r\n        'datalad.extensions': [\r\n            # the label in front of '=' is the command suite label\r\n            # the entrypoint can point to any symbol of any name, as long it is\r\n            # valid datalad interface specification (see demo in this extension)\r\n            'crawler=datalad_crawler:command_suite',\r\n        ],\r\n        'datalad.tests': [\r\n            'crawler=datalad_crawler',\r\n        ],\r\n    },\r\n```\r\nbut it seems that none of that in effect since e.g.\r\n```shell\r\n$> python -c 'import datalad.extensions as dl; print(dl.crawler)' \r\nTraceback (most recent call last):             \r\n  File \"<string>\", line 1, in <module>\r\nImportError: No module named extensions\r\n```\r\nSo what is the point behind all those entry_points records then or what am I doing wrong?", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2491/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2491/timeline", "performed_via_github_app": null}