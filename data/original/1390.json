{"url": "https://api.github.com/repos/datalad/datalad/issues/1390", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1390/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1390/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1390/events", "html_url": "https://github.com/datalad/datalad/issues/1390", "id": 215273479, "node_id": "MDU6SXNzdWUyMTUyNzM0Nzk=", "number": 1390, "title": "failed to publish new sub-dataset -- git annex sync wasn't ran or smth like that ", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 519289523, "node_id": "MDU6TGFiZWw1MTkyODk1MjM=", "url": "https://api.github.com/repos/datalad/datalad/labels/on%20hold%20-%20input%20required", "name": "on hold - input required", "color": "fbca04", "default": false, "description": "Work on this issue cannot proceed until critical feedback was given"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/60", "html_url": "https://github.com/datalad/datalad/milestone/60", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/60/labels", "id": 4073134, "node_id": "MDk6TWlsZXN0b25lNDA3MzEzNA==", "number": 60, "title": "0.11.x", "description": "To collect issues/PRs targetting 0.11.x development line", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 27, "state": "closed", "created_at": "2019-02-20T15:10:42Z", "updated_at": "2020-03-06T19:55:16Z", "due_on": null, "closed_at": "2020-03-06T19:55:16Z"}, "comments": 3, "created_at": "2017-03-19T15:59:09Z", "updated_at": "2020-02-25T15:06:17Z", "closed_at": "2020-02-25T15:06:16Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "\r\nmay be due some magic not working out as needed in --inherit -- super-dataset is pure git, while sub-datasets are annexes\r\n\r\n```shell\r\n(git)smaug:/mnt/datasets/datalad/crawl/openfmri[master]git\r\n$> datalad publish --to=datalad-public -r --missing=inherit\r\n[INFO   ] Will try to create a sibling inheriting settings from <Dataset path=/mnt/datasets/datalad/crawl/openfmri>\r\n[INFO   ] Connecting ...\r\nyoh@datasets.datalad.org's password: \r\n[INFO   ] Considering to create a target dataset /mnt/datasets/datalad/crawl/openfmri/ds000219 at /srv/datasets.datalad.org/www/openfmri/ds000219 of datasets.datalad.org \r\n[INFO   ] Inherited publish_depends from <Dataset path=/mnt/datasets/datalad/crawl/openfmri>: ('refs/tags/*', 'refs/heads/*') \r\n[INFO   ] Configure additional default publication refspec \"refs/tags/*\" \r\n[INFO   ] Configure additional default publication refspec \"refs/heads/*\" \r\n[INFO   ] Adjusting remote git configuration \r\n[INFO   ] Enabling git post-update hook ... \r\n[INFO   ] Will try to create a sibling inheriting settings from <Dataset path=/mnt/datasets/datalad/crawl/openfmri> \r\n[INFO   ] Connecting ... \r\n[INFO   ] Considering to create a target dataset /mnt/datasets/datalad/crawl/openfmri/ds000218 at /srv/datasets.datalad.org/www/openfmri/ds000218 of datasets.datalad.org \r\n[INFO   ] Inherited publish_depends from <Dataset path=/mnt/datasets/datalad/crawl/openfmri>: ('refs/tags/*', 'refs/heads/*') \r\n[INFO   ] Configure additional default publication refspec \"refs/tags/*\" \r\n[INFO   ] Configure additional default publication refspec \"refs/heads/*\" \r\n[INFO   ] Adjusting remote git configuration \r\n[INFO   ] Enabling git post-update hook ... \r\n[INFO   ] Will try to create a sibling inheriting settings from <Dataset path=/mnt/datasets/datalad/crawl/openfmri> \r\n[INFO   ] Connecting ... \r\n[INFO   ] Considering to create a target dataset /mnt/datasets/datalad/crawl/openfmri/ds000216 at /srv/datasets.datalad.org/www/openfmri/ds000216 of datasets.datalad.org \r\n[INFO   ] Inherited publish_depends from <Dataset path=/mnt/datasets/datalad/crawl/openfmri>: ('refs/tags/*', 'refs/heads/*') \r\n[INFO   ] Configure additional default publication refspec \"refs/tags/*\" \r\n[INFO   ] Configure additional default publication refspec \"refs/heads/*\" \r\n[INFO   ] Adjusting remote git configuration \r\n[INFO   ] Enabling git post-update hook ... \r\n[INFO   ] Will try to create a sibling inheriting settings from <Dataset path=/mnt/datasets/datalad/crawl/openfmri> \r\n[INFO   ] Connecting ... \r\n[INFO   ] Considering to create a target dataset /mnt/datasets/datalad/crawl/openfmri/ds000217 at /srv/datasets.datalad.org/www/openfmri/ds000217 of datasets.datalad.org \r\n[INFO   ] Inherited publish_depends from <Dataset path=/mnt/datasets/datalad/crawl/openfmri>: ('refs/tags/*', 'refs/heads/*') \r\n[INFO   ] Configure additional default publication refspec \"refs/tags/*\" \r\n[INFO   ] Configure additional default publication refspec \"refs/heads/*\" \r\n[INFO   ] Adjusting remote git configuration \r\n[INFO   ] Enabling git post-update hook ... \r\n[INFO   ] Will try to create a sibling inheriting settings from <Dataset path=/mnt/datasets/datalad/crawl/openfmri> \r\n[INFO   ] Connecting ... \r\n[INFO   ] Considering to create a target dataset /mnt/datasets/datalad/crawl/openfmri/ds000213 at /srv/datasets.datalad.org/www/openfmri/ds000213 of datasets.datalad.org \r\n[INFO   ] Inherited publish_depends from <Dataset path=/mnt/datasets/datalad/crawl/openfmri>: ('refs/tags/*', 'refs/heads/*') \r\n[INFO   ] Configure additional default publication refspec \"refs/tags/*\" \r\n[INFO   ] Configure additional default publication refspec \"refs/heads/*\" \r\n[INFO   ] Adjusting remote git configuration \r\n[INFO   ] Enabling git post-update hook ... \r\n[INFO   ] Will try to create a sibling inheriting settings from <Dataset path=/mnt/datasets/datalad/crawl/openfmri> \r\n[INFO   ] Connecting ... \r\n[INFO   ] Considering to create a target dataset /mnt/datasets/datalad/crawl/openfmri/ds000017 at /srv/datasets.datalad.org/www/openfmri/ds000017 of datasets.datalad.org \r\n[INFO   ] Inherited publish_depends from <Dataset path=/mnt/datasets/datalad/crawl/openfmri>: ('refs/tags/*', 'refs/heads/*') \r\n[INFO   ] Configure additional default publication refspec \"refs/tags/*\" \r\n[INFO   ] Configure additional default publication refspec \"refs/heads/*\" \r\n[INFO   ] Adjusting remote git configuration \r\n[INFO   ] Enabling git post-update hook ... \r\n[INFO   ] Publishing <Dataset path=/mnt/datasets/datalad/crawl/openfmri/ds000219> to datalad-public \r\n[INFO   ] Publishing <Dataset path=/mnt/datasets/datalad/crawl/openfmri> to datalad-public \r\n[INFO   ] Publishing <Dataset path=/mnt/datasets/datalad/crawl/openfmri/ds000218> to datalad-public \r\n[ERROR  ] Failed to run ['git', '-c', 'receive.autogc=0', '-c', 'gc.auto=0', 'annex', 'wanted', '-c', 'remote.datalad-public.annex-ssh-options=-o ControlMaster=auto -S /home/yoh/.cache/datalad/sockets/datasets.datalad.org -o ControlMaster=auto -S /home/yoh/.cache/datalad/sockets/6a41b97cbea2adf53c6759d79e7de057', '-c', 'remote.datalad-public.annex-ssh-options=-o ControlMaster=auto -S /home/yoh/.cache/datalad/sockets/datasets.datalad.org -o ControlMaster=auto -S /home/yoh/.cache/datalad/sockets/6a41b97cbea2adf53c6759d79e7de057', 'datalad-public'] under u'/mnt/datasets/datalad/crawl/openfmri/ds000205'. Exit code=1. out= err=git-annex: cannot determine uuid for datalad-public (perhaps you need to run \"git annex sync\"?)\r\n|  \r\ngit-annex: cannot determine uuid for datalad-public (perhaps you need to run \"git annex sync\"?)\r\n```\r\n\r\nso going in, resetting annex-ignore, -- checked history, it seemed to be pushed but not all of git-annex branch.  And publish refused to publish anything although there were branches configured/needed pushing:\r\n```shell\r\n(git)smaug:/mnt/datasets/datalad/crawl/openfmri/ds000205[master]git\r\n$> datalad publish --to=datalad-public -r --missing=inherit\r\nyoh@datasets.datalad.org's password:\r\nNothing was published\r\n(venv-tests)2 10167.....................................:Sun 19 Mar 2017 11:56:17 AM EDT:.\r\n(git)smaug:/mnt/datasets/datalad/crawl/openfmri/ds000205[master]git\r\n$> datalad publish --to=datalad-public -r --missing=inherit --since=HEAD^^\r\nNothing was published\r\n(venv-tests)2 10168.....................................:Sun 19 Mar 2017 11:56:24 AM EDT:.\r\n(git)smaug:/mnt/datasets/datalad/crawl/openfmri/ds000205[master]git\r\n$> git lg git-annex --\r\n* 5bac247 - (git-annex) update (13 days ago) [Yaroslav Halchenko]\r\n* 6f06e7a - update (4 weeks ago) [Yaroslav Halchenko]\r\n* 01798bf - (datalad-public/git-annex) update (7 months ago) [Yaroslav Halchenko]\r\n* 5b83e4d - update (7 months ago) [Yaroslav Halchenko]\r\n* dd0f797 - update (7 months ago) [Yaroslav Halchenko]\r\n* 165d65b - branch created (7 months ago) [Yaroslav Halchenko]\r\n(venv-tests)2 10169.....................................:Sun 19 Mar 2017 11:56:27 AM EDT:.\r\n(git)smaug:/mnt/datasets/datalad/crawl/openfmri/ds000205[master]git\r\n$> git push datalad-public\r\nyoh@datasets.datalad.org's password: \r\nCounting objects: 572, done.\r\nDelta compression using up to 16 threads.\r\nCompressing objects: 100% (222/222), done.\r\nWriting objects: 100% (572/572), 43.71 KiB | 0 bytes/s, done.\r\nTotal 572 (delta 264), reused 526 (delta 218)\r\nTo ssh://datasets.datalad.org/srv/datasets.datalad.org/www/openfmri/ds000205\r\n   01798bf..5bac247  git-annex -> git-annex\r\n * [new branch]      incoming-s3-openneuro -> incoming-s3-openneuro\r\n```\r\n\r\ndatalad version: 0.4.1.dev648 (soon to release as 0.5.0)", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1390/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1390/timeline", "performed_via_github_app": null}