{"url": "https://api.github.com/repos/datalad/datalad/issues/5034", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5034/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5034/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5034/events", "html_url": "https://github.com/datalad/datalad/issues/5034", "id": 721103215, "node_id": "MDU6SXNzdWU3MjExMDMyMTU=", "number": 5034, "title": "sshrun: add locking?", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2805362221, "node_id": "MDU6TGFiZWwyODA1MzYyMjIx", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-sshrun", "name": "cmd-sshrun", "color": "FEF2C0", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-10-14T03:25:08Z", "updated_at": "2021-03-09T08:37:54Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "With #5022 we might get some speed up by parallelizing \"install/get\" of subdatasets. We cannot parallelize if there are multiple ssh hosts we need to prompt for credentials...  Something like this would happen when there are actually two prompts overlayed:\r\n\r\n```shell\r\n$> datalad install -r -J 5 .    \r\n[INFO   ] Installing Dataset(/tmp/tttt-clone) to get /tmp/tttt-clone recursively \r\nInstalling:   0%|ECDSA host key for IP address '129.170.233.9' not in list of known hosts.[00:00<?, ? datasets/s]\r\nsign_and_send_pubkey: signing failed: agent refused operation                                                    \r\nsign_and_send_pubkey: signing failed: agent refused operation\r\nyoh@smaug's password: 's password: \r\n```\r\n\r\nbut I guess those connections are established by our `datalad sshrun`.  A wild guess is that if we add locking for establishing initial ssh connection stage which might prompt user for the password, we could then ensure that multiple processes (e.g. from different threads of ProducerConsumer of #5022) do not prompt at once!", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5034/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5034/timeline", "performed_via_github_app": null}