{"url": "https://api.github.com/repos/datalad/datalad/issues/3564", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3564/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3564/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3564/events", "html_url": "https://github.com/datalad/datalad/issues/3564", "id": 473464000, "node_id": "MDU6SXNzdWU0NzM0NjQwMDA=", "number": 3564, "title": "We do not inform user whenever remotes are started to get ignored upon get", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-07-26T17:36:59Z", "updated_at": "2019-09-28T00:48:17Z", "closed_at": "2019-09-28T00:48:17Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "TL;DR:  there might be a bug with parsing/reporting multiple lines in stderr while operating  in --json mode.    git-annex seems to spit out the message that \"not usable by git-annex; setting annex-ignore\" to stderr but I do not observe it in our logs\r\n\r\nI pointed datasets.datalad.org to localhost in /etc/hosts, so no website is reachable by that name\r\n```shell\r\nhopa:/tmp\r\n$> wget datasets.datalad.org\r\n--2019-07-26 13:20:46--  http://datasets.datalad.org/\r\nResolving datasets.datalad.org (datasets.datalad.org)... 127.0.1.1\r\nConnecting to datasets.datalad.org (datasets.datalad.org)|127.0.1.1|:80... failed: Connection refused.\r\n```\r\nthen I am installing ReproNim/containers from github, during which git-annex adds datasets.datalad.org remote but doesn't contact it to obtain UUID.  Only later when I try to `get` the file, it tries to enable it but fails but we log (INFO like we do for initial clone from github or even WARNING in this particular case) that special remote was not enabled:\r\n\r\n```shell\r\n$> datalad install https://github.com/ReproNim/containers\r\n[INFO   ] Cloning https://github.com/ReproNim/containers [1 other candidates] into '/tmp/containers' \r\n[INFO   ]   Remote origin not usable by git-annex; setting annex-ignore                                                        \r\n[INFO   ] access to dataset sibling \"datasets.datalad.org\" not auto-enabled, enable with:\r\n| \t\tdatalad siblings -d \"/tmp/containers\" enable -s datasets.datalad.org \r\ninstall(ok): /tmp/containers (dataset)\r\n\r\n$> git -C containers config remote.datasets.datalad.org.annex-ignore       \r\n\r\n$> datalad get containers/images/bids/bids-validator--1.2.3.sing\r\n[WARNING] Running get resulted in stderr output: download failed: Unauthorized\r\ngit-annex: get: 1 failed\r\n \r\n[ERROR  ] from web...; Unable to access these remotes: web; Try making some of these repositories available:; \t00000000-0000-0000-0000-000000000001 -- web;  \t23456fab-05d4-441e-8952-b8c6d90ad785 -- yoh@smaug:~/proj/repronim/containers;  \t3bcd23f7-1adf-4dce-9f2a-efdaab4151d8 -- yoh@hopa:~/proj/repronim/containers;  \t71c620b5-997f-4849-bb30-c42dbb48a51e -- datasets.datalad.org; ; (Note that these git remotes have annex-ignore set: datasets.datalad.org origin) [get(/tmp/containers/images/bids/bids-validator--1.2.3.sing)] \r\nget(error): /tmp/containers/images/bids/bids-validator--1.2.3.sing (file) [from web...; Unable to access these remotes: web; Try making some of these repositories available:; \t00000000-0000-0000-0000-000000000001 -- web;  \t23456fab-05d4-441e-8952-b8c6d90ad785 -- yoh@smaug:~/proj/repronim/containers;  \t3bcd23f7-1adf-4dce-9f2a-efdaab4151d8 -- yoh@hopa:~/proj/repronim/containers;  \t71c620b5-997f-4849-bb30-c42dbb48a51e -- datasets.datalad.org; ; (Note that these git remotes have annex-ignore set: datasets.datalad.org origin)]\r\n\r\n$> git -C containers config remote.datasets.datalad.org.annex-ignore\r\ntrue\r\n```\r\n\r\nSo we do receive/report that Unauthorized stderr but somehow there is nothing about datasets.datalad.org obtaining annex-ignore.\r\n\r\nif I redo (clean install) git-annex call directly -- message seems to be there before Unauthorized:\r\n\r\n```\r\n/tmp > git -C containers annex get --json --json-progress -J4 images/bids/bids-validator--1.2.3.sing >/dev/null \r\n  Remote datasets.datalad.org not usable by git-annex; setting annex-ignore\r\ndownload failed: Unauthorized\r\ngit-annex: get: 1 failed\r\n```\r\nso either we filter it out or just somehow drop it?\r\n\r\n```shell\r\n~datalad/datalad > git describe\r\n0.11.5-56-g85a2cf994\r\n\r\n~datalad/datalad > git annex version\r\ngit-annex version: 7.20190708+git36-g32d526164-1~ndall+1\r\n```", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3564/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3564/timeline", "performed_via_github_app": null}