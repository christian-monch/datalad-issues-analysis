{"url": "https://api.github.com/repos/datalad/datalad/issues/4511", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4511/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4511/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4511/events", "html_url": "https://github.com/datalad/datalad/issues/4511", "id": 615598186, "node_id": "MDU6SXNzdWU2MTU1OTgxODY=", "number": 4511, "title": "ora-remote not upfront about missing dependencies", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 1782620215, "node_id": "MDU6TGFiZWwxNzgyNjIwMjE1", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-minor", "name": "severity-minor", "color": "ffdddd", "default": false, "description": "a problem which doesn't affect the package's usefulness, and is presumably trivial to fix"}, {"id": 2971010147, "node_id": "MDU6TGFiZWwyOTcxMDEwMTQ3", "url": "https://api.github.com/repos/datalad/datalad/labels/RIA/ORA", "name": "RIA/ORA", "color": "E8F2DF", "default": false, "description": "Issues related to RIA-based workflows and related components"}], "state": "open", "locked": false, "assignee": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-05-11T05:27:16Z", "updated_at": "2021-05-04T10:03:54Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "I have a 1.5TB with 34k files in a RIA store. I complete a `git annex fsck -f judac-storage` (no `--fast`) with no error, so the data in the store is complete and verified. I now 7zipped `annex/objects` and placed into under `archives/archive7z` and started redoing the `fsck`, this time with `--fast`. That didn't work:\r\n\r\n```\r\nfsck sub-A00028352/ses-NFB2/func/sub-A00028352_ses-NFB2_task-checkerboard_acq-1400_bold.nii.gz (fixing location log) \r\n  ** Based on the location log, sub-A00028352/ses-NFB2/func/sub-A00028352_ses-NFB2_task-checkerboard_acq-1400_bold.nii.gz\r\n  ** was expected to be present, but its content is missing.\r\nfailed\r\n```\r\n\r\nHere is the log:\r\n\r\n```\r\n% git annex whereis sub-A00086748/ses-ALGA/anat/sub-A00086748_ses-ALGA_T1w.json                \r\nwhereis sub-A00086748/ses-ALGA/anat/sub-A00086748_ses-ALGA_T1w.json (1 copy) \r\n        40c3bc64-d7b8-4661-9727-554c77e09933 -- tkadelka@juseless:/data/project/rehab_eNKI/BIDS [here]\r\n\r\n  The following untrusted locations may also have copies:\r\n        c1806013-fe09-4770-b04c-e71f29acf899 -- [judac-storage]\r\n\r\n  judac-storage: judac...: /p/largedata/.../enki/f38/0eccc-643b-11ea-a42a-ac1f6bac9bd2:Pj/wj/MD5E-s1464--a57e3e98bb211f39c420fe75d618ad37.json/MD5E-s1464--a57e3e98bb211f39c420fe75d618ad37.json\r\nok\r\n\r\n% git annex --debug fsck subecs\",\"show-ref\",\"git-annex\"]\r\n[2020-05-11 07:18:40.881511164] process done ExitSuccess\r\n[2020-05-11 07:18:40.881570515] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"show-ref\",\"--hash\",\"refs/heads/git-annex\"]\r\n[2020-05-11 07:18:40.886506686] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathsp1\"]\r\n[2020-05-11 07:18:40.889288825] process done ExitSuccess\r\necs\",\"log\",\"refs/heads/git-annex..c7ba0f9c6c4bed4923a872667d0d6cd0163cbbc6\",\"--pretty=%H\",\"-n[2020-05-11 07:18:40.897655342] chat: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"cat-file\",\"--batch\"]\r\necs\",\"cat-file\",\"--batch-check=%(objectname) %(objecttype) %(objectsize)\"]\r\necs\",\"symbolic-ref\",\"-q\",\"HEAD\"]\r\n[2020-05-11 07:18:40.907358042] process done ExitSuccess\r\necs\",\"show-ref\",\"refs/heads/master\"]\r\n[2020-05-11 07:18:40.910225832] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspjson\"]\r\n[2020-05-11 07:18:40.919352717] chat: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathsp[2020-05-11 07:18:40.920851042] process done ExitSuccess\r\nfsck sub-A00086748/ses-ALGA/anat/sub-A00086748_ses-ALGA_T1w.json [2020-05-11 07:18:40.9309259[2020-05-11 07:18:41.052219176] git-annex-remote-ora[1] --> VERSION 1\r\n[2020-05-11 07:18:41.052338737] git-annex-remote-ora[1] <-- EXTENSIONS INFO\r\n[2020-05-11 07:18:41.05262574] git-annex-remote-ora[1] --> EXTENSIONS\r\n[2020-05-11 07:18:41.052725711] git-annex-remote-ora[1] <-- PREPARE\r\n[2020-05-11 07:18:41.052932113] git-annex-remote-ora[1] --> GETGITDIR\r\n[2020-05-11 07:18:41.053033434] git-annex-remote-ora[1] <-- VALUE .git\r\n[2020-05-11 07:18:41.053220686] git-annex-remote-ora[1] --> GETUUID\r\n[2020-05-11 07:18:41.053485109] git-annex-remote-ora[1] <-- VALUE c1806013-fe09-4770-b04c-e71f29acf899\r\n[2020-05-11 07:18:41.053691381] git-annex-remote-ora[1] --> GETCONFIG name\r\n[2020-05-11 07:18:41.053801932] git-annex-remote-ora[1] <-- VALUE judac-storage\r\n[2020-05-11 07:18:41.053905333] git-annex-remote-ora[1] --> GETCONFIG url\r\n[2020-05-11 07:18:41.053966614] git-annex-remote-ora[1] <-- VALUE ria+ssh://judac..../enki\r\n[2020-05-11 07:18:41.082541411] git-annex-remote-ora[1] --> GETCONFIG archive-id\r\n[2020-05-11 07:18:41.082639242] git-annex-remote-ora[1] <-- VALUE f380eccc-643b-11ea-a42a-ac1f6bac9bd2\r\n[2020-05-11 07:18:41.082897494] git-annex-remote-ora[1] --> GETCONFIG force-write\r\n[2020-05-11 07:18:41.082995335] git-annex-remote-ora[1] <-- VALUE \r\n[2020-05-11 07:18:41.720551672] git-annex-remote-ora[1] --> PREPARE-SUCCESS\r\n[2020-05-11 07:18:41.720706624] git-annex-remote-ora[1] <-- CHECKPRESENT MD5E-s1464--a57e3e98bb211f39c420fe75d618ad37.json\r\n[2020-05-11 07:18:41.720991247] git-annex-remote-ora[1] --> DIRHASH MD5E-s1464--a57e3e98bb211f39c420fe75d618ad37.json\r\n[2020-05-11 07:18:41.721111678] git-annex-remote-ora[1] <-- VALUE Pj/wj/\r\n[2020-05-11 07:18:41.727761227] git-annex-remote-ora[1] --> CHECKPRESENT-FAILURE MD5E-s1464--a57e3e98bb211f39c420fe75d618ad37.json\r\n(fixing location log) \r\n  ** Based on the location log, sub-A00086748/ses-ALGA/anat/sub-A00086748_ses-ALGA_T1w.json\r\n  ** was expected to be present, but its content is missing.\r\nfailed\r\n[2020-05-11 07:18:41.742322588] chat: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"hash-object\",\"-w\",\"--stdin-paths\",\"--no-filters\"]\r\n[2020-05-11 07:18:41.742929074] feed: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"update-index\",\"-z\",\"--index-info\"]\r\n[2020-05-11 07:18:41.807202141] process done ExitSuccess\r\n[2020-05-11 07:18:41.807297662] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"show-ref\",\"--hash\",\"refs/heads/git-annex\"]\r\n[2020-05-11 07:18:41.810640367] process done ExitSuccess\r\n(recording state in git...)\r\n[2020-05-11 07:18:41.810837449] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"write-tree\"]\r\n[2020-05-11 07:18:41.903517821] process done ExitSuccess\r\n[2020-05-11 07:18:41.903623042] chat: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"commit-tree\",\"872a34f304280510f4104a69915aafa90ddfdbc8\",\"--no-gpg-sign\",\"-p\",\"refs/heads/git-annex\"]\r\n[2020-05-11 07:18:41.907424901] process done ExitSuccess\r\n[2020-05-11 07:18:41.907530292] call: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"update-ref\",\"refs/heads/git-annex\",\"cb7c206dac0f226c6ff737f1f9df8e5b49ac280a\"]\r\n[2020-05-11 07:18:41.909856187] process done ExitSuccess\r\n[2020-05-11 07:18:41.93329994] process done ExitSuccess\r\n[2020-05-11 07:18:41.934142029] process done ExitSuccess\r\n[2020-05-11 07:18:41.934501132] process done ExitSuccess\r\n[2020-05-11 07:18:41.935397982] process done ExitSuccess\r\n[2020-05-11 07:18:41.935822036] process done ExitSuccess\r\ngit-annex: fsck: 1 failed\r\n```\r\n\r\nIt turns out that the cause of this was that no `7z` was available in the remote environment. I cannot find the slightest hint about this error condition.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4511/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4511/timeline", "performed_via_github_app": null}