{"url": "https://api.github.com/repos/datalad/datalad/issues/4504", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4504/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4504/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4504/events", "html_url": "https://github.com/datalad/datalad/pull/4504", "id": 614885757, "node_id": "MDExOlB1bGxSZXF1ZXN0NDE1MzUwMDQz", "number": 4504, "title": "addurls: Don't trip over \"./\" in the file name format", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/74", "html_url": "https://github.com/datalad/datalad/milestone/74", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/74/labels", "id": 5341727, "node_id": "MDk6TWlsZXN0b25lNTM0MTcyNw==", "number": 74, "title": "0.12.7", "description": "", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 11, "state": "closed", "created_at": "2020-04-23T15:41:13Z", "updated_at": "2020-05-26T17:55:20Z", "due_on": null, "closed_at": "2020-05-26T17:55:20Z"}, "comments": 2, "created_at": "2020-05-08T17:44:48Z", "updated_at": "2020-05-14T16:13:16Z", "closed_at": "2020-05-14T01:31:41Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4504", "html_url": "https://github.com/datalad/datalad/pull/4504", "diff_url": "https://github.com/datalad/datalad/pull/4504.diff", "patch_url": "https://github.com/datalad/datalad/pull/4504.patch"}, "body": "As described in d46846716 (DOC: addurls: Clarify what filename format\r\nis relative to, 2019-08-02) and the tests, the file format is intended\r\nto be taken relative to the dataset.  However, when the file name\r\nformat begins with \"./\", we keep \"./\" on the relative name, while\r\nconstructing the absolute file name without the subdirectory as\r\ndocumented.  The relative file name is passed to AnnexRepo.addurl(),\r\ncausing the file to be treated as relative to the current working\r\ndirectory and downloaded there.\r\n\r\nAchieve the documented behavior by applying the same handling to the\r\ntop-level dataset as we use for subdatasets.\r\n\r\nNote that there is mention of changing this relative path handling in\r\ngh-4498.  Even if we decide that this change in behavior is\r\nworthwhile, it still makes sense to fix this bug, and doing so doesn't\r\nmake the future change harder.\r\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4504/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4504/timeline", "performed_via_github_app": null}