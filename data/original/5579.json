{"url": "https://api.github.com/repos/datalad/datalad/issues/5579", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5579/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5579/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5579/events", "html_url": "https://github.com/datalad/datalad/pull/5579", "id": 859818485, "node_id": "MDExOlB1bGxSZXF1ZXN0NjE2ODM1NzI5", "number": 5579, "title": "TST: no_annex: Avoid racy failure on adjusted branches", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-04-16T13:31:24Z", "updated_at": "2021-04-16T15:20:20Z", "closed_at": "2021-04-16T15:18:00Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5579", "html_url": "https://github.com/datalad/datalad/pull/5579", "diff_url": "https://github.com/datalad/datalad/pull/5579.diff", "patch_url": "https://github.com/datalad/datalad/pull/5579.patch"}, "body": "test_no_annex() has started to fail frequently on the CrippledFS runs.\r\nI can trigger it with `tools/eval_under_testloopfs` locally.\r\n\r\nThe underlying issue is that if a file is added to the annex but the\r\nannex.largefiles configuration would send it to git, that file will be\r\nsent to git the next time the clean filter runs on it.  In the context\r\nof this test, the test failure is sporadic because the clean filter\r\nruns on the file (\"code/inannex\") only when its mtime matches\r\n.git/index's.\r\n\r\nI don't know why the above failure has started to happen much more\r\nfrequently, and, as mentioned in the git-annex link below, I'm not\r\nsure what expectations here should be.\r\n\r\nAvoid the intermittent failure by forcing the mtimes to be the same,\r\nand updating the assertion to expect a dirty tree.  That should lead\r\nto a reliable outcome, and, if git-annex's behavior changes here, a\r\ntest failure will let us know.\r\n\r\nRe: #5300\r\nhttps://git-annex.branchable.com/forum/one-off_unlocked_annex_files_that_go_against_large/\r\n", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5579/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5579/timeline", "performed_via_github_app": null}