{"url": "https://api.github.com/repos/datalad/datalad/issues/4095", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4095/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4095/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4095/events", "html_url": "https://github.com/datalad/datalad/pull/4095", "id": 555949190, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY3Nzk4Njkx", "number": 4095, "title": "OPT: tried to be \"clever\" AKA \"smart\" and reuse .repo (and .config)", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 289240596, "node_id": "MDU6TGFiZWwyODkyNDA1OTY=", "url": "https://api.github.com/repos/datalad/datalad/labels/performance", "name": "performance", "color": "f4b2d8", "default": false, "description": "Improve performance of an existing feature"}, {"id": 1782620215, "node_id": "MDU6TGFiZWwxNzgyNjIwMjE1", "url": "https://api.github.com/repos/datalad/datalad/labels/severity-minor", "name": "severity-minor", "color": "ffdddd", "default": false, "description": "a problem which doesn't affect the package's usefulness, and is presumably trivial to fix"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-28T02:37:25Z", "updated_at": "2020-01-30T03:35:54Z", "closed_at": "2020-01-30T03:35:54Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4095", "html_url": "https://github.com/datalad/datalad/pull/4095", "diff_url": "https://github.com/datalad/datalad/pull/4095.diff", "patch_url": "https://github.com/datalad/datalad/pull/4095.patch"}, "body": "surprisingly, benchmarking locally it only shows that things got slower:\r\n```\r\n(git)lena:~datalad/datalad-master[opt-smart]git\r\n$> asv compare -m hopa master HEAD | grep -v failed\r\n\r\nAll benchmarks:\r\n\r\n       before           after         ratio\r\n     [c741a5b1]       [9db20858]\r\n     <master>         <opt-smart>\r\n        1.20\u00b10.2s        1.35\u00b10.1s    ~1.12  api.supers.time_createadd [hopa/virtualenv-py3.7]\r\n        1.49\u00b10.2s        1.67\u00b10.1s    ~1.12  api.supers.time_createadd_to_dataset [hopa/virtualenv-py3.7]\r\n       4.66\u00b10.04s       5.59\u00b10.01s    ~1.20  api.supers.time_installr [hopa/virtualenv-py3.7]\r\n          118\u00b12ms         126\u00b110ms     1.06  api.supers.time_ls [hopa/virtualenv-py3.7]\r\n        1.51\u00b10.2s        1.69\u00b10.4s    ~1.12  api.supers.time_ls_recursive [hopa/virtualenv-py3.7]\r\n        1.84\u00b10.2s        1.99\u00b10.2s     1.08  api.supers.time_ls_recursive_long_all [hopa/virtualenv-py3.7]\r\n         487\u00b120ms         548\u00b180ms    ~1.13  api.supers.time_status [hopa/virtualenv-py3.7]\r\n        1.00\u00b10.2s        1.04\u00b10.1s     1.03  api.supers.time_status_recursive [hopa/virtualenv-py3.7]\r\n         60.8\u00b12ms        61.1\u00b110ms     1.01  api.supers.time_subdatasets [hopa/virtualenv-py3.7]\r\n        396\u00b1100ms         307\u00b150ms    ~0.77  api.supers.time_subdatasets_recursive [hopa/virtualenv-py3.7]\r\n         65.4\u00b15ms         60.5\u00b12ms     0.93  api.supers.time_subdatasets_recursive_first [hopa/virtualenv-py3.7]\r\n        3.69\u00b10.4s       3.55\u00b10.06s     0.96  api.supers.time_uninstall [hopa/virtualenv-py3.7]\r\n         451\u00b150ms         449\u00b150ms     1.00  api.testds.time_create_test_dataset1 [hopa/virtualenv-py3.7]\r\n        3.47\u00b10.5s        3.56\u00b10.2s     1.03  api.testds.time_create_test_dataset2x2 [hopa/virtualenv-py3.7]\r\n         52.5\u00b15ns         46.7\u00b11ns    ~0.89  check_asv.Benchmarks.time_upper [hopa/virtualenv-py3.7]\r\n         49.3\u00b17ns         47.1\u00b11ns     0.96  check_asv.Suite1.time_upper [hopa/virtualenv-py3.7]\r\n         49.2\u00b16ns         49.8\u00b12ns     1.01  check_asv.Suite2.time_upper [hopa/virtualenv-py3.7]\r\n        894\u00b1200\u03bcs         891\u00b130\u03bcs     1.00  core.runner.time_echo [hopa/virtualenv-py3.7]\r\n       1.94\u00b10.3ms       1.22\u00b10.1ms    ~0.63  core.runner.time_echo_gitrunner [hopa/virtualenv-py3.7]\r\n-            4.55             2.43     0.53  core.runner.track_overhead_100ms [hopa/virtualenv-py3.7]\r\n-          221.65           194.26     0.88  core.runner.track_overhead_echo [hopa/virtualenv-py3.7]\r\n-           21.24           -16.78    -0.79  core.runner.track_overhead_heavyout [hopa/virtualenv-py3.7]\r\n+            4.55             8.12     1.78  core.runner.track_overhead_heavyout_online_process [hopa/virtualenv-py3.7]\r\n-           27.36            24.22     0.89  core.runner.track_overhead_heavyout_online_through [hopa/virtualenv-py3.7]\r\n          326\u00b17ms         319\u00b110ms     0.98  core.startup.time_help_np [hopa/virtualenv-py3.7]\r\n         71.1\u00b11ms         68.3\u00b12ms     0.96  core.startup.time_import [hopa/virtualenv-py3.7]\r\n          287\u00b16ms         269\u00b110ms     0.94  core.startup.time_import_api [hopa/virtualenv-py3.7]\r\n       8.91\u00b10.1ms      8.65\u00b10.09ms     0.97  repo.gitrepo.time_get_content_info [hopa/virtualenv-py3.7]\r\n       4.14\u00b10.1ms      3.98\u00b10.05ms     0.96  support.path.get_parent_paths.time_allsubmods_toplevel [hopa/virtualenv-py3.7]\r\n       3.91\u00b10.2ms      3.71\u00b10.07ms     0.95  support.path.get_parent_paths.time_allsubmods_toplevel_only [hopa/virtualenv-py3.7]\r\n          189\u00b12ns          183\u00b11ns     0.97  support.path.get_parent_paths.time_no_submods [hopa/virtualenv-py3.7]\r\n      3.12\u00b10.05ms       3.23\u00b10.1ms     1.04  support.path.get_parent_paths.time_one_submod_subdir [hopa/virtualenv-py3.7]\r\n      3.05\u00b10.02ms      3.02\u00b10.09ms     0.99  support.path.get_parent_paths.time_one_submod_toplevel [hopa/virtualenv-py3.7]\r\n        36.7\u00b10.3s          35.3\u00b11s     0.96  usecases.study_forrest.time_make_studyforrest_mockup [hopa/virtualenv-py3.7]\r\n```\r\nlet's see what travis says", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4095/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4095/timeline", "performed_via_github_app": null}