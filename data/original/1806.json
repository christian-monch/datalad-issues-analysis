{"url": "https://api.github.com/repos/datalad/datalad/issues/1806", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1806/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1806/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1806/events", "html_url": "https://github.com/datalad/datalad/issues/1806", "id": 256128965, "node_id": "MDU6SXNzdWUyNTYxMjg5NjU=", "number": 1806, "title": "add tries to add \"git rm'ed\" submodule and fails since can't find it", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2017-09-08T03:13:34Z", "updated_at": "2020-02-25T16:13:36Z", "closed_at": "2020-02-25T16:13:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "```shell\r\nIn [3]: datalad.__version__\r\nOut[3]: '0.8.1.dev1'\r\n\r\nIn [4]: ds = dl.Dataset('.')\r\n\r\nIn [5]: ds.add('.', recursive=True, save=False)\r\n                                                                                                                                                                                                                                  [ERROR  ] not found [add(/inbox/BIDS/dbic/QA/.heudiconv_migrate_to_submodule)] \r\n[ERROR  ] not found [add(/inbox/BIDS/dbic/QA/.heudiconv_migrate_to_submodule)] \r\n---------------------------------------------------------------------------\r\nIncompleteResultsError                    Traceback (most recent call last)\r\n<ipython-input-5-d740971b9315> in <module>()\r\n----> 1 ds.add('.', recursive=True, save=False)\r\n\r\n/home/bids/singularity_home/datalad/datalad/distribution/dataset.py in apply_func(wrapped, instance, args, kwargs)\r\n    437             elif i >= ds_index:\r\n    438                 kwargs[orig_pos[i+1]] = args[i]\r\n--> 439         return f(**kwargs)\r\n    440 \r\n    441     setattr(Dataset, name, apply_func(f))\r\n\r\n/home/bids/singularity_home/datalad/datalad/interface/utils.py in eval_func(wrapped, instance, args, kwargs)\r\n    435                     return results\r\n    436 \r\n--> 437             return return_func(generator_func)(*args, **kwargs)\r\n    438 \r\n    439     return eval_func(func)\r\n\r\n/home/bids/singularity_home/datalad/datalad/interface/utils.py in return_func(wrapped_, instance_, args_, kwargs_)\r\n    423                     # unwind generator if there is one, this actually runs\r\n    424                     # any processing\r\n--> 425                     results = list(results)\r\n    426                 # render summaries\r\n    427                 if not result_xfm and result_renderer == 'tailored':\r\n\r\n/home/bids/singularity_home/datalad/datalad/interface/utils.py in generator_func(*_args, **_kwargs)\r\n    411                 raise IncompleteResultsError(\r\n    412                     failed=incomplete_results,\r\n--> 413                     msg=\"Command did not complete successfully\")\r\n    414 \r\n    415         if return_type == 'generator':\r\n\r\nIncompleteResultsError: Command did not complete successfully [{'revision_src': 'c76fc222fdf6cc0889c8a451c6ee625a6b4a7c7a', 'status': 'error', 'mode_src': 57344, 'state': 'absent', 'mode': 0, 'parentds': '/inbox/BIDS/dbic/QA', 'action': u'add', 'path': u'/inbox/BIDS/dbic/QA/.heudiconv_migrate_to_submodule', 'message': u'not found', 'type_src': 'dataset', 'type': 'file', 'refds': '/inbox/BIDS/dbic/QA', 'revision': None}, {'revision_src': 'c76fc222fdf6cc0889c8a451c6ee625a6b4a7c7a', 'status': 'error', 'mode_src': 57344, 'state': 'absent', 'mode': 0, 'parentds': '/inbox/BIDS/dbic/QA', 'action': u'add', 'path': u'/inbox/BIDS/dbic/QA/.heudiconv_migrate_to_submodule', 'message': u'not found', 'type_src': 'dataset', 'type': 'file', 'refds': '/inbox/BIDS/dbic/QA', 'revision': None}]\r\n\r\nIn [6]: !git status\r\nOn branch master\r\nChanges to be committed:\r\n  (use \"git reset HEAD <file>...\" to unstage)\r\n\r\n        new file:   .heudiconv/qa/ses-20170515/info/dbic_bids.py\r\n        new file:   .heudiconv/qa/ses-20170515/info/dicominfo_ses-20170515.tsv\r\n        new file:   .heudiconv/qa/ses-20170515/info/filegroup_ses-20170515.json\r\n        new file:   .heudiconv/qa/ses-20170515/info/qa_ses-20170515.auto.txt\r\n        new file:   .heudiconv/qa/ses-20170515/info/qa_ses-20170515.edit.txt\r\n        deleted:    .heudiconv_migrate_to_submodule\r\n```", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1806/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1806/timeline", "performed_via_github_app": null}