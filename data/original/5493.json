{"url": "https://api.github.com/repos/datalad/datalad/issues/5493", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5493/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5493/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5493/events", "html_url": "https://github.com/datalad/datalad/issues/5493", "id": 830873784, "node_id": "MDU6SXNzdWU4MzA4NzM3ODQ=", "number": 5493, "title": "python api call datalad.config.set - cannot add quoted string", "user": {"login": "pvavra", "id": 5610129, "node_id": "MDQ6VXNlcjU2MTAxMjk=", "avatar_url": "https://avatars.githubusercontent.com/u/5610129?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvavra", "html_url": "https://github.com/pvavra", "followers_url": "https://api.github.com/users/pvavra/followers", "following_url": "https://api.github.com/users/pvavra/following{/other_user}", "gists_url": "https://api.github.com/users/pvavra/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvavra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvavra/subscriptions", "organizations_url": "https://api.github.com/users/pvavra/orgs", "repos_url": "https://api.github.com/users/pvavra/repos", "events_url": "https://api.github.com/users/pvavra/events{/privacy}", "received_events_url": "https://api.github.com/users/pvavra/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-03-13T10:59:00Z", "updated_at": "2021-03-15T09:15:59Z", "closed_at": "2021-03-15T09:15:59Z", "author_association": "NONE", "active_lock_reason": null, "body": "Using the `datalad.config.ConfigManager` api, I would like to register a custom procedure to the dataset config. As per [Handbook](https://handbook.datalad.org/en/latest/basics/101-124-procedures.html), this should include both a `format-call` and `help`, both of which should be quoted strings. The example in the handbook is:\r\n```\r\n[datalad \"procedures.<NAME>\"]\r\n   help = \"This is a string to describe what the procedure does\"\r\n   call-format = \"python {script} {ds} {somearg1} {somearg2}\"\r\n```\r\n\r\nHowever, I don't know how to make the quotes to be passed on by the api, without them getting escaped in the process.\r\nI can think of potentially 2 ways, but none work as intended:\r\n```\r\nfrom datalad.distribution.dataset import require_dataset\r\ndataset = require_dataset(\r\n      'testdataset',\r\n      check_installed=True)\r\ncfg = dataset.config\r\ncfg.set('datalad.hirni.procedures.my-new-procedure.help',\r\n        \"simply pass a string with spaces\")\r\ncfg.set('datalad.hirni.procedures.my-new-procedure2.help',\r\n        '\"wrap the string in single quotes to include double quotes\"')\r\ncfg.set('datalad.hirni.procedures.my-new-procedure3.help',\r\n        \"\\\"or using escaped double-quotes..\\\"\")\r\n```\r\nwill produce \r\n```\r\n[datalad \"hirni.procedures.my-new-procedure\"]\r\n\thelp = simply pass a string with spaces\r\n[datalad \"hirni.procedures.my-new-procedure2\"]\r\n\thelp = \\\"wrap the string in single quotes to include double quotes\\\"\r\n[datalad \"hirni.procedures.my-new-procedure3\"]\r\n\thelp = \\\"or using escaped double-quotes..\\\"\r\n```\r\n\r\nSo none are simply quoted with out the escaping backslash.\r\n\r\nIf there is a way to get this done, I guess it would be handy to include it in the docs of `datalad.config.ConfigHandler.set` and `datalad.config.ConfigHandler.add` ([docs](http://docs.datalad.org/en/stable/generated/datalad.config.html) do not mention anything, as far as I can tell).\r\n\r\n\r\ntested with datalad version 0.14.0 on centOS. ", "closed_by": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5493/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5493/timeline", "performed_via_github_app": null}