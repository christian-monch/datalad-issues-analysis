{"url": "https://api.github.com/repos/datalad/datalad/issues/2553", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2553/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2553/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2553/events", "html_url": "https://github.com/datalad/datalad/issues/2553", "id": 326393877, "node_id": "MDU6SXNzdWUzMjYzOTM4Nzc=", "number": 2553, "title": "Switch from platform conditions to capability conditions", "user": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-05-25T06:12:59Z", "updated_at": "2020-11-12T15:03:56Z", "closed_at": "2020-03-15T11:00:05Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "ATM we do stuff like `if on_windows`, but we really should be testing for the actual capability within a specific environment and/or repository that we need. The reason is that simple platform switches are inappropriate and imply potentially wrong choices.\r\n\r\nExamples:\r\n\r\n- no SSH on windows: false #2539 \r\n- no symlinks on windows: false #2536 \r\n- stuff must be in the path if it is available at all: false (git for windows installer makes it configurable what exactly ends up being in the path)\r\n- no useful shell on windows: false (git installer lets you decide whether to go with git-bash or plain windows shell)\r\n- and of course all the combinations of crippled conditions that one can have on any non-windows system\r\n\r\nIt would probably be best to implement platform checks in the externals system, and enhance the Repo classes with lazily evaluated flags on whether other relevant capabilities are present (e.g. a symlink actually pointing to the target, or being an entity of its own that `realpath()` does not resolve...)", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2553/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2553/timeline", "performed_via_github_app": null}