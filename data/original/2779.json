{"url": "https://api.github.com/repos/datalad/datalad/issues/2779", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2779/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2779/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2779/events", "html_url": "https://github.com/datalad/datalad/issues/2779", "id": 353920528, "node_id": "MDU6SXNzdWUzNTM5MjA1Mjg=", "number": 2779, "title": "git annex \"export\" might be removing and reuploading everything even when not needed", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-08-24T20:41:05Z", "updated_at": "2020-11-12T02:37:59Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "#### What is the problem?\r\nWhile exploring the brand new flashy openneuro bucket, where they use \"export\" functionality of git annex special remotes, we noted proliferation of versions of the files (the bucket is versioned) even when content is not changing.  See e.g. (md5sum for the content is all the way to the right and stays constant, while DeleteMarkers intersperse between listings)\r\n\r\n```shell\r\n$> datalad ls -L --list-content md5 s3://openneuro.org/ds000001/    \r\nConnecting to bucket: openneuro.org\r\n[INFO   ] S3 session: Connecting to the bucket openneuro.org anonymously \r\nBucket info:\r\n  Versioning: S3ResponseError: 403 Forbidden\r\n     Website: S3ResponseError: 403 Forbidden\r\n         ACL: <Policy: openneurocommon (owner) = FULL_CONTROL, http://acs.amazonaws.com/groups/global/AllUsers = READ, rblair2 = FULL_CONTROL, http://acs.amazonaws.com/groups/global/AllUsers = READ_ACP>\r\nds000001/.gitattributes                       2018-07-14T01:16:49.000Z  284 ver:uERApdIdifyuGU_Fx.kv.I9Tikw8F2h0  acl:AccessDenied  http://openneuro.org.s3.amazonaws.com/ds000001/.gitattributes?versionId=uERApdIdifyuGU_Fx.kv.I9Tikw8F2h0 [OK] 38bf85f530ea5faf8445080579b01991\r\nds000001/.gitattributes                       2018-07-14T01:08:23.000Z DeleteMarker\r\nds000001/.gitattributes                       2018-07-13T21:55:50.000Z  284 ver:PTFccLZsWKaBPay7MOspbTsscWPm8K0u  acl:AccessDenied  http://openneuro.org.s3.amazonaws.com/ds000001/.gitattributes?versionId=PTFccLZsWKaBPay7MOspbTsscWPm8K0u [OK] 38bf85f530ea5faf8445080579b01991\r\nds000001/.gitattributes                       2018-07-13T21:48:43.000Z DeleteMarker\r\nds000001/.gitattributes                       2018-07-13T21:47:16.000Z  284 ver:wwwRJT6D59KlIoZemGSMmWh.tggbyukH  acl:AccessDenied  http://openneuro.org.s3.amazonaws.com/ds000001/.gitattributes?versionId=wwwRJT6D59KlIoZemGSMmWh.tggbyukH [OK] 38bf85f530ea5faf8445080579b01991\r\nds000001/.gitattributes                       2018-07-13T21:44:48.000Z DeleteMarker\r\nds000001/.gitattributes                       2018-07-13T21:40:19.000Z  284 ver:N_UXZXCbs_gusZTGzmzF4HFK2nRb912Y  acl:AccessDenied  http://openneuro.org.s3.amazonaws.com/ds000001/.gitattributes?versionId=N_UXZXCbs_gusZTGzmzF4HFK2nRb912Y [OK] 38bf85f530ea5faf8445080579b01991\r\n```\r\nyet to verify on the minimal case but if you @joeyh could clarify if that is expected, please let us know\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2779/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2779/timeline", "performed_via_github_app": null}