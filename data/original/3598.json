{"url": "https://api.github.com/repos/datalad/datalad/issues/3598", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3598/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3598/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3598/events", "html_url": "https://github.com/datalad/datalad/issues/3598", "id": 479849978, "node_id": "MDU6SXNzdWU0Nzk4NDk5Nzg=", "number": 3598, "title": "Issues with latest release of GitPython", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 192403870, "node_id": "MDU6TGFiZWwxOTI0MDM4NzA=", "url": "https://api.github.com/repos/datalad/datalad/labels/external-tools", "name": "external-tools", "color": "0052cc", "default": false, "description": ""}, {"id": 440544386, "node_id": "MDU6TGFiZWw0NDA1NDQzODY=", "url": "https://api.github.com/repos/datalad/datalad/labels/fix-implemented", "name": "fix-implemented", "color": "0e8a16", "default": false, "description": "A fix is available, but has not been merged or released, yet."}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-08-12T21:05:09Z", "updated_at": "2019-08-15T14:25:54Z", "closed_at": "2019-08-15T14:25:53Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "With the release of GitPython v3.0.0, we have some [new test failures][0].  The main ones I spot are the flyweight_monitoring_inode tests:\r\n\r\n```\r\n# from https://travis-ci.org/datalad/datalad/jobs/570888123#L1125\r\n======================================================================\r\nERROR: datalad.support.tests.test_annexrepo.test_AnnexRepo_flyweight_monitoring_inode\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/nose/case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/datalad/tests/utils.py\", line 615, in newfunc\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/datalad/tests/utils.py\", line 615, in newfunc\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/datalad/support/tests/test_annexrepo.py\", line 2399, in test_AnnexRepo_flyweight_monitoring_inode\r\n    check_repo_deals_with_inode_change(AnnexRepo, path, store)\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/datalad/support/tests/utils.py\", line 53, in check_repo_deals_with_inode_change\r\n    hexsha = repo.repo.head.object.hexsha\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/git/refs/symbolic.py\", line 193, in _get_object\r\n    return Object.new_from_sha(self.repo, hex_to_bin(self.dereference_recursive(self.repo, self.path)))\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/git/objects/base.py\", line 64, in new_from_sha\r\n    oinfo = repo.odb.info(sha1)\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/git/db.py\", line 37, in info\r\n    hexsha, typename, size = self._git.get_object_header(bin_to_hex(sha))\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/git/cmd.py\", line 1077, in get_object_header\r\n    return self.__get_object_header(cmd, ref)\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/git/cmd.py\", line 1066, in __get_object_header\r\n    return self._parse_object_header(cmd.stdout.readline())\r\n  File \"/home/travis/virtualenv/python3.5.6/lib/python3.5/site-packages/git/cmd.py\", line 1030, in _parse_object_header\r\n    raise ValueError(\"SHA %s could not be resolved, git returned: %r\" % (tokens[0], header_line.strip()))\r\nValueError: SHA b'8097085c9fb022ad18cea2ff099fbcd13ae953be' could not be resolved, git returned: b'8097085c9fb022ad18cea2ff099fbcd13ae953be missing'\r\n```\r\n\r\nIt looks like v3.0.0 drops support for Python 2, so I thought \"we should set v3.0.0 as the ceiling in setup.py\", but then I realized that the py3 builds are failing (and actually neither of the py2 ones are!).  So there's more going on here, but I haven't looked any deeper.\r\n\r\n[0]: https://travis-ci.org/datalad/datalad/builds/570888119", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3598/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3598/timeline", "performed_via_github_app": null}