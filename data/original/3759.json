{"url": "https://api.github.com/repos/datalad/datalad/issues/3759", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3759/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3759/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3759/events", "html_url": "https://github.com/datalad/datalad/issues/3759", "id": 504643110, "node_id": "MDU6SXNzdWU1MDQ2NDMxMTA=", "number": 3759, "title": "Bring back ability to `install` and `get` on arbitrary path", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}, {"id": 447185719, "node_id": "MDU6TGFiZWw0NDcxODU3MTk=", "url": "https://api.github.com/repos/datalad/datalad/labels/regression", "name": "regression", "color": "fc8387", "default": false, "description": ""}, {"id": 2767256516, "node_id": "MDU6TGFiZWwyNzY3MjU2NTE2", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-get", "name": "cmd-get", "color": "FEF2C0", "default": false, "description": ""}, {"id": 2775377145, "node_id": "MDU6TGFiZWwyNzc1Mzc3MTQ1", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-install", "name": "cmd-install", "color": "FEF2C0", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2019-10-09T13:11:09Z", "updated_at": "2021-09-09T15:31:22Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "#### What is the problem?\r\n\r\nOriginally introduced in #3746 and built on top in #3747 was RFing to remove use of AnnotatePaths.  It resulted in removing a possibility to operate on paths to be `install`ed or `get`ed, when CWD is outside of their (single) super dataset.\r\n\r\nI don't think it is not productive for me to stop progress in those PRs by demanding retaining backward feature parity.  That is why I decided to move discussion into this separate issue.\r\n\r\n# Use cases which were made impossible with those changes\r\n\r\nAll boil down to the original promise that, unlike git/git-annex, datalad could operate seamlessly on a path while residing outside of the dataset itself.  It provides a convenience for scripting etc.  Introduced changes make following use cases, which I used from time to time, not possible\r\n\r\n* ```datalad -f '{path}' search -d /// haxby | xargs datalad install```\r\nwould need to become e.g. \r\n   - ```cd ~/datalad && datalad -f '{path}' search haxby | xargs datalad install```\r\n* ```datalad install ///openneuro/ds000001 && datalad get ds000001/sub-01/anat```\r\nwould need to become e.g. \r\n  - ```datalad install ///openneuro/ds000001 && cd ds000001 && datalad get sub-01/anat```\r\n  - ```datalad install ///openneuro/ds000001 && datalad -C ds000001 get sub-01/anat```\r\n* pretty much for any \"let me just get that file in my other collection of datasets\" I would not be able to simply provide a path to it while keeping working in my project. With our new treatment of relative paths I would likely need to duplicate the path or really `cd` there (could be via `-C` through) to perform that operation\r\n* ```datalad install ///openneuro/ds00000{1,2,3} && datalad get ds00000*/sub-01/anat```\r\nwould need to\r\n  - establish top level super dataset first\r\n    - ```datalad create throwaway && cd throwaway && datalad install -d . ///openneuro/ds00000{1,2,3} && datalad get ds00000*/sub-01/anat```\r\n    - or some ugly looping\r\n\r\nLooking at the diff I think it should be feasible to bring back some part of the annotate_paths notion (just to deduce a set of top level superdatasets given a list of paths), and thus bring back prior functionality.  I am yet to decide either it is really needed or we could get away with it.\r\n\r\nIf we are to bring it back (in a new implementation), here is a note that a test verifying this feature was removed and would be nice to bring it back: https://github.com/datalad/datalad/pull/3747/files#diff-8e9c3c169ed7a22baba947b11ad9f402L400", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3759/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3759/timeline", "performed_via_github_app": null}