{"url": "https://api.github.com/repos/datalad/datalad/issues/5871", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5871/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5871/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5871/events", "html_url": "https://github.com/datalad/datalad/issues/5871", "id": 960500054, "node_id": "MDU6SXNzdWU5NjA1MDAwNTQ=", "number": 5871, "title": "datalad-installer yields git-annex version on Windows that breaks the tests", "user": {"login": "adswa", "id": 29738718, "node_id": "MDQ6VXNlcjI5NzM4NzE4", "avatar_url": "https://avatars.githubusercontent.com/u/29738718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adswa", "html_url": "https://github.com/adswa", "followers_url": "https://api.github.com/users/adswa/followers", "following_url": "https://api.github.com/users/adswa/following{/other_user}", "gists_url": "https://api.github.com/users/adswa/gists{/gist_id}", "starred_url": "https://api.github.com/users/adswa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adswa/subscriptions", "organizations_url": "https://api.github.com/users/adswa/orgs", "repos_url": "https://api.github.com/users/adswa/repos", "events_url": "https://api.github.com/users/adswa/events{/privacy}", "received_events_url": "https://api.github.com/users/adswa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2021-08-04T14:00:16Z", "updated_at": "2021-08-16T13:54:16Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "I ran the tests of ``core`` locally on Windows 11 with git annex version `8.20210128-g4407ade4c` and datalad version `datalad 0.14.6+515.gc9a3f713c`.\r\nI saw dozens of errors involving failed ``clone``, with the underlying error being a ``git annex init`` failure in the clone. I cannot reproduce it outside of test repositories, and the failure doesn't (yet?) show up in the unit tests.\r\n\r\n<details><summary>\r\nTracebacks are here </summary>\r\n\r\n```\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_reckless(True,)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 399, in check_reckless\r\n    ds = clone(src.path, top_path, reckless=True,\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_7ra_pj_o\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_reckless(False,)\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 413, in check_reckless\r\n    newsub = ds.clone(srcsub, 'newsub', result_xfm='datasets', return_type='item-or-list')\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 605, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\distribution\\dataset.py\", line 503, in apply_func\r\n    return f(**kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_5t87q7rz\\newsub\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_missing_commit\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 560, in _wrap_with_tree\r\n    return t(*(arg + (d,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 375, in test_clone_missing_commit\r\n    results = [x for x in\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 375, in <listcomp>\r\n    results = [x for x in\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_g_2_46j2\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_local_url_with_fetch\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 560, in _wrap_with_tree\r\n    return t(*(arg + (d,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 684, in test_local_url_with_fetch\r\n    ds_cloned = clone(source=source, path=path)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_tree_sh5qgh4o\\a\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_ria_http\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 560, in _wrap_with_tree\r\n    return t(*(arg + (d,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 672, in _wrap_serve_path_via_http\r\n    return tfunc(*(args + (path, url)), **kwargs)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 789, in test_ria_http\r\n    riaclone = clone(\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_tree_x4xuba3d\\clone\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_cfg_originorigin\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 615, in test_cfg_originorigin\r\n    clone_lev1 = clone(origin, path / 'clone_lev1')\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_npkr39pk\\clone_lev1\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_into_dataset\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 281, in test_clone_into_dataset\r\n    subds = ds.clone(source, \"sub\",\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 605, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\distribution\\dataset.py\", line 503, in apply_func\r\n    return f(**kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_6ax21ukp\\sub\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_isnot_recursive\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 262, in test_clone_isnot_recursive\r\n    ds = clone(src, path_nr, result_xfm='datasets', return_type='item-or-list')\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_bpwojf85\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_isnt_a_smartass\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 470, in test_clone_isnt_a_smartass\r\n    cloned = clone(origin, path,\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_x8_hvnzq\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_recorded_subds_reset\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 1557, in test_clone_recorded_subds_reset\r\n    ds_b = clone(ds_a.path, path / \"ds_b\")\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_7e168nql\\ds_b\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_unborn_head_sub\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 1470, in test_clone_unborn_head_sub\r\n    ds_cloned = clone(source=ds_origin.path, path=op.join(path, \"b\"))\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_v32_asgn\\b\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_url_mapping\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 1589, in test_clone_url_mapping\r\n    clone('rambo', dest_path)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_96wnz3sr\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_expanduser\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 600, in test_expanduser\r\n    cloneds = clone(op.join('~', 'src'), 'dest')\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp__dl7kb8e\\dest\r\n\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_inherit_src_candidates\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 672, in _wrap_serve_path_via_http\r\n    return tfunc(*(args + (path, url)), **kwargs)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 1249, in test_inherit_src_candidates\r\n    ds2.clone(source=ds1.path, path='mysub')\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 605, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\distribution\\dataset.py\", line 503, in apply_func\r\n    return f(**kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_lhf1dgh0\\ds2\\mysub\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_install_source_relpath\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 463, in test_install_source_relpath\r\n    clone(src_, dest)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_wsuixlpu\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_invalid_args\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 109, in test_invalid_args\r\n    res = clone('Zoidberg', path='ssh://mars:Zoidberg', on_failure='ignore')\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 504, in clone_dataset\r\n    srcs = _map_urls(cfg or destds.config, srcs)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\distribution\\dataset.py\", line 344, in config\r\n    repo = self.repo\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\distribution\\dataset.py\", line 290, in repo\r\n    self._repo = repo_from_path(self._path)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\local\\repo.py\", line 56, in repo_from_path\r\n    if not cls.is_valid_repo(path, **ckw):\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 676, in is_valid_repo\r\n    return initialized_annex or GitRepo(path, create=False, init=False).is_with_annex()\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\dataset\\repo.py\", line 146, in __call__\r\n    id_, new_args, new_kwargs = cls._flyweight_id_from_args(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\dataset\\repo.py\", line 234, in _flyweight_id_from_args\r\n    path_postproc = cls._flyweight_postproc_path(localpath)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\dataset\\repo.py\", line 193, in _flyweight_postproc_path\r\n    resolved = str(ut.Path(path).resolve().absolute())\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\pathlib.py\", line 1205, in resolve\r\n    s = self._flavour.resolve(self, strict=strict)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\pathlib.py\", line 206, in resolve\r\n    s = self._ext_to_normal(_getfinalpathname(s))\r\nOSError: [WinError 123] Die Syntax f\u00fcr den Dateinamen, Verzeichnisnamen oder die Datentr\u00e4gerbezeichnung ist falsch: 'C:\\\\Users\\\\datalads\\\\repos\\\\datalad\\\\ssh:\\\\mars:Zoidberg'\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_notclone_known_subdataset\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 320, in test_notclone_known_subdataset\r\n    ds = clone(src, path,\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_620jf7cu\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_dataset_from_just_source\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 1022, in _wrap_with_testrepos\r\n    testrepos_uris = _get_testrepos_uris(regex, flavors_)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 957, in _get_testrepos_uris\r\n    _submodule_annex_test_repo.create()\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils_testrepos.py\", line 85, in create\r\n    self.populate()\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils_testrepos.py\", line 165, in populate\r\n    AnnexRepo(opj(self.path, s), init=True)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\dataset\\repo.py\", line 152, in __call__\r\n    instance = type.__call__(cls, *new_args, **new_kwargs)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 271, in __init__\r\n    self._init(version=version, description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_testrepo_utkkjmwe\\subm 1\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_clone.test_clone_simple_local\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 1040, in _wrap_with_testrepos\r\n    t(*(arg + (uri,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_clone.py\", line 178, in test_clone_simple_local\r\n    ds = clone(src, path, description='mydummy',\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"mydummy\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_nd063p8t\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_push.test_gh1811\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_push.py\", line 620, in test_gh1811\r\n    clone = Clone.__call__(source=orig.path, path=clonepath)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp__vbv5b75\r\n\r\n======================================================================\r\nERROR: datalad.core.distributed.tests.test_push.test_push_recursive\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  [Previous line repeated 3 more times]\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\tests\\test_push.py\", line 293, in test_push_recursive\r\n    top = Clone.__call__(source=origin.path, path=src_path)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_kf789tn8\r\n\r\n======================================================================\r\nERROR: datalad.core.local.tests.test_resulthooks.test_basics\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\local\\tests\\test_resulthooks.py\", line 39, in test_basics\r\n    clone = install(source=src, path=dst)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\distribution\\install.py\", line 365, in __call__\r\n    for r in res:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_jvoji0pw\r\n\r\n======================================================================\r\nERROR: datalad.core.local.tests.test_run.test_run_explicit\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 1022, in _wrap_with_testrepos\r\n    testrepos_uris = _get_testrepos_uris(regex, flavors_)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 968, in _get_testrepos_uris\r\n    uris.append(clone_url(spec['local']))\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 910, in clone_url\r\n    AnnexRepo(tdir, init=True)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\dataset\\repo.py\", line 152, in __call__\r\n    instance = type.__call__(cls, *new_args, **new_kwargs)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 271, in __init__\r\n    self._init(version=version, description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\"' failed with exitcode 1 under C:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_clone_url_79z_n94g\r\n\r\n======================================================================\r\nERROR: datalad.core.local.tests.test_save.test_add_subdataset\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\nose\\case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 560, in _wrap_with_tree\r\n    return t(*(arg + (d,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\tests\\utils.py\", line 739, in _wrap_with_tempfile\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\local\\tests\\test_save.py\", line 443, in test_add_subdataset\r\n    other_clone = install(source=other.path, path=op.join(ds.path, 'other'))\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 483, in eval_func\r\n    return return_func(generator_func)(*args, **kwargs)\r\n  File \"C:\\Users\\datalads\\AppData\\Local\\Programs\\Python\\Python39\\lib\\site-packages\\wrapt\\wrappers.py\", line 566, in __call__\r\n    return self._self_wrapper(self.__wrapped__, self._self_instance,\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 476, in return_func\r\n    results = list(results)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\distribution\\install.py\", line 365, in __call__\r\n    for r in res:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 396, in generator_func\r\n    for r in _process_results(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\interface\\utils.py\", line 574, in _process_results\r\n    for res in results:\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 314, in __call__\r\n    yield from clone_dataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 690, in clone_dataset\r\n    yield from postclonecfg_annexdataset(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\core\\distributed\\clone.py\", line 1104, in postclonecfg_annexdataset\r\n    repo._init(description=description)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 1356, in _init\r\n    self._call_annex(['init'] + opts, protocol=AnnexInitOutput)\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\support\\annexrepo.py\", line 930, in _call_annex\r\n    return runner.run(\r\n  File \"C:\\Users\\datalads\\repos\\datalad\\datalad\\cmd.py\", line 168, in run\r\n    raise CommandError(\r\ndatalad.support.exceptions.CommandError: CommandError: '\"git\" \"-c\" \"diff.ignoreSubmodules=none\" \"annex\" \"init\" \"-c\" \"annex.dotfiles=true\" \"-c\" \"annex.retry=3\"' failed with exitcode 1 under C:\\U  sers\\datalads\\AppData\\Local\\Temp\\datalad_temp_tree_c6p5zmpc\\other\r\n\r\n----------------------------------------------------------------------\r\nRan 167 tests in 5640.889s\r\n\r\nFAILED (SKIP=20, errors=24)\r\n\r\n```\r\n\r\n</details>\r\n\r\nI can trigger this error, when I try to either ``datalad clone`` or ``git clone``+``git annex init`` these test datasets. The reason seems to be that the cloned repo does not have the non-adjusted default branch.\r\n\r\n```\r\n# normal branch situation in a test repo\r\nC:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_p385kz6k>git branch -a\r\n* adjusted/dl-test-branch(unlocked)\r\n  dl-test-branch\r\n  git-annex\r\n\r\nC:\\Users\\datalads\\AppData\\Local\\Temp\\datalad_temp_p385kz6k>cd ..\r\n\r\nC:\\Users\\datalads\\AppData\\Local\\Temp>git clone datalad_temp_36j8h1xl mytempclone3\r\nCloning into 'mytempclone3'...\r\ndone.\r\n\r\nC:\\Users\\datalads\\AppData\\Local\\Temp>cd mytempclone3\r\n\r\n# dl-test-branch is not visible to the clone\r\nC:\\Users\\datalads\\AppData\\Local\\Temp\\mytempclone3>git branch -a\r\n* adjusted/dl-test-branch(unlocked)\r\n  remotes/origin/HEAD -> origin/adjusted/dl-test-branch(unlocked)\r\n  remotes/origin/adjusted/dl-test-branch(unlocked)\r\n  remotes/origin/git-annex\r\n\r\nC:\\Users\\datalads\\AppData\\Local\\Temp\\mytempclone3>git config --get remote.origin.fetch\r\n+refs/heads/*:refs/remotes/origin/*\r\n\r\n\r\n# a git fetch doesn't retrieve it\r\nC:\\Users\\datalads\\AppData\\Local\\Temp\\mytempclone3>git fetch origin\r\n\r\n# because it can't find the ref, git annex init fails\r\nC:\\Users\\datalads\\AppData\\Local\\Temp\\mytempclone3>git annex init\r\ninit\r\n  Detected a filesystem without fifo support.\r\n\r\n  Disabling ssh connection caching.\r\n\r\n  Detected a crippled filesystem.\r\n\r\n  Disabling core.symlinks.\r\n(merging origin/git-annex into git-annex...)\r\n(recording state in git...)\r\n(scanning for unlocked files...)\r\nfatal: refs/remotes/origin/dl-test-branch: not a valid SHA1\r\n\r\ngit-annex: git [Param \"update-ref\",Param \"refs/heads/dl-test-branch\",Param \"refs/remotes/origin/dl-test-branch\"] failed\r\nCallStack (from HasCallStack):\r\n  error, called at .\\\\Git\\\\Command.hs:42:17 in main:Git.Command\r\nfailed\r\ngit-annex: init: 1 failed\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5871/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5871/timeline", "performed_via_github_app": null}