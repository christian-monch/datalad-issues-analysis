{"url": "https://api.github.com/repos/datalad/datalad/issues/5669", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5669/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5669/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5669/events", "html_url": "https://github.com/datalad/datalad/pull/5669", "id": 893615825, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQ2MTAwOTE3", "number": 5669, "title": "Switch to versioneer and auto", "user": {"login": "jwodder", "id": 98207, "node_id": "MDQ6VXNlcjk4MjA3", "avatar_url": "https://avatars.githubusercontent.com/u/98207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwodder", "html_url": "https://github.com/jwodder", "followers_url": "https://api.github.com/users/jwodder/followers", "following_url": "https://api.github.com/users/jwodder/following{/other_user}", "gists_url": "https://api.github.com/users/jwodder/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwodder/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwodder/subscriptions", "organizations_url": "https://api.github.com/users/jwodder/orgs", "repos_url": "https://api.github.com/users/jwodder/repos", "events_url": "https://api.github.com/users/jwodder/events{/privacy}", "received_events_url": "https://api.github.com/users/jwodder/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1746781627, "node_id": "MDU6TGFiZWwxNzQ2NzgxNjI3", "url": "https://api.github.com/repos/datalad/datalad/labels/merge-if-ok", "name": "merge-if-ok", "color": "fbca04", "default": false, "description": "OP considers this work done, and requests review/merge"}, {"id": 3049454520, "node_id": "MDU6TGFiZWwzMDQ5NDU0NTIw", "url": "https://api.github.com/repos/datalad/datalad/labels/internal", "name": "internal", "color": "696969", "default": false, "description": "Changes only affect the internal API"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 45, "created_at": "2021-05-17T19:01:16Z", "updated_at": "2021-10-12T02:49:12Z", "closed_at": "2021-06-21T21:14:57Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5669", "html_url": "https://github.com/datalad/datalad/pull/5669", "diff_url": "https://github.com/datalad/datalad/pull/5669.diff", "patch_url": "https://github.com/datalad/datalad/pull/5669.patch"}, "body": "Closes #4999.\r\n\r\nNote that the command for building & uploading to PyPI will create & upload a wheel, which is something that is currently not done due to #4315, which should have been fixed by #4695.\r\n\r\nThis PR also needs to be accompanied by the following changes:\r\n- [x] The change to versioneer broke the manpage creation command.  I'm not sure how to fix this.\r\n   - @yarikoptic fixed it up by stopping to parse `__version__` from `version.py` but use `importlib_metadata` and query for the version of datalad.  It would require to have `datalad` installed now but IMHO it is ok\r\n- [x] versioneer's upcoming changes to the CHANGELOG will break `test_version.py`.\r\n   - @yarikoptic fixed by adapting and relaxing that test a  bit. hopefully no surprises would come upon release\r\n- [x] I'm not entirely certain how `auto` will react to releasing from `maint`; I've filed an issue on the `auto` repository asking for advice: https://github.com/intuit/auto/discussions/1981\r\n   - @yarikoptic: I think we should be fine as long as we always release from `maint`\r\n- [x] Figure out permissions (or mint a new dedicated TOKEN) for `Add \"patch\" or \"minor\" label to PR` action\r\n   - @yarikoptic kinda figured out -- most likely because PRs come from forks.  Action is RFed to be a read-only check\r\n- [x] Create the necessary labels for `auto` by running `GH_TOKEN=... auto create-labels` in a copy of this repository containing `.autorc`\r\n- [x] A GitHub release must be created for the most recent version of datalad\r\n- [x] An auth token for uploading assets for the `datalad` project to PyPI must be saved as a secret named \"`PYPI_TOKEN`\"\r\n- [x] `CHANGELOG.md` must be reformatted to be compatible with auto by deleting everything above the header for the most recent release and deleting a `#` from all header lines.", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5669/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5669/timeline", "performed_via_github_app": null}