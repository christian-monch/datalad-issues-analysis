{"url": "https://api.github.com/repos/datalad/datalad/issues/1513", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1513/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1513/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1513/events", "html_url": "https://github.com/datalad/datalad/pull/1513", "id": 227752709, "node_id": "MDExOlB1bGxSZXF1ZXN0MTE5OTM2MjU4", "number": 1513, "title": "Benchmark basic API commands (add, install, etc)", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2017-05-10T17:21:25Z", "updated_at": "2019-02-17T04:02:26Z", "closed_at": "2017-05-11T14:10:09Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/1513", "html_url": "https://github.com/datalad/datalad/pull/1513", "diff_url": "https://github.com/datalad/datalad/pull/1513.diff", "patch_url": "https://github.com/datalad/datalad/pull/1513.patch"}, "body": "Whatever I thought would be 20 minutes, resulted in hours of \r\n- #1512 \"discovery\", troubleshooting and for which here I just provided an ugly workaround here for benchmarks in question but should be properly fixed asap\r\n- 2 commits pushed directly into master (6ca5392a1550c64c17e448527d74076586ff7455, 6ca5392a1550c64c17e448527d74076586ff7455) \r\n\r\nSo now, you can do something like \r\n```shell\r\n$> asv run --python=2.7 --dry-run --bench .*SuperdatasetsOperationsSuite.*   \r\n\u00b7 Creating environments                                                   \r\n\u00b7 Discovering benchmarks\r\n\u00b7\u00b7 Uninstalling from virtualenv-py2.7\r\n\u00b7\u00b7 Building for virtualenv-py2.7\r\n\u00b7\u00b7 Installing into virtualenv-py2.7..\r\n\u00b7 Running 10 total benchmarks (2 commits * 1 environments * 5 benchmarks)\r\n[  0.00%] \u00b7 For DataLad commit hash 6ca5392a:\r\n[  0.00%] \u00b7\u00b7 Building for virtualenv-py2.7..\r\n[  0.00%] \u00b7\u00b7 Benchmarking virtualenv-py2.7\r\n[  0.00%] \u00b7\u00b7\u00b7 Setting up /home/yoh/proj/datalad/datalad/benchmarks/benchmarks.py:114\r\n[ 10.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_createadd                                                                      1.50s\r\n[ 20.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_createadd_to_dataset                                                           1.79s\r\n[ 30.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_installr                                                                       6.02s\r\n[ 40.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_ls                                                                          141.71ms\r\n[ 50.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_remove                                                                         6.16s\r\n[ 50.00%] \u00b7 For DataLad commit hash cdedf35d:\r\n[ 50.00%] \u00b7\u00b7 Building for virtualenv-py2.7...\r\n[ 50.00%] \u00b7\u00b7 Benchmarking virtualenv-py2.7\r\n[ 50.00%] \u00b7\u00b7\u00b7 Setting up /home/yoh/proj/datalad/datalad/benchmarks/benchmarks.py:114\r\n[ 60.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_createadd                                                                      1.17s\r\n[ 70.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_createadd_to_dataset                                                           1.54s\r\n[ 80.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_installr                                                                       6.07s\r\n[ 90.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_ls                                                                          146.31ms\r\n[100.00%] \u00b7\u00b7\u00b7 Running benchmarks.SuperdatasetsOperationsSuite.time_remove                                                                         6.12s\r\n```\r\n\r\nI also filed https://github.com/spacetelescope/asv/issues/513 which if resolved could help to see right away which commit is for which branch(es) among being tested.\r\n\r\n- [ ] add latest release into the \"branches\" to be tested.  Then could be compared right away against latest release performance\r\n- [x] run benchmarks on some dedicated for that purpose box. probably shouldn't use smaug ", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1513/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1513/timeline", "performed_via_github_app": null}