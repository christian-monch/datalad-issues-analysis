{"url": "https://api.github.com/repos/datalad/datalad/issues/5745", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5745/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5745/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5745/events", "html_url": "https://github.com/datalad/datalad/issues/5745", "id": 920426854, "node_id": "MDU6SXNzdWU5MjA0MjY4NTQ=", "number": 5745, "title": "test_annexrepo.test_files_split: annex add -J5 on OSX:  rename: permission denied ", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 132485920, "node_id": "MDU6TGFiZWwxMzI0ODU5MjA=", "url": "https://api.github.com/repos/datalad/datalad/labels/annex", "name": "annex", "color": "0052cc", "default": false, "description": "Git-annex related issue"}, {"id": 191508346, "node_id": "MDU6TGFiZWwxOTE1MDgzNDY=", "url": "https://api.github.com/repos/datalad/datalad/labels/platform-osx", "name": "platform-osx", "color": "0052cc", "default": false, "description": "Issue concerned with MacOSX"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2021-06-14T13:42:22Z", "updated_at": "2021-06-14T13:42:22Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "continuation to #5742 found while testing #5735 with , while very new cmd:annex: cmd:annex=8.20210428  and -J5 on OSX\r\n```\r\n2021-06-10T16:54:47.6295090Z ======================================================================\r\n2021-06-10T16:54:47.6296900Z ERROR: datalad.support.tests.test_annexrepo.test_files_split(<class 'datalad.support.annexrepo.AnnexRepo'>,)\r\n2021-06-10T16:54:47.6298390Z ----------------------------------------------------------------------\r\n2021-06-10T16:54:47.6298960Z Traceback (most recent call last):\r\n2021-06-10T16:54:47.6302450Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/nose/case.py\", line 198, in runTest\r\n2021-06-10T16:54:47.6303270Z     self.test(*self.arg)\r\n2021-06-10T16:54:47.6304790Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/tests/utils.py\", line 585, in _wrap_with_tree\r\n2021-06-10T16:54:47.6305600Z     return t(*(arg + (d,)), **kw)\r\n2021-06-10T16:54:47.6307000Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/support/tests/test_annexrepo.py\", line 2375, in check_files_split\r\n2021-06-10T16:54:47.6307850Z     r.add(files)\r\n2021-06-10T16:54:47.6309250Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/support/gitrepo.py\", line 324, in _wrap_normalize_paths\r\n2021-06-10T16:54:47.6310240Z     result = func(self, files_new, *args, **kwargs)\r\n2021-06-10T16:54:47.6311590Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/support/annexrepo.py\", line 1566, in add\r\n2021-06-10T16:54:47.6312570Z     git_options=git_options, annex_options=annex_options, update=update\r\n2021-06-10T16:54:47.6314150Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/support/annexrepo.py\", line 1652, in add_\r\n2021-06-10T16:54:47.6315070Z     total_nbytes=sum(expected_additions.values())):\r\n2021-06-10T16:54:47.6316540Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/support/annexrepo.py\", line 1122, in _call_annex_records\r\n2021-06-10T16:54:47.6317360Z     raise e\r\n2021-06-10T16:54:47.6319110Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/support/annexrepo.py\", line 1082, in _call_annex_records\r\n2021-06-10T16:54:47.6320160Z     **kwargs,\r\n2021-06-10T16:54:47.6321480Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/support/annexrepo.py\", line 975, in _call_annex\r\n2021-06-10T16:54:47.6322260Z     **kwargs)\r\n2021-06-10T16:54:47.6323490Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/cmd.py\", line 663, in run_on_filelist_chunks\r\n2021-06-10T16:54:47.6324220Z     **kwargs)\r\n2021-06-10T16:54:47.6325430Z   File \"/Users/runner/hostedtoolcache/Python/3.6.13/x64/lib/python3.6/site-packages/datalad/cmd.py\", line 412, in run\r\n2021-06-10T16:54:47.6326150Z     **results,\r\n2021-06-10T16:54:47.9212990Z datalad.support.exceptions.CommandError: CommandError: 'git -c diff.ignoreSubmodules=none annex add --json --json-error-messages -c annex.dotfiles=true -c annex.retry=3 -J3 -- dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd064/ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff055 \r\n...\r\nfailed with exitcode 1 under /private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/datalad_temp_tree_check_files_splitk_hvme9u [err: 'git-annex: add: 1 failed'] [errors from JSON records: [\"['git-annex: .git/annex/othertmp/ingest-fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff94498-1: rename: permission denied (Permission denied)']\"]] [info keys: stdout_json]\r\n```\r\n\r\nThere was a recent change to this test in #5734 to go from 10,000 of identical empty keys to 100 unique ones... not sure which was this run ATM.  Needs testing locally etc.", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5745/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5745/timeline", "performed_via_github_app": null}