{"url": "https://api.github.com/repos/datalad/datalad/issues/5673", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5673/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5673/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5673/events", "html_url": "https://github.com/datalad/datalad/pull/5673", "id": 895602628, "node_id": "MDExOlB1bGxSZXF1ZXN0NjQ3ODA0NDYx", "number": 5673, "title": "Drafting an approach to #5668", "user": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-19T15:43:06Z", "updated_at": "2021-05-20T12:27:49Z", "closed_at": "2021-05-20T12:27:49Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5673", "html_url": "https://github.com/datalad/datalad/pull/5673", "diff_url": "https://github.com/datalad/datalad/pull/5673.diff", "patch_url": "https://github.com/datalad/datalad/pull/5673.patch"}, "body": "As mentioned in #5668, I think the main issue is to get into the situation in the first place. Generally, we should respect whatever permissions are set in-store, instead of obtaining write permissions (although I see that it's kind of fine, if we can obtain them).\r\nThe assumption that git-annex \"touched\" the object tree and that we need to deal with that seems dangerous to me, as git-annex should not be aware of the object tree in the store. It seems better to come up with appropriate solutions to make it much less likely for anything like that to happen. However, here is a \"fix\". For said reasons I intentionally limited the scope in which it is applied (only things directly involved in writing to a potentially protected object tree, as opposed to all write operations on the remote end). ORA/RIA-related stuff is undergoing some rewriting/refactoring and I think this is to be revisited afterwards.\r\n\r\nPlease check, whether this (check the test) is sufficient for now from your point of view, @mih!\r\n\r\n- [x] add test\r\n- [x] equivalent approach for SSH", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5673/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5673/timeline", "performed_via_github_app": null}