{"url": "https://api.github.com/repos/datalad/datalad/issues/1321", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1321/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1321/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1321/events", "html_url": "https://github.com/datalad/datalad/issues/1321", "id": 209207369, "node_id": "MDU6SXNzdWUyMDkyMDczNjk=", "number": 1321, "title": "get might not report at the end correct summary while failing due to out of space", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2767256516, "node_id": "MDU6TGFiZWwyNzY3MjU2NTE2", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-get", "name": "cmd-get", "color": "FEF2C0", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2017-02-21T16:57:40Z", "updated_at": "2021-02-23T23:58:13Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "```\r\n$> datalad get -J 4 .\r\n[INFO   ] Getting 1 items of dataset <Dataset path=/tmp/ds000001-clone> ... \r\n[INFO   ] Actually getting 21 files \r\nTotal (9 ok, 11 failed out of 21)  0%|\\u258f                                           | 1.43M/447M [00:00<04:17, 1.73MB/s]00<?, ?B/s]\r\n(venv-tests)3 25182.....................................:Tue 21 Feb 2017 11:46:30 AM EST:.\r\n(git)smaug:/tmp/ds000001-clone[master]git\r\n$> datalad get -J 4 .\r\n[INFO   ] Getting 1 items of dataset <Dataset path=/tmp/ds000001-clone> ... \r\n[INFO   ] Actually getting 11 files \r\nTotal:   0%|                                                                                          | 0.00/445M [00:00<?, ?B/s]\r\n(venv-tests)3 25182.....................................:Tue 21 Feb 2017 11:46:32 AM EST:.\r\n(git)smaug:/tmp/ds000001-clone[master]git\r\n$> datalad get -J 4 .\r\n[INFO   ] Getting 1 items of dataset <Dataset path=/tmp/ds000001-clone> ... \r\n[INFO   ] Actually getting 11 files \r\nTotal:   0%|    \r\n```\r\n\r\nI thought that it is due to #451 but it is not the case or not fully the case since even without parallel and without having datalad or datalad-archives remotes enabled:\r\n```shell\r\n$> datalad get .     \r\n[INFO   ] Getting 1 items of dataset <Dataset path=/tmp/ds000001-clone> ... \r\n[INFO   ] Actually getting 7 files \r\nTotal:   0%|                                                                                          | 0.00/339M [00:00<?, ?B/s]\r\n(\r\n```\r\nso -- it just exits without any error code or summary message (may be it is overridden by progressbar?)\r\n\r\nthe reason why it was failing is that it got short on the disk space, so I guess annex get was refusing even to try, but still enough for our code to function... later, when 100% full it started to show some nasty\r\n```\r\ngit-annex: .git/annex/misctmp/mergedrefs.0: createDirectory: resource exhausted (No space left on device)\r\ngit-annex: find: 128 failed\r\nException OSError: OSError(28, 'No space left on device') in <bound method AnnexRepo.__del__ of <AnnexRepo path=/tmp/ds000001-clone (<class 'datalad.support.annexrepo.AnnexRepo'>)>> ignored\r\n```\r\nmaking it somewhat obvious finally...  \r\n\r\nSo:\r\n- should check to make sure that progress bar doesn't override status\r\n- probably parse output from annex (note?) and issue a warning if \"out of space\" message detected\r\n- eventually non-0 exit code whenever new return values concept comes into play", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1321/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1321/timeline", "performed_via_github_app": null}