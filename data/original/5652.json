{"url": "https://api.github.com/repos/datalad/datalad/issues/5652", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5652/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5652/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5652/events", "html_url": "https://github.com/datalad/datalad/issues/5652", "id": 887151623, "node_id": "MDU6SXNzdWU4ODcxNTE2MjM=", "number": 5652, "title": "Datalad python logger initialises in 'info' if logging.basicConfig is called", "user": {"login": "fraimondo", "id": 4493699, "node_id": "MDQ6VXNlcjQ0OTM2OTk=", "avatar_url": "https://avatars.githubusercontent.com/u/4493699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fraimondo", "html_url": "https://github.com/fraimondo", "followers_url": "https://api.github.com/users/fraimondo/followers", "following_url": "https://api.github.com/users/fraimondo/following{/other_user}", "gists_url": "https://api.github.com/users/fraimondo/gists{/gist_id}", "starred_url": "https://api.github.com/users/fraimondo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fraimondo/subscriptions", "organizations_url": "https://api.github.com/users/fraimondo/orgs", "repos_url": "https://api.github.com/users/fraimondo/repos", "events_url": "https://api.github.com/users/fraimondo/events{/privacy}", "received_events_url": "https://api.github.com/users/fraimondo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 2096760260, "node_id": "MDU6TGFiZWwyMDk2NzYwMjYw", "url": "https://api.github.com/repos/datalad/datalad/labels/corpse-in-basement", "name": "corpse-in-basement", "color": "d4c5f9", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2021-05-11T12:39:13Z", "updated_at": "2021-09-20T08:55:07Z", "closed_at": null, "author_association": "NONE", "active_lock_reason": null, "body": "#### What is the problem?\r\nIf using the Python API, when calling `logging.basicConfig`, datalad automatically starts logging all info messages, without accounting for the root logger level.\r\n\r\n#### What steps will reproduce the problem?\r\n\r\n```Python\r\nimport sys\r\nimport logging\r\nimport datalad.api\r\n\r\n# Comment / uncomment this line to hide/see datalad info messages\r\nlogging.basicConfig(stream=sys.stdout, level=logging.WARN)\r\n\r\nlogger = logging.getLogger(\"TEST\")\r\nlogger.setLevel(logging.WARN)\r\n\r\nREPO_URL = ('git@github.com:datalad-datasets/'\r\n            'human-connectome-project-openaccess.git')\r\n\r\ndb_path = './hcp'  # to run the example, make sure it does not exist\r\nlogger.info('This should not appear')\r\nlogger.warning('This should appear')\r\n\r\ndatalad.api.install(source=REPO_URL, path=db_path)\r\n```\r\n\r\n#### What version of DataLad are you using (run `datalad --version`)? On what operating system (consider running `datalad wtf`)?\r\n```\r\n# WTF\r\n## configuration <SENSITIVE, report disabled by configuration>\r\n## credentials \r\n  - keyring: \r\n    - active_backends: \r\n      - macOS Keyring\r\n      - PlaintextKeyring with no encyption v.1.0 at /Users/fraimondo/.local/share/python_keyring/keyring_pass.cfg\r\n    - config_file: /Users/fraimondo/.config/python_keyring/keyringrc.cfg\r\n    - data_root: /Users/fraimondo/.local/share/python_keyring\r\n## datalad \r\n  - full_version: 0.14.4\r\n  - version: 0.14.4\r\n## dataset \r\n  - id: None\r\n  - metadata: <SENSITIVE, report disabled by configuration>\r\n  - path: /Users/fraimondo/dev/projects/Event_Detection\r\n  - repo: GitRepo\r\n## dependencies \r\n  - annexremote: 1.2.1\r\n  - appdirs: 1.4.4\r\n  - boto: 2.49.0\r\n  - cmd:annex: 8.20210127\r\n  - cmd:bundled-git: UNKNOWN\r\n  - cmd:git: 2.24.3\r\n  - cmd:system-git: 2.24.3\r\n  - cmd:system-ssh: 8.1p1\r\n  - humanize: 3.5.0\r\n  - iso8601: 0.1.14\r\n  - keyring: 22.3.0\r\n  - keyrings.alt: 4.0.2\r\n  - msgpack: 1.0.2\r\n  - requests: 2.25.1\r\n  - wrapt: 1.12.1\r\n## environment \r\n  - LC_CTYPE: UTF-8\r\n  - PATH: /Users/fraimondo/Applications/workbench/bin_macosx64:/Users/fraimondo/.rbenv/shims:/Users/fraimondo/dev/tbox/freesurfer/bin:/Users/fraimondo/dev/tbox/freesurfer/fsfast/bin:/Users/fraimondo/dev/tbox/fsl/bin:/Users/fraimondo/dev/tbox/freesurfer/mni/bin:/usr/local/opt/ruby/bin:/Users/fraimondo/anaconda3/envs/event_detect/bin:/Users/fraimondo/anaconda3/condabin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin:/Library/Apple/usr/bin:/Users/fraimondo/.platformio/penv/bin:/Users/fraimondo/gems/bin:/Users/fraimondo/.gem/ruby/3.0.0/bin\r\n## extensions \r\n## git-annex \r\n  - build flags: \r\n    - Assistant\r\n    - Webapp\r\n    - Pairing\r\n    - FsEvents\r\n    - TorrentParser\r\n    - MagicMime\r\n    - Feeds\r\n    - Testsuite\r\n    - S3\r\n    - WebDAV\r\n  - dependency versions: \r\n    - aws-0.22\r\n    - bloomfilter-2.0.1.0\r\n    - cryptonite-0.28\r\n    - DAV-1.3.4\r\n    - feed-1.3.0.1\r\n    - ghc-8.10.3\r\n    - http-client-0.7.4\r\n    - persistent-sqlite-2.11.0.0\r\n    - torrent-10000.1.1\r\n    - uuid-1.3.13\r\n    - yesod-1.6.1.0\r\n  - key/value backends: \r\n    - SHA256E\r\n    - SHA256\r\n    - SHA512E\r\n    - SHA512\r\n    - SHA224E\r\n    - SHA224\r\n    - SHA384E\r\n    - SHA384\r\n    - SHA3_256E\r\n    - SHA3_256\r\n    - SHA3_512E\r\n    - SHA3_512\r\n    - SHA3_224E\r\n    - SHA3_224\r\n    - SHA3_384E\r\n    - SHA3_384\r\n    - SKEIN256E\r\n    - SKEIN256\r\n    - SKEIN512E\r\n    - SKEIN512\r\n    - BLAKE2B256E\r\n    - BLAKE2B256\r\n    - BLAKE2B512E\r\n    - BLAKE2B512\r\n    - BLAKE2B160E\r\n    - BLAKE2B160\r\n    - BLAKE2B224E\r\n    - BLAKE2B224\r\n    - BLAKE2B384E\r\n    - BLAKE2B384\r\n    - BLAKE2BP512E\r\n    - BLAKE2BP512\r\n    - BLAKE2S256E\r\n    - BLAKE2S256\r\n    - BLAKE2S160E\r\n    - BLAKE2S160\r\n    - BLAKE2S224E\r\n    - BLAKE2S224\r\n    - BLAKE2SP256E\r\n    - BLAKE2SP256\r\n    - BLAKE2SP224E\r\n    - BLAKE2SP224\r\n    - SHA1E\r\n    - SHA1\r\n    - MD5E\r\n    - MD5\r\n    - WORM\r\n    - URL\r\n    - X*\r\n  - operating system: darwin x86_64\r\n  - remote types: \r\n    - git\r\n    - gcrypt\r\n    - p2p\r\n    - S3\r\n    - bup\r\n    - directory\r\n    - rsync\r\n    - web\r\n    - bittorrent\r\n    - webdav\r\n    - adb\r\n    - tahoe\r\n    - glacier\r\n    - ddar\r\n    - git-lfs\r\n    - httpalso\r\n    - borg\r\n    - hook\r\n    - external\r\n  - supported repository versions: \r\n    - 8\r\n  - upgrade supported from repository versions: \r\n    - 0\r\n    - 1\r\n    - 2\r\n    - 3\r\n    - 4\r\n    - 5\r\n    - 6\r\n    - 7\r\n  - version: 8.20210127\r\n## location \r\n  - path: /Users/fraimondo/dev/projects/Event_Detection\r\n  - type: dataset\r\n## metadata_extractors \r\n  - annex (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.annex\r\n    - version: None\r\n  - audio (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: No module named 'mutagen' [audio.py:<module>:17]\r\n    - module: datalad.metadata.extractors.audio\r\n  - datacite (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datacite\r\n    - version: None\r\n  - datalad_core (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_core\r\n    - version: None\r\n  - datalad_rfc822 (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.datalad_rfc822\r\n    - version: None\r\n  - exif (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: No module named 'exifread' [exif.py:<module>:16]\r\n    - module: datalad.metadata.extractors.exif\r\n  - frictionless_datapackage (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: None\r\n    - module: datalad.metadata.extractors.frictionless_datapackage\r\n    - version: None\r\n  - image (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: No module named 'PIL' [image.py:<module>:16]\r\n    - module: datalad.metadata.extractors.image\r\n  - xmp (datalad 0.14.4): \r\n    - distribution: datalad 0.14.4\r\n    - load_error: No module named 'libxmp' [xmp.py:<module>:20]\r\n    - module: datalad.metadata.extractors.xmp\r\n## metadata_indexers \r\n## python \r\n  - implementation: CPython\r\n  - version: 3.9.4\r\n## system \r\n  - distribution: darwin/20.4.0 10.16/x86_64\r\n  - encoding: \r\n    - default: utf-8\r\n    - filesystem: utf-8\r\n    - locale.prefered: UTF-8\r\n  - max_path_length: 322\r\n  - name: Darwin\r\n  - release: 20.4.0\r\n  - type: posix\r\n  - version: Darwin Kernel Version 20.4.0: Thu Apr 22 21:46:47 PDT 2021; root:xnu-7195.101.2~1/RELEASE_X86_64\r\n```\r\n#### Is there anything else that would be useful to know in this context?\r\n\r\nIt's get solved by setting the logging level back to WARN:\r\n\r\n```\r\nimport sys\r\nimport logging\r\nimport datalad.api\r\nfrom datalad.log import lgr as _dllgr\r\n\r\n# Comment / uncomment this line to hide/see datalad info messages\r\nlogging.basicConfig(stream=sys.stdout, level=logging.WARN)\r\n\r\nlogger = logging.getLogger(\"TEST\")\r\nlogger.setLevel(logging.WARN)\r\n_dllgr.setLevel(logging.WARN)\r\n```\r\n\r\n#### Have you had any success using DataLad before? (to assess your expertise/prior luck.  We would welcome your testimonial additions to https://github.com/datalad/datalad/wiki/Testimonials as well)\r\n\r\nDespite this little bug (that is filling my logs with clone/get progress), everything is being smooth. It will be tough to not use datalad.\r\n", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5652/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5652/timeline", "performed_via_github_app": null}