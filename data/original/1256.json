{"url": "https://api.github.com/repos/datalad/datalad/issues/1256", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1256/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1256/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1256/events", "html_url": "https://github.com/datalad/datalad/issues/1256", "id": 205286553, "node_id": "MDU6SXNzdWUyMDUyODY1NTM=", "number": 1256, "title": "publish --since=None (default) should consider only changes since last push", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 447185719, "node_id": "MDU6TGFiZWw0NDcxODU3MTk=", "url": "https://api.github.com/repos/datalad/datalad/labels/regression", "name": "regression", "color": "fc8387", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/35", "html_url": "https://github.com/datalad/datalad/milestone/35", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/35/labels", "id": 2083028, "node_id": "MDk6TWlsZXN0b25lMjA4MzAyOA==", "number": 35, "title": "Release 0.5", "description": "Finish ultimate DB support and construct first more or less complete openfmri metadataset which would have links to access data from tarballs or straight from extracted files on S3 ", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 17, "state": "closed", "created_at": "2016-10-20T16:49:47Z", "updated_at": "2017-06-13T06:01:40Z", "due_on": null, "closed_at": "2017-06-13T06:01:40Z"}, "comments": 14, "created_at": "2017-02-03T22:27:50Z", "updated_at": "2017-03-20T18:23:55Z", "closed_at": "2017-03-20T18:23:55Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "Originally reported in https://github.com/datalad/datalad/issues/1250#issuecomment-277379955\r\n\r\nThe point of having --since is to minimize amount of work needed based on the changes since the last push, while being able to force it to consider more changes by providing explicit value for --since.  Recent refactoring in publish seems removed that magic, and now with empty since nothing might get published at all, although current one was ahead of the remote\r\n\r\nhere is a copy from that other report:\r\n```shell\r\n(git)smaug:/mnt/btrfs/datasets/datalad/crawl[master]git\r\n$> datalad publish --to=datalad-public -r\r\nNothing was published\r\n```\r\nwhich is really sad since\r\n```shell\r\n$> git lg datalad-public/master..master \r\n* 624430e - (HEAD -> master) [DATALAD] aggregated meta data (24 minutes ago) [Yaroslav Halchenko]\r\n* ae4afa5 - [DATALAD] auto-saved changes (26 minutes ago) [Yaroslav Halchenko]\r\n* 7a4bd3a - fixed up json (34 minutes ago) [Yaroslav Halchenko]\r\n* 3b37735 - [DATALAD] aggregated meta data (7 days ago) [Yaroslav Halchenko]\r\n* 4a9e730 - [DATALAD] auto-saved changes (7 days ago) [Yaroslav Halchenko]\r\n```\r\nand so `--since` should have done correct detection as it did before (I think)... and indeed probably since now is handled only if explicitly specified.  So I deactivated virtualenv and went back to released 0.4.1, and it did the right thing:\r\n```shell\r\n$> datalad publish --to=datalad-public -r\r\n[INFO   ] Publishing <Dataset path=/mnt/btrfs/datasets/datalad/crawl/labs/haxby/raiders> to datalad-public \r\n[INFO   ] 3bf7193..07861d6\r\n|  \r\n[INFO   ] f5d4b54..df51dc4\r\n|  \r\n[INFO   ] Publishing <Dataset path=/mnt/btrfs/datasets/datalad/crawl/labs/haxby> to datalad-public \r\n[INFO   ] c88cc54..f0f80c2\r\n|  \r\n[INFO   ] Publishing <Dataset path=/mnt/btrfs/datasets/datalad/crawl/labs/mitchell/science2008> to datalad-public \r\n[INFO   ] a1bb300..514aa4a\r\n...\r\n```", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1256/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1256/timeline", "performed_via_github_app": null}