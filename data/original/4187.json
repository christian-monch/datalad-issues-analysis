{"url": "https://api.github.com/repos/datalad/datalad/issues/4187", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/4187/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/4187/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/4187/events", "html_url": "https://github.com/datalad/datalad/pull/4187", "id": 570282479, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5MzQxOTQ4", "number": 4187, "title": "create-sibling: Add support for local paths (v2)", "user": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/65", "html_url": "https://github.com/datalad/datalad/milestone/65", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/65/labels", "id": 4992705, "node_id": "MDk6TWlsZXN0b25lNDk5MjcwNQ==", "number": 65, "title": "0.12.x", "description": null, "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 20, "state": "closed", "created_at": "2020-01-09T22:01:43Z", "updated_at": "2021-01-06T14:55:51Z", "due_on": null, "closed_at": "2021-01-06T14:55:51Z"}, "comments": 2, "created_at": "2020-02-25T03:15:59Z", "updated_at": "2020-02-27T19:26:09Z", "closed_at": "2020-02-25T06:07:42Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/4187", "html_url": "https://github.com/datalad/datalad/pull/4187", "diff_url": "https://github.com/datalad/datalad/pull/4187.diff", "patch_url": "https://github.com/datalad/datalad/pull/4187.patch"}, "body": "This PR resurrects @yarikoptic's patch from gh-2615 that added local path support to `create_sibling`.  The (rebased) commit from that PR sits as the first commit of this series.  The final patch extends the existing `create_sibling` tests to go through the local path case.  The patches in between are various tweaks and fixes.\r\n\r\nWhen this was initially proposed in gh-2615, the main objection, raised by @mih, was that `create_sibling` should be reworked to not assume a local or remote shell.  That is, put some abstraction layer over the calls to `{SSHConnection,_RunnerAdapter}.__call__`.  On top of that, there was the idea that such an abstraction could lead to dissolving `create_sibling_github`.\r\n\r\nThe command abstractions being worked on in gh-4068 are bringing us closer to the first part (relying solely on methods rather than explicit shell commands).  But in the meantime, this PR isn't making things any worse or more difficult going forward.  The core logic added to `CreateSibling` boils down to a single condition about local vs remote, the one that decides whether to use `SSHConnection` or the local-path-based `_RunnerAdapter`.\r\n\r\nAs for the second point, with the addition of `create_sibling_gitlab` and `create_sibling_ria`, I think it's safe to conclude that the idea of unifying these variants should not prevent moving forward with the local path support in `create_sibling`.  Assuming that such a union of `create_sibling*` variants is desirable, it isn't going to happen in the near future, and teaching `create_sibling` to handle local paths certainly isn't making the situation any worse than the recent `create_sibling_*` additions did.\r\n\r\nCloses #1680.", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/4187/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/4187/timeline", "performed_via_github_app": null}