{"url": "https://api.github.com/repos/datalad/datalad/issues/2252", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2252/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2252/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2252/events", "html_url": "https://github.com/datalad/datalad/issues/2252", "id": 301456978, "node_id": "MDU6SXNzdWUzMDE0NTY5Nzg=", "number": 2252, "title": "datalad test  might pick up local", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2018-03-01T15:53:58Z", "updated_at": "2018-03-08T10:27:20Z", "closed_at": null, "author_association": "MEMBER", "active_lock_reason": null, "body": "#### What is the problem?\r\n\r\nrunning the flashu singularity image so way too many errors and only later mentioned that all datalad paths refer to the local datalad repo \r\n\r\n```shell\r\n[yhalchen@ndoli ~]$ head -n 30 datalad-datalad-master-fullmaster.tests.log      \r\nCould not import jpeg_ls\r\nCould not import gdcm\r\n.EEE......F.......E.Running unit tests for datalad\r\nPython version 3.5.3 (default, Jan 19 2017, 14:11:04) [GCC 6.3.0 20170118]\r\nnose version 1.3.7\r\n                                                                                    .E..SSS....SSSSSEEEEEE...EEEEEEE.E...EEEES...................................S.S..........................S....S.SSS.SS.EEEEEEEE.....E.........S...................E...SSS......SS..................S............ESSSSSSSSS....S...................................EE..................SEE....F.......FE................E.............E...\r\n----------------------------------------------------------------------\r\nRan 1 test in 0.001s\r\n\r\nOK\r\n......SS.E................/tmp/datalad_temp_test_annex_add_no_dotfiles_daqnnbx\r\nRunning unit tests for datalad\r\nPython version 3.5.3 (default, Jan 19 2017, 14:11:04) [GCC 6.3.0 20170118]\r\nnose version 1.3.7\r\n....S...................EE..S........S..E......................E\r\n======================================================================\r\nERROR: datalad.cmdline.tests.test_formatters.test_parser_access\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.5/dist-packages/nose/case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"/ihome/yhalchen/datalad/datalad/cmdline/tests/test_formatters.py\", line 87, in test_parser_access\r\n    parsers = setup_parser(return_subparsers=True)\r\nTypeError: setup_parser() missing 1 required positional argument: 'cmdlineargs'\r\n...\r\n======================================================================\r\nFAIL: datalad.tests.test_cmd.test_runner_dry\r\n----------------------------------------------------------------------\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.5/dist-packages/nose/case.py\", line 198, in runTest\r\n    self.test(*self.arg)\r\n  File \"/ihome/yhalchen/datalad/datalad/tests/utils.py\", line 1086, in newfunc\r\n    func(*args, **kwargs)\r\n  File \"/ihome/yhalchen/datalad/datalad/tests/utils.py\", line 927, in newfunc\r\n    reraise(*exc_info)\r\n  File \"/usr/lib/python3/dist-packages/six.py\", line 686, in reraise\r\n    raise value\r\n  File \"/ihome/yhalchen/datalad/datalad/tests/utils.py\", line 903, in newfunc\r\n    func(*args, **kwargs)\r\n  File \"/ihome/yhalchen/datalad/datalad/tests/utils.py\", line 593, in newfunc\r\n    return t(*(arg + (filename,)), **kw)\r\n  File \"/ihome/yhalchen/datalad/datalad/tests/test_cmd.py\", line 46, in test_runner_dry\r\n    cml.assert_logged(\"{DryRunProtocol} Running: %s\" % cmd, regex=False)\r\n  File \"/usr/local/lib/python3.5/dist-packages/datalad/utils.py\", line 901, in assert_logged\r\n    (assert_re_in if regex else assert_in)(match, self.out, **kwargs)\r\nAssertionError: '{DryRunProtocol} Running: echo Testing dry run > /tmp/datalad_temp_test_runner_drytncihsv0' not found in ''\r\n\r\n----------------------------------------------------------------------\r\nRan 506 tests in 1006.191s\r\n\r\nFAILED (SKIP=42, errors=80, failures=3)\r\n\r\n\r\n```\r\nFWIW, PYTHONPATH is clean ... also seems to pick up system nose... I don't get it\r\n\r\nit was ran as\r\n```\r\n./datalad-datalad-master-fullmaster.simg test 2>&1 | tee ./datalad-datalad-master-fullmaster.tests.log\r\n```", "closed_by": null, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2252/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2252/timeline", "performed_via_github_app": null}