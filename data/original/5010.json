{"url": "https://api.github.com/repos/datalad/datalad/issues/5010", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/5010/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/5010/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/5010/events", "html_url": "https://github.com/datalad/datalad/pull/5010", "id": 718661757, "node_id": "MDExOlB1bGxSZXF1ZXN0NTAxMDA3NDg3", "number": 5010, "title": "BF/RF: GitRepo.push -- push first refspec separately first for github (or if remote.{remote}.datalad-push-default-first is set)", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1746781627, "node_id": "MDU6TGFiZWwxNzQ2NzgxNjI3", "url": "https://api.github.com/repos/datalad/datalad/labels/merge-if-ok", "name": "merge-if-ok", "color": "fbca04", "default": false, "description": "OP considers this work done, and requests review/merge"}, {"id": 2767220159, "node_id": "MDU6TGFiZWwyNzY3MjIwMTU5", "url": "https://api.github.com/repos/datalad/datalad/labels/cmd-push", "name": "cmd-push", "color": "FEF2C0", "default": false, "description": ""}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 14, "created_at": "2020-10-10T17:07:21Z", "updated_at": "2021-04-29T21:59:11Z", "closed_at": "2021-03-23T13:17:25Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/5010", "html_url": "https://github.com/datalad/datalad/pull/5010", "diff_url": "https://github.com/datalad/datalad/pull/5010.diff", "patch_url": "https://github.com/datalad/datalad/pull/5010.patch"}, "body": "This is a central place for logic of pushing refspecs used by push and publish,\r\nso I decided to fix in a single spot instead of duplicating logic or providing\r\nyet another additional wrapper, and thus possibly of help to any other code which\r\nuses .push().\r\n\r\nNote:\r\n- logic is in effect only if remote and refspecs are provided. So it will be\r\n  of no effect if either of those not provided, but most likely there would be\r\n  no relevant use case since it would require manual configuration first of the\r\n  refspecs and default remote for a branch within config before submitting a push\r\n\r\nQs:\r\n-  may be logic should move even deeper into  push_ generator?\r\n-  ideas on how to establish testing for this, without interacting with github, since it seemed we encountered such behavior on pushing multiple refspecs at once only with github. ATM tested \"manually\" with both push and publish using reproducer in #4997\r\n- [x] redo following the proposal in https://github.com/datalad/datalad/pull/5010#issuecomment-712997679 to explicitly annotate config while `create-sibling-github` to do separate initial push(es) only in that case (not always upon initial push).  I am not 100% satisfied in such approach since would make it github specific, and might be needed for other (gitlab?) if they start behaving the same way\r\n\r\nCloses: #4997\r\n", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/5010/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/5010/timeline", "performed_via_github_app": null}