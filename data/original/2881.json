{"url": "https://api.github.com/repos/datalad/datalad/issues/2881", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/2881/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/2881/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/2881/events", "html_url": "https://github.com/datalad/datalad/pull/2881", "id": 364900611, "node_id": "MDExOlB1bGxSZXF1ZXN0MjE4OTc3MzU5", "number": 2881, "title": "ENH: channel output from annex init into our logger", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": {"url": "https://api.github.com/repos/datalad/datalad/milestones/53", "html_url": "https://github.com/datalad/datalad/milestone/53", "labels_url": "https://api.github.com/repos/datalad/datalad/milestones/53/labels", "id": 3542066, "node_id": "MDk6TWlsZXN0b25lMzU0MjA2Ng==", "number": 53, "title": "Release 0.11.0", "description": "", "creator": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "open_issues": 0, "closed_issues": 40, "state": "closed", "created_at": "2018-08-02T13:36:42Z", "updated_at": "2018-10-24T18:43:30Z", "due_on": "2018-10-23T07:00:00Z", "closed_at": "2018-10-24T18:43:30Z"}, "comments": 4, "created_at": "2018-09-28T13:58:10Z", "updated_at": "2019-02-17T04:02:17Z", "closed_at": "2018-09-30T09:24:04Z", "author_association": "MEMBER", "active_lock_reason": null, "pull_request": {"url": "https://api.github.com/repos/datalad/datalad/pulls/2881", "html_url": "https://github.com/datalad/datalad/pull/2881", "diff_url": "https://github.com/datalad/datalad/pull/2881.diff", "patch_url": "https://github.com/datalad/datalad/pull/2881.patch"}, "body": "This pull request partially fixes #2844 and replaces #2868 \r\n\r\nPartially, because whenever we do consume/redirect stderr, `git` no longer outputs progress information.  Here is the function it decides upon  https://git.kernel.org/pub/scm/git/git.git/tree/progress.c#n75\r\n\r\nTo force it to provide progress output, checkout/pull/push have additional `--progress` option to force it. there is no config setting (according to IRC chat). But just from a few days back, https://public-inbox.org/git/20180921222454.GD11177@sigill.intra.peff.net/ points to a proposal to be able to pipe progress information to any process to provide custom progress rendering without needing to parse etc. Might come handy in the future\r\n\r\nSo, for now I am offering to get following:\r\n```shell\r\n$> tools/eval_under_testloopfs DATALAD_REPO_VERSION=6 /usr/bin/time datalad install -s https://github.com/psychoinformatics-de/studyforrest-data-structural.git studyforrest-data-structural_alt                            I: vfat of 10:  /home/yoh/.tmp/datalad-fs-6wyWm\r\n10+0 records in\r\n10+0 records out\r\n10321920 bytes (10 MB, 9.8 MiB) copied, 0.00474188 s, 2.2 GB/s\r\nmkfs.fat 4.1 (2017-01-24)\r\nI: running DATALAD_REPO_VERSION=6 /usr/bin/time datalad install -s https://github.com/psychoinformatics-de/studyforrest-data-structural.git studyforrest-data-structural_alt\r\n[INFO   ] Cloning https://github.com/psychoinformatics-de/studyforrest-data-structural.git [1 other candidates] into '/home/yoh/.tmp/datalad-fs-6wyWm/studyforrest-data-structural_alt' \r\n[INFO   ]   Detected a filesystem without fifo support. \r\n[INFO   ]   Disabling ssh connection caching. \r\n[INFO   ]   Detected a crippled filesystem. \r\n[INFO   ]   Entering an adjusted branch where files are unlocked as this filesystem does not support locked files. \r\n[INFO   ] Switched to branch 'adjusted/master(unlocked)' \r\n[INFO   ] download failed: Not Found \r\n[INFO   ]   Remote origin not usable by git-annex; setting annex-ignore \r\ninstall(ok): /home/yoh/.tmp/datalad-fs-6wyWm/studyforrest-data-structural_alt (dataset)\r\n6.74user 3.51system 0:15.83elapsed 64%CPU (0avgtext+0avgdata 54752maxresident)k\r\n8inputs+18768outputs (0major+847758minor)pagefaults 0swaps\r\n/home/yoh/.tmp/datalad-fs-6wyWm\r\ntools/eval_under_testloopfs DATALAD_REPO_VERSION=6 /usr/bin/time datalad  -s   6.79s user 3.55s system 64% cpu 16.003 total\r\n```\r\nIMHO it is already good enough to inform user about ongoing activities... not yet sure about `download failed: Not Found` message there.\r\n\r\nAs for progress, which as some of you already discovered first hand is not really \"logging/CI friendly\" if just dumped to stderr filling up the logs,  I would wait for us to be able to get and handle it.\r\n", "closed_by": {"login": "mih", "id": 136479, "node_id": "MDQ6VXNlcjEzNjQ3OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/136479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mih", "html_url": "https://github.com/mih", "followers_url": "https://api.github.com/users/mih/followers", "following_url": "https://api.github.com/users/mih/following{/other_user}", "gists_url": "https://api.github.com/users/mih/gists{/gist_id}", "starred_url": "https://api.github.com/users/mih/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mih/subscriptions", "organizations_url": "https://api.github.com/users/mih/orgs", "repos_url": "https://api.github.com/users/mih/repos", "events_url": "https://api.github.com/users/mih/events{/privacy}", "received_events_url": "https://api.github.com/users/mih/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/2881/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/2881/timeline", "performed_via_github_app": null}