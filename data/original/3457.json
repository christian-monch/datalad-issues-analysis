{"url": "https://api.github.com/repos/datalad/datalad/issues/3457", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/3457/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/3457/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/3457/events", "html_url": "https://github.com/datalad/datalad/issues/3457", "id": 448227887, "node_id": "MDU6SXNzdWU0NDgyMjc4ODc=", "number": 3457, "title": "Bring back git gc", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390153891, "node_id": "MDU6TGFiZWwzOTAxNTM4OTE=", "url": "https://api.github.com/repos/datalad/datalad/labels/UX", "name": "UX", "color": "0052cc", "default": false, "description": "user experience"}], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-05-24T15:24:19Z", "updated_at": "2019-06-25T14:34:10Z", "closed_at": "2019-06-25T14:34:10Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "ATM we explicitly disable git's gc during calls to git/annex since GitPython's state might get outdated and we did experience problems in the past.  But that often, largely after a sweep of git annex actions, leaves **huge** .git/objects behind and then mandates either running some `git` commands manually to get gc triggered or an explicit run to `gc`.  Example after a one large `datalad save` call:\r\n```shell\r\n$ du -scm .git/objects\r\n1978    .git/objects\r\n1978    total\r\n\r\n$ git gc --prune=now\r\nCounting objects: 524428, done.\r\nDelta compression using up to 40 threads.\r\nCompressing objects: 100% (520901/520901), done.\r\nWriting objects: 100% (524428/524428), done.\r\nTotal 524428 (delta 50448), reused 18895 (delta 1701)\r\nRemoving duplicate objects: 100% (256/256), done.\r\nChecking connectivity: 524428, done.\r\n\r\n$ du -scm .git/objects\r\n71      .git/objects\r\n71      total\r\n```\r\n\r\nEspecially if GitPython would be gone, or may be even without it (could have been fixed up in GitPython to react upon gc?) we should consider dropping disabling of automatic gc.  I will submit a test PR to see if things still get crashing (unable to find objects etc) ;-)", "closed_by": {"login": "kyleam", "id": 1297788, "node_id": "MDQ6VXNlcjEyOTc3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1297788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyleam", "html_url": "https://github.com/kyleam", "followers_url": "https://api.github.com/users/kyleam/followers", "following_url": "https://api.github.com/users/kyleam/following{/other_user}", "gists_url": "https://api.github.com/users/kyleam/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyleam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyleam/subscriptions", "organizations_url": "https://api.github.com/users/kyleam/orgs", "repos_url": "https://api.github.com/users/kyleam/repos", "events_url": "https://api.github.com/users/kyleam/events{/privacy}", "received_events_url": "https://api.github.com/users/kyleam/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/3457/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/3457/timeline", "performed_via_github_app": null}