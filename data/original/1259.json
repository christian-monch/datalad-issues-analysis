{"url": "https://api.github.com/repos/datalad/datalad/issues/1259", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1259/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1259/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1259/events", "html_url": "https://github.com/datalad/datalad/issues/1259", "id": 205467674, "node_id": "MDU6SXNzdWUyMDU0Njc2NzQ=", "number": 1259, "title": "might need to use the same (across repos) UUID for our special remotes", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2017-02-06T00:44:00Z", "updated_at": "2018-09-14T04:25:36Z", "closed_at": "2018-09-14T04:25:36Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "currently annex would just create a new UUID for our special remotes (datalad, datalad-archives) in each new repository.  Then if we get git-annex merged of multiple remotes where our special remotes would have the same name but different UUIDs, it confuses annex, so it doesn't e.g. list URLs for datalad-archives in whereis etc.  Example:\r\n```\r\n$> git annex info                                                                                                            \r\nrepository mode: indirect\r\ntrusted repositories: 1\r\n        9240fb38-adbe-4bfe-847a-bdd98d570f75 -- origin [upstream-annex]\r\nsemitrusted repositories: 18\r\n        00000000-0000-0000-0000-000000000001 -- web\r\n        00000000-0000-0000-0000-000000000002 -- bittorrent\r\n        0a890d37-fdfa-4e05-afe6-845487880c03 -- yoh@smaug:~/deb/gits/pkg-exppsy/freesurfer-upstream [freesurfer2-tarballs]\r\n        14311777-6106-4ba8-8356-2bfb0d198b64 -- zkaufman@sand:/autofs/space/sand_001/users/zkaufman/temp/stable.sync/dev.git\r\n        1afd711e-b030-42cc-87bd-fdfbdc8c8f87 -- yoh@hopa:~/deb/gits/pkg-exppsy/freesurfer-upstream\r\n        1ddc5cb2-9e3c-4b06-8d88-a773d60190e0 -- local-fsaverages-extracted\r\n        40f726d4-3c32-496f-99fc-80b36f2ca391 -- zkaufman@sand:/autofs/space/sand_001/users/zkaufman/temp/trunk.git/dev\r\n        58892d74-dae0-4bd1-a160-011e82d201f2 -- sand trunk\r\n        6b3d448b-ec85-46c7-a62e-ef4be6cad382 -- zkaufman@sand:/autofs/space/sand_001/users/zkaufman/freesurfer_centos6.6/trunk.git\r\n        6d0bc2d9-c184-445c-82d0-b5c56c5bf5d9 -- zkaufman@gust.nmr.mgh.harvard.edu:/autofs/space/sand_001/users/zkaufman/freesurfer_lion/trunk/dev\r\n        739a31b2-febf-43ee-be59-713bdaa01a06 -- sand-sync\r\n        86abb331-a242-4607-8b52-15ae9d9c923a -- zkaufman@sand:/autofs/space/sand_001/users/zkaufman/freesurfer/dev\r\n        8a70bde7-2615-41b0-b689-37f9a2c81e6a -- yoh@smaug:~/deb/gits/pkg-exppsy/freesurfer-upstream/debian/freesurfer-sloppy-5.999.0/usr/lib/freesurfer-5.999.0 [here]\r\n        ba0b9401-2821-41d2-b9fc-f3319dc053e3 -- sand stable6\r\n        c5498455-f17b-4350-93f8-ce41fab6ebf0 -- datalad-archives\r\n        d018cb1b-c841-48b8-ba50-11b686a5c6ad\r\n        de89b8db-cf7a-4b63-8125-a1e3ca722c7d\r\n        e51f0d13-eba5-4a4c-9838-92cfa2dcde7f -- datalad-archives\r\n...\r\n```\r\nso multiple datalad-archives special remotes.\r\n```\r\n$> git annex --debug whereis --key SHA256E-s655672--637b2c56e87508be96ab5beb50373bae3a2cf02660b82914f4bb4c7855d09662.area.mgh\r\n[2017-02-05 19:43:30.793061693] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"show-ref\",\"git-annex\"]\r\n[2017-02-05 19:43:30.799202312] process done ExitSuccess\r\n[2017-02-05 19:43:30.799320636] read: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"show-ref\",\"--hash\",\"refs/heads/git-annex\"]\r\n[2017-02-05 19:43:30.804270571] process done ExitSuccess\r\n[2017-02-05 19:43:30.806519838] chat: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"cat-file\",\"--batch\"]\r\n[2017-02-05 19:43:30.808203874] chat: git [\"--git-dir=.git\",\"--work-tree=.\",\"--literal-pathspecs\",\"cat-file\",\"--batch-check=%(objectname) %(objecttype) %(objectsize)\"]\r\n[2017-02-05 19:43:30.814160621] read: git [\"config\",\"--null\",\"--list\"]\r\n[2017-02-05 19:43:30.820408926] process done ExitSuccess\r\n[2017-02-05 19:43:30.820643269] read: git [\"config\",\"--null\",\"--list\"]\r\n[2017-02-05 19:43:30.826001177] process done ExitSuccess\r\nwhereis SHA256E-s655672--637b2c56e87508be96ab5beb50373bae3a2cf02660b82914f4bb4c7855d09662.area.mgh [2017-02-05 19:43:30.837185451] chat: git-annex-remote-datalad-archives []\r\n[2017-02-05 19:43:31.253270057] git-annex-remote-datalad-archives[1] --> VERSION 1\r\n[2017-02-05 19:43:31.253557149] git-annex-remote-datalad-archives[1] <-- PREPARE\r\n[2017-02-05 19:43:31.253848254] git-annex-remote-datalad-archives[1] --> PREPARE-SUCCESS\r\n[2017-02-05 19:43:31.253981702] git-annex-remote-datalad-archives[1] <-- CLAIMURL dl+archive:SHA256E-s325844218--17897d67d037f83f8acd7892f65383f0d7762bf524ee7aae3009b1693565efad.tar.gz#path=fsaverage/surf/lh.white.avg.area.mgh&size=655672\r\n[2017-02-05 19:43:31.25437009] git-annex-remote-datalad-archives[1] --> DEBUG Claiming url 'dl+archive:SHA256E-s325844218--17897d67d037f83f8acd7892f65383f0d7762bf524ee7aae3009b1693565efad.tar.gz#path=fsaverage/surf/lh.white.avg.area.mgh&size=655672'\r\n[2017-02-05 19:43:31.254523647] Claiming url 'dl+archive:SHA256E-s325844218--17897d67d037f83f8acd7892f65383f0d7762bf524ee7aae3009b1693565efad.tar.gz#path=fsaverage/surf/lh.white.avg.area.mgh&size=655672'\r\n[2017-02-05 19:43:31.254632073] git-annex-remote-datalad-archives[1] --> CLAIMURL-SUCCESS\r\n(3 copies) \r\n        0a890d37-fdfa-4e05-afe6-845487880c03 -- yoh@smaug:~/deb/gits/pkg-exppsy/freesurfer-upstream [freesurfer2-tarballs]\r\n        8a70bde7-2615-41b0-b689-37f9a2c81e6a -- yoh@smaug:~/deb/gits/pkg-exppsy/freesurfer-upstream/debian/freesurfer-sloppy-5.999.0/usr/lib/freesurfer-5.999.0 [here]\r\n        e51f0d13-eba5-4a4c-9838-92cfa2dcde7f -- datalad-archives\r\nok\r\n[2017-02-05 19:43:31.284887304] process done ExitSuccess\r\n```\r\nso whereis doesn't report url although we claimed it.  Emailed @joeyh ", "closed_by": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1259/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1259/timeline", "performed_via_github_app": null}