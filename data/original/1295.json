{"url": "https://api.github.com/repos/datalad/datalad/issues/1295", "repository_url": "https://api.github.com/repos/datalad/datalad", "labels_url": "https://api.github.com/repos/datalad/datalad/issues/1295/labels{/name}", "comments_url": "https://api.github.com/repos/datalad/datalad/issues/1295/comments", "events_url": "https://api.github.com/repos/datalad/datalad/issues/1295/events", "html_url": "https://github.com/datalad/datalad/issues/1295", "id": 207566629, "node_id": "MDU6SXNzdWUyMDc1NjY2Mjk=", "number": 1295, "title": "create-sibling --inherit-settings", "user": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "closed", "locked": false, "assignee": {"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yarikoptic", "id": 39889, "node_id": "MDQ6VXNlcjM5ODg5", "avatar_url": "https://avatars.githubusercontent.com/u/39889?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yarikoptic", "html_url": "https://github.com/yarikoptic", "followers_url": "https://api.github.com/users/yarikoptic/followers", "following_url": "https://api.github.com/users/yarikoptic/following{/other_user}", "gists_url": "https://api.github.com/users/yarikoptic/gists{/gist_id}", "starred_url": "https://api.github.com/users/yarikoptic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yarikoptic/subscriptions", "organizations_url": "https://api.github.com/users/yarikoptic/orgs", "repos_url": "https://api.github.com/users/yarikoptic/repos", "events_url": "https://api.github.com/users/yarikoptic/events{/privacy}", "received_events_url": "https://api.github.com/users/yarikoptic/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2017-02-14T16:31:58Z", "updated_at": "2017-02-25T07:20:24Z", "closed_at": "2017-02-25T07:20:24Z", "author_association": "MEMBER", "active_lock_reason": null, "body": "As we have discussed with @mih, we might want to lessen my and hopefully others pain while creating and publishing new sub-datasets to the siblings for which their super-datasets have everything set already.   We need it scalable and flexible (e.g. some sub-sets of datasets could have different policy from others, like I have for ///labs/haxby).\r\n\r\nFor `url` and `pushurl` -- in case of non-hierarchical setups gets tricky, I am not yet having a good grip, but could be detected/marked somehow.  For what to push/upload - somewhat of two possible ways\r\n1. **custom config variable in super-** \r\nFirst we thought about having some additional config `remote.*.datalad-publish` which would be recorded within super's `.git/config` so that sub-dataset could just take them and use while configuring itself...   thinking about it though, \"I don't like it\" since it would not accommodate ad-hoc/custom setups I might have by interacting directly with `git config` and `git annex wanted` to achieve necessary effect.    Those two sets of settings would diverge and lead to chaos.  So I would prefer `2.`:\r\n2. **inherit all relevant settings**, i.e. rely more on git/annex settings instead of ad-hoc ones.\r\n\r\nWhat we really need is to inherit (depends on resolution of how publish behave, my view is here: https://github.com/datalad/datalad/issues/1274#issuecomment-279747603)\r\n- what to push: `--get-all remote.SIBLING.push`\r\n- what to upload: all non-empty values of `git annex wanted SIBLING` and if set to `standard` or `groupwanted`: `git annex group`, and in addition if `groupwanted` only: `git annex groupwanted`. \r\n- and only then inherit also any additional relevant custom variables (e.g.`datalad-publish-depends` and `datalad-publish-wanted` in https://github.com/datalad/datalad/issues/1274#issuecomment-279755509)\r\n\r\n### Difficulties with 2.\r\n\r\n- `shared` setting -- I don't think it is easy/viable to figure out from an existing one of the super-dataset... I could be wrong\r\n\r\nI guess since I am the one mudding the waters and needing it most ATM, I could take a try at it\r\n\r\nedit 1: added `datalad-publish-depends` into the list of vars to inherit\r\nedit 2: added `Difficulties` pointing to `--shared` setting.\r\nedit 3: +1c to those who wish all datasets to be annexes.  We cannot inherit \"wanted\" settings from the super dataset if it is just a pure git... heh... boomer!", "closed_by": {"login": "bpoldrack", "id": 10498301, "node_id": "MDQ6VXNlcjEwNDk4MzAx", "avatar_url": "https://avatars.githubusercontent.com/u/10498301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bpoldrack", "html_url": "https://github.com/bpoldrack", "followers_url": "https://api.github.com/users/bpoldrack/followers", "following_url": "https://api.github.com/users/bpoldrack/following{/other_user}", "gists_url": "https://api.github.com/users/bpoldrack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bpoldrack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bpoldrack/subscriptions", "organizations_url": "https://api.github.com/users/bpoldrack/orgs", "repos_url": "https://api.github.com/users/bpoldrack/repos", "events_url": "https://api.github.com/users/bpoldrack/events{/privacy}", "received_events_url": "https://api.github.com/users/bpoldrack/received_events", "type": "User", "site_admin": false}, "reactions": {"url": "https://api.github.com/repos/datalad/datalad/issues/1295/reactions", "total_count": 0, "+1": 0, "-1": 0, "laugh": 0, "hooray": 0, "confused": 0, "heart": 0, "rocket": 0, "eyes": 0}, "timeline_url": "https://api.github.com/repos/datalad/datalad/issues/1295/timeline", "performed_via_github_app": null}